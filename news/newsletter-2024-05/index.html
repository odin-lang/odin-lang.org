<!doctype html><html><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link rel=icon href=/favicon.svg><meta name=color-scheme content="only dark"><meta property="og:title" content="May 2024 Newsletter"><meta property="og:description" content="Highlights for May - Showcasing 5 Community Projects"><meta property="og:type" content="article"><meta property="og:url" content="https://odin-lang.org/news/newsletter-2024-05/"><meta property="og:image" content="https://odin-lang.org/images/logo-slim.png"><meta property="article:published_time" content="2024-04-30T00:00:00+00:00"><meta property="article:modified_time" content="2024-04-30T00:00:00+00:00"><link rel=stylesheet href=https://odin-lang.org/scss/custom.min.css><link rel=stylesheet href=/lib/highlight/styles/github-dark.min.css><script src=/lib/highlight/highlight.min.js></script><script>hljs.registerLanguage("odin",function(e){return{aliases:["odin","odinlang","odin-lang"],keywords:{keyword:"auto_cast bit_field bit_set break case cast context continue defer distinct do dynamic else enum fallthrough for foreign if import in map matrix not_in or_else or_return package proc return struct switch transmute type_of typeid union using when where",literal:"true false nil",built_in:"abs align_of cap clamp complex conj expand_to_tuple imag jmag kmag len max min offset_of quaternion real size_of soa_unzip soa_zip swizzle type_info_of type_of typeid_of"},illegal:"</",contains:[e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE,{className:"string",variants:[e.QUOTE_STRING_MODE,{begin:"'",end:"[^\\\\]'"},{begin:"`",end:"`"}]},{className:"number",variants:[{begin:e.C_NUMBER_RE+"[ijk]",relevance:1},e.C_NUMBER_MODE]}]}})</script><script>hljs.highlightAll()</script><script async src="https://www.googletagmanager.com/gtag/js?id=UA-67516878-2"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","UA-67516878-2")</script><link href=/css/style.css rel=stylesheet><title>May 2024 Newsletter | Odin Programming Language </title><link rel=alternate type=application/rss+xml href=https://odin-lang.org//categories/newsletter/index.xml title="Odin Newsletter"><body data-bs-spy=scroll data-bs-target=#TOC data-bs-offset=0 tabindex=0><script>window.localStorage.getItem("theme")||window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches&&(window.localStorage.setItem("theme","dark"),document.body.classList.add("dark-mode")),window.localStorage.getItem("theme")==="dark"&&document.body.classList.add("dark-mode");function toggleDarkMode(){document.body.classList.toggle("dark-mode")?window.localStorage.setItem("theme","dark"):window.localStorage.setItem("theme","light")}</script><header class=sticky-top><nav class="navbar navbar-expand-lg navbar-dark bg-primary odin-menu"><div class=container-xxl><a class=navbar-brand href=/><img src=/logo.svg height=30 alt=Odin id=navbar-logo>
</a><button class=navbar-toggler type=button data-bs-toggle=collapse data-bs-target=#odin-navbar-content aria-controls=odin-navbar-content aria-expanded=false aria-label="Toggle navigation">
<span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse" id=odin-navbar-content><ul class="navbar-nav ms-md-auto"><li class=nav-item><a class=nav-link href=/>Home</a></li><li class=nav-item><a class=nav-link href=/docs>Docs</a></li><li class=nav-item><a class=nav-link href=https://pkg.odin-lang.org/>Packages</a></li><li class=nav-item><a class="nav-link active" href=/news aria-current=page>News</a></li><li class=nav-item><a class=nav-link href=/showcase>Showcase</a></li><li class=nav-item><a class=nav-link href=https://forum.odin-lang.org>Forum</a></li><li class=nav-item><a class=nav-link href=/community>Community</a></li><li class=nav-item><a class=nav-link href=https://github.com/odin-lang/Odin target=_blank>GitHub</a></li><li class=nav-item><a class="nav-link btn-dark-mode" onclick=toggleDarkMode() title="Toggle Light/Dark Mode"><span class=dark-mode-appearance>Appearance:</span><svg fill="#fff" id="dark-mode-icon" viewBox="0 0 384 512"><path d="M223.5 32C1e2 32 0 132.3.0 256S1e2 480 223.5 480c60.6.0 115.5-24.2 155.8-63.4 5-4.9 6.3-12.5 3.1-18.7s-10.1-9.7-17-8.5c-9.8 1.7-19.8 2.6-30.1 2.6-96.9.0-175.5-78.8-175.5-176 0-65.8 36-123.1 89.3-153.3 6.1-3.5 9.2-10.5 7.7-17.3s-7.3-11.9-14.3-12.5c-6.3-.5-12.6-.8-19-.8z"/></svg><svg fill="#fff" id="light-mode-icon" viewBox="0 0 16 16"><path d="M8 12a4 4 0 100-8 4 4 0 000 8M8 0a.5.5.0 01.5.5v2a.5.5.0 01-1 0v-2A.5.5.0 018 0m0 13a.5.5.0 01.5.5v2a.5.5.0 01-1 0v-2A.5.5.0 018 13m8-5a.5.5.0 01-.5.5h-2a.5.5.0 010-1h2a.5.5.0 01.5.5M3 8a.5.5.0 01-.5.5h-2a.5.5.0 010-1h2A.5.5.0 013 8m10.657-5.657a.5.5.0 010 .707l-1.414 1.415a.5.5.0 11-.707-.708l1.414-1.414a.5.5.0 01.707.0m-9.193 9.193a.5.5.0 010 .707L3.05 13.657a.5.5.0 01-.707-.707l1.414-1.414a.5.5.0 01.707.0m9.193 2.121a.5.5.0 01-.707.0l-1.414-1.414a.5.5.0 01.707-.707l1.414 1.414a.5.5.0 010 .707M4.464 4.465a.5.5.0 01-.707.0L2.343 3.05a.5.5.0 11.707-.707l1.414 1.414a.5.5.0 010 .708"/></svg></button></a></li></ul></div></div></nav></header><main><div class=container-xxl><div class="row odin-main"><nav class="col-lg-2 odin-sidebar-border navbar-light"><div class="sticky-top odin-below-navbar py-3"><ul class="nav nav-pills d-flex flex-column"><li class=nav-item><a class=nav-link href=/news/newsletter-2025-q1/>2025 Q1 Newsletter</a></li><li class=nav-item><a class=nav-link href=/news/orca-odin/>Orca Odin Support</a></li><li class=nav-item><a class=nav-link href=/news/newsletter-2024-12/>December 2024 Newsletter</a></li><li class=nav-item><a class=nav-link href=/news/newsletter-2024-10/>October 2024 Newsletter</a></li><li class=nav-item><a class=nav-link href=/news/newsletter-2024-09/>September 2024 Newsletter</a></li><li class=nav-item><a class=nav-link href=/news/newsletter-2024-08/>August 2024 Newsletter</a></li><li class=nav-item><a class=nav-link href=/news/newsletter-2024-07/>July 2024 Newsletter</a></li><li class=nav-item><a class=nav-link href=/news/newsletter-2024-06/>June 2024 Newsletter</a></li><li class=nav-item><a class="nav-link active" href=/news/newsletter-2024-05/ aria-current=page>May 2024 Newsletter</a></li><li class=nav-item><a class=nav-link href=/news/newsletter-2024-04/>April 2024 Newsletter</a></li><li class=nav-item><a class=nav-link href=/news/newsletter-2024-03/>March 2024 Newsletter</a></li><li class=nav-item><a class=nav-link href=/news/newsletter-2024-02/>February 2024 Newsletter</a></li><li class=nav-item><a class=nav-link href=/news/newsletter-2024-01/>January 2024 Newsletter</a></li><li class=nav-item><a class=nav-link href=/news/newsletter-2023-12/>December 2023 Newsletter</a></li><li class=nav-item><a class=nav-link href=/news/newsletter-2023-11/>November 2023 Newsletter</a></li><li class=nav-item><a class=nav-link href=/news/newsletter-2023-09/>September 2023 Newsletter</a></li><li class=nav-item><a class=nav-link href=/news/newsletter-2023-08/>August 2023 Newsletter</a></li><li class=nav-item><a class=nav-link href=/news/newsletter-2023-07/>July 2023 Newsletter</a></li><li class=nav-item><a class=nav-link href=/news/newsletter-2023-06/>June 2023 Newsletter</a></li><li class=nav-item><a class=nav-link href=/news/newsletter-2023-04/>April 2023 Newsletter</a></li><li class=nav-item><a class=nav-link href=/news/newsletter-2022-12/>December 2022 Newsletter</a></li><li class=nav-item><a class=nav-link href=/news/newsletter-2022-11/>November 2022 Newsletter</a></li><li class=nav-item><a class=nav-link href=/news/read-a-file-line-by-line/>Reading a File Line by Line</a></li><li class=nav-item><a class=nav-link href=/news/calling-odin-from-python/>Calling Odin from Python</a></li><li class=nav-item><a class=nav-link href=/news/binding-to-c/>Binding to C</a></li><li class=nav-item><a class=nav-link href=/news/declaration-syntax/>Odin's Declaration Syntax</a></li><li class=nav-item><a class=nav-link href=/news/major-graphics-apis/>Official Metal and Direct3D Support</a></li><li class=nav-item><a class=nav-link href=/news/new-package-documentation/>New Package Documentation</a></li><li class=nav-item><a class=nav-link href=/news/optional-semicolons/>Optional Semicolons</a></li><li class=nav-item><a class=nav-link href=/news/quine-in-odin/>A Quine in Odin</a></li></ul></div></nav><article class="col-lg-8 p-4"><header><nav aria-label=breadcrumb><ol class=breadcrumb><li class=breadcrumb-item><a href=/news>News</a></li><li class=breadcrumb-item><a href=/news/newsletter-2024-05>Newsletter 2024 05</a></li></ol><h1>May 2024 Newsletter</h1></header><div class=odin-article><p>Read up on the compiler changes in the <a href=https://github.com/odin-lang/Odin/releases/tag/dev-2024-05>monthly release</a> notes.</p><h2 id=quick-shoutouts>Quick Shoutouts <a class=text-decoration-none href=#quick-shoutouts>#</a></h2><p><code>droaz</code> is still hard at work on the odin language server. Make sure to give it a try!</p><p>Heres a neat feature I saw they have recently added on the Discord.</p><div class=text-center><img class="figure-img img-fluid rounded" src=/images/news/2024-05-shoutout1.png></div><p><code>Obiwan87</code> is back on adding <a href=https://github.com/obiwan87/odin-intellij>Odin-Intellij</a> support. Better tooling around odin is always a blessing!</p><div class=text-center><img class="figure-img img-fluid rounded" src=/images/news/2024-05-shoutout2.png></div><h2 id=projects-shared-this-month>Projects shared this month <a class=text-decoration-none href=#projects-shared-this-month>#</a></h2><table><thead><tr><th>Project Name</th><th>Description</th></tr></thead><tbody><tr><td><a href=https://github.com/cr1sth0fer/odin-m3d>odin-m3d</a></td><td>M3D bindings</td></tr><tr><td><a href=https://github.com/karl-zylinski/odin-raylib-hot-reload-game-template>hot-reload-template</a></td><td>odin / raylib Hot Realoding Template</td></tr><tr><td><a href=https://github.com/blob1807/odin-aseprite>odin-aseprite</a></td><td>Handler for Aseprite files</td></tr><tr><td><a href=https://github.com/elvodqa/odin-al>odin-al</a></td><td>OpenAL bindings</td></tr><tr><td><a href=https://github.com/Z7-Z7L/ZTME>ZTME</a></td><td>Simple Tile Editor</td></tr><tr><td><a href=https://gist.github.com/p1xelHer0/abed4728096ea3a88af7802cbe46cf08>audio-files</a></td><td>Play audio files from memory</td></tr><tr><td><a href=https://github.com/asbott/jamgine>jamgine</a></td><td>sandbox / portfolio game graphics library</td></tr><tr><td><a href=https://github.com/lionel626/duckdb-odin>duckdb-odin</a></td><td>duckdb bindings</td></tr><tr><td><a href=https://github.com/atomicptr/anima>anima</a></td><td>2D animation library</td></tr><tr><td><a href=https://github.com/atomicptr/ld55>ld55</a></td><td>LD55 jam entry game</td></tr></tbody></table><h2 id=project-showcase>Project Showcase <a class=text-decoration-none href=#project-showcase>#</a></h2><p>We&rsquo;re going with the same layout as last month, let&rsquo;s see how it goes again.</p><hr><h2 id=text-editor-experimentation-1-skytrias>Text Editor Experimentation #1 (Skytrias) <a class=text-decoration-none href=#text-editor-experimentation-1-skytrias>#</a></h2><p>Earlier this year I became a bit stuck with personal projects. During that time I got angry at Sublime for crashing very often.</p><p>This sparked an interest in making an odin specific editor. It didn&rsquo;t have to do everything, but I wanted to give it a more serious try. Given that the odin <code>core:odin</code> library exists to read odin files / packages, it looked like a pretty simple project.</p><h3 id=craving-a-challenge>Craving a Challenge <a class=text-decoration-none href=#craving-a-challenge>#</a></h3><p>Well you may have guessed it. I wanted to try something more difficult, so I decided to take one different idea for this project.</p><p>Non-Linear text editing is what I called it. Meaning not having to care about separating code into files. It would be done automatically and the editor would be more like an IDE.</p><p><video class="ratio ratio-16x9 mb-1 rounded" controls src=/images/news/2024-05-skytrias1.mp4></video></p><p>Here is a a short preview of what I got working pretty quickly.</p><ul><li>Left: structs, procedures, etc + identifier</li><li>Middle: buffer name + buffer content</li><li>Right: Preview of the file output</li></ul><h3 id=what-happened>What happened? <a class=text-decoration-none href=#what-happened>#</a></h3><p>You can see mostly everything is done already? By the time the project was ~1 week old. The thing is, getting raw text editors to work is actually quite simple. As soon as you can edit bytes and navigate around, you&rsquo;re basically done.</p><p>One feature I really missed from <a href=https://4coder.net/>4coder</a> was <em>virtual whitespace</em>, which automatically indents each line. Implementing this for odin was pretty simple.</p><h3 id=the-rest>The Rest <a class=text-decoration-none href=#the-rest>#</a></h3><p>While syntax highlighting was easy, auto-completion with code <em>intelligence</em> turned out to be more trouble. At some point I though about just using OLS LSP but by the time I had already lost interest in the project.</p><p><video class="ratio ratio-16x9 mb-1 rounded" controls src=/images/news/2024-05-skytrias2.mp4></video></p><p>Here is the current state of the project.</p><ul><li>Split with individual buffer being slightly highlighted and can be navigated to/from.</li><li>Toggle details of buffers</li><li>Jump to Definition</li><li>Copy/Paste</li><li>Undo/Redo</li><li>Versioned buffers in a database</li></ul><h3 id=wrapping-up>Wrapping Up <a class=text-decoration-none href=#wrapping-up>#</a></h3><p>You can see it&rsquo;s not that difficult to get started with one of these. Nowadays Text Editors mostly win through ecosystem and plugin capabilities.</p><p>Next month I&rsquo;ll show you another approach to text editing odin specific code.</p><hr><h2 id=macos-voxel-engine-maco>Maco&rsquo;s Voxel Engine (maco) <a class=text-decoration-none href=#macos-voxel-engine-maco>#</a></h2><p>As a hobbyist game developer my quest is to build a game of impossible proportions. The first part of this quest is to create a procedurally generated game world with an interesting visual style.</p><p>Many different styles and techniques could potentially apply, however one important requirement is that I must be able to create all of the art by myself. I settled with the small voxel aesthetic which seems to be gaining some popularity among indie devs. The aesthetic hits a sweet spot between natural looking, detailed feel and abstract minimalism. I might try to describe this style as &ldquo;pixel art but in 3D&rdquo;.</p><figure class=figure><img src=/images/news/2024-05-maco1.png class="figure-img img-fluid rounded"><figcaption class="figure-caption text-center">The engine uses a deferred renderer which can support hundreds of shadow casting light sources</figcaption></figure><p>One who wants to draw voxels fast must solve a few fundamental problems. Many of the problems are well known at this point and some solutions are available. Not all of the solutions are applicable to every situation however.</p><p>One such problem is how to triangulate the voxel space so that the GPU can draw millions of small cubes efficiently. I chose a technique which, I believe, the author of &ldquo;Teardown&rdquo; is also using, i.e. ray marching. Instead of drawing each face using classic rasterization, I draw a bounding volume and solve detailed geometry by ray marching into a 3D array.</p><p>Another example of a challenge faced by the voxel renderer is Moiré aliasing. This has been a constant bother from back when I started making my first prototypes. Since there are only 6 possible normal vectors on the scene, the geometry does not smooth itself naturally. Whenever a face starts approaching a subpixel size it will start to flicker in a very unpleasant way. The voxels are very small to begin with so there are flickering faces everywhere all the time.</p><p>This is one of the problems that doesn&rsquo;t seem to have a widely accepted generic solution. One can only alleviate it by applying different measures depending on what&rsquo;s acceptable and what&rsquo;s available. I was hoping I could do without temporal antialiasing but in the end I had to implement my version of TAA. Nothing else seemed to get the job done.</p><figure class=figure><img src=/images/news/2024-05-maco2.png class="figure-img img-fluid rounded"><figcaption class="figure-caption text-center">A debug view into the bounding volume which is used to accelerate the voxel rendering</figcaption></figure><p>Generally speaking I am a little hesitant to call my game&rsquo;s backend an engine. It is little more than just the simplest thing that will hopefully allow me to do what I wanted to do. I am now approaching this milestone where I can finally start thinking about the content for change. This is all new and exciting to me.</p><p>Below is a short video showcasing the current state of the game. Everything in it is still a placeholder. There is only one tree model, one patch of grass and two decal bitmaps on the ground.</p><p>One cool aspect of the voxel style is that its possible to produce art directly from the code. The tree model is an example of this. It changes appearance every time the game is run as its generated algorithmically.</p><p>Performance-wise the engine can draw about 500 frames per second currently with a decent draw distance. This is not a bad result considering how much ray marching is taking place. Most of the performance budget is spent solving shadows, which is something I have been trying to optimize but I have been unable to figure out a breakthrough here. Either way I&rsquo;m quite happy with what I have now and I&rsquo;m looking forward to starting to build a virtual world using this engine.</p><p>Since this is the Odin newsletter I should probably also mention that the adoption of the Odin language to my workflow has been pivotal for making progress. Improved quality of life means there is more energy left to solve application problems and combat the horrors of our graphics APIs. A big thanks to Bill and all the maintainers of the language!</p><div style=position:relative;padding-bottom:56.25%;height:0;overflow:hidden><iframe allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen loading=eager referrerpolicy=strict-origin-when-cross-origin src="https://www.youtube.com/embed/Wny3glKZPBY?autoplay=0&amp;controls=1&amp;end=0&amp;loop=0&amp;mute=0&amp;start=0" style=position:absolute;top:0;left:0;width:100%;height:100%;border:0 title="YouTube video"></iframe></div><hr><h2 id=highest-peak-skol>Highest Peak (Skol) <a class=text-decoration-none href=#highest-peak-skol>#</a></h2><p>I&rsquo;ve been around Handmade Network for a while and heard about Odin there. I don&rsquo;t remember the first project I&rsquo;ve done with Odin but I&rsquo;ve been using Odin as my go to language for about two years. I cannot tell you which part of the language I like the most but writing it is so natural and I don&rsquo;t have to battle it, it&rsquo;s a blast. It&rsquo;s not a recent thing either, writing in Odin felt <em>correct</em> right from the start.</p><h3 id=its-my-peak>It&rsquo;s my peak <a class=text-decoration-none href=#its-my-peak>#</a></h3><img src=/images/news/2024-05-sk0l1.png class="img-fluid rounded"><p>This was supposed to be my submission for a <a href=https://itch.io/jam/dreadxp-extraterrestrial-terror-jam>two week game jam</a> with <strong>horror</strong>, <strong>aliens</strong> and <strong>crop circles</strong> themes. Before the jam I was working on another game and I stripped it of everything relating to that game and I was left with the barebones. So in the beginning, I had controls, soloud library for sounds, debug ui and a d3d11 renderer. I wasn&rsquo;t able to finish it in time, mostly because of the scope and I haven&rsquo;t done any real <em>art</em> and music before. However most of what I implemented took as long as I thought they would and hey, at least that means I know how much I procrastinate.</p><p>In the end I had serialization, save games, hexagon tiles, tile editor, dialogue and event system, resource and food gathering, camping, and very simple battles (with <strong>aliens</strong>) and more. There are also <strong>crop circles</strong> around that if you do what&rsquo;s necessary to complete them, they&rsquo;ll give you weird abilities that you will retain. Your team consists of some people in the <em>family</em> territory and they might die, so uh, that&rsquo;s a kind of <strong>horror</strong> right?</p><p>Anyways, the idea was to have a guy reliving the same time frame over and over and had recollection of what happened earlier. It&rsquo;s a kind of a puzzle game where you try out different paths to either figure out the optimal pathing through the story, or obtain information to use on subsequent runs.</p><p>At first I didn&rsquo;t want to have any dialogue but that requires more time and better art. As soon as I decided to have dialogue, it was obvious that simple switch cases and state flags would be too much for me to handle. Think about the case where you meet the same character you always meet in the fifth tile for the tenth time and the dialogue changes depending on what you have done that round and the rounds before that. Would have been a mess.</p><h3 id=condition---response>Condition - Response <a class=text-decoration-none href=#condition---response>#</a></h3><p>Some years ago I watched <a href="https://www.youtube.com/watch?v=tAbBID3N64A">this talk</a> and I wanted to do something similar since. Perfect time to do so!</p><img src=/images/news/2024-05-sk0l2.png class="img-fluid rounded"><p>I implemented a system that reads a text file and turns a group of conditions and responses into code that runs in a loop each time you move to another tile. It is much simpler from what they have done, but enough for my needs. Let&rsquo;s see in an example.</p><pre tabindex=0><code># Meeting the medium after seeing the sniper
{
  cond 
    Run_Met_Medium = 0
    Loop_Met_Medium &gt;= 2
    Loop_Medium_Appears_At_Distance = 3
    Info_Pack_Distance_From_Start = 3
    Loop_Met_Sniper &gt;= 1
    Run_Met_Sniper &lt;= 0
  response
    Run_Met_Medium +1
    Loop_Met_Medium +1
    Dial_Meet_Medium_Again_Met_Sniper__Player_Kid
    Proc_rsp_inc_medium_distance_and_draw_medium
}
</code></pre><p>This is checked each time you move into a tile. There&rsquo;s a character internally called <em>Medium</em> that can move around in between runs (<em>spooky</em>). What the above text says is that if you haven&rsquo;t yet met the <em>Medium</em> in this run, but have met her at least twice before, and if she appears at a distance of 3 tiles from the starting tile, and if you are at that distance too, and if you have met the sniper at least once before but not yet this run, do the following response:</p><p>Increment the flags for meeting the <em>Medium</em> (so that you don&rsquo;t meet her again this run as all <em>Medium</em> events begin with <code>Run_Met_Medium = 0</code>), show the dialogue <code>Meet_Medium_Again_Met_Sniper__Player_Kid</code> and call the proc <code>rsp_inc_medium_distance_and_draw_medium</code> Might look complicated but very easy to write.</p><p>I have <code>Run</code> and <code>Loop</code> flags signaling things that happen on this run or had happened in earlier runs. The conditions tagged with <code>Info</code> are things that are collected per new tile and don&rsquo;t make sense to me as flags. Where your characters are, whether they are bored, the amount of hours since they last ate and so on go there. They are also <em>collected</em> from different structs so your characters&rsquo; health could come from their entity structs, but the pack position comes from the pack struct etc. while the state flags are just two large arrays sitting in my main game struct.</p><p>From these files I generate an array containing all events before each compilation. This array is ordered by the amount of conditions, largest first. The more conditions an event has, the more specialized it is and it should be checked first in order to stop the less special/more common events from taking over. And that&rsquo;s basically it. Text parsed, array generated, the ordered condition groups are run in a loop, if one has all conditions true, its responses are called. If more than one event can happen with the same amount of conditions, I choose randomly which one happens.</p><p>Also, I could do more than dialogue by using this system:</p><pre tabindex=0><code>{
  cond 
    Info_Tile_Event_Count = 0
    Run_Last_Battle_In_Tiles &gt;= 8
    Info_Tile_Battle_Chance &gt;= 0.1
  response
    Proc_rsp_roll_for_battle
}
</code></pre><p>If there are no events on that tile, we haven&rsquo;t had a battle for at least 8 tiles and the tile could roll for battle, roll! Then I don&rsquo;t have to add extra logic for checking for battle events.</p><h3 id=proc_rsp_do_more><code>Proc_rsp_do_more</code> <a class=text-decoration-none href=#proc_rsp_do_more>#</a></h3><p>Of course you could do a lot more and optimize it. This was meant to be for a game jam so I implemented it as quickly as possible. You could add an event editor, generate a binary file and read from there instead of a fixed array when things get larger, separate conditions into logical areas (grass tiles only check for things that could happen on grass tiles) and so on. There is also some cruft to it. For example, I haven&rsquo;t talked about dialogues themselves but if a line changes in a dialogue, it has a different ID and the data is copied except for that line. If I implement an event editor, I could keep text ID&rsquo;s instead of text itself and just add/remove ids for different lines.</p><p>Anyways, I&rsquo;ll be completing this small game at some point. Will try to post updates if anything interesting happen.</p><hr><h2 id=chip8-emulator-virror>chip8 emulator (Virror) <a class=text-decoration-none href=#chip8-emulator-virror>#</a></h2><img src=/images/news/2024-05-virror1.png class="img-fluid rounded"><h3 id=background>Background <a class=text-decoration-none href=#background>#</a></h3><p>I always loved playing emulated games as an older kid. As I never had any consoles when I was younger there was a whole world of games out here waiting to be played and I especially loved playing SNES games because of all the amazing RPGs there.</p><p>When I went to university and started learning programming, I was naturally drawn to how emulators actually worked and became really interested in creating one myself. After looking a bit on the internet, I found out that the easiest one to start with was chip8 so I started implementing that according to the specs. The result was truly a horrible mess of half working buggy code, but it could play a few games and I was still happy with that. After that I tried to make a Gameboy emulator but quickly ran into a wall and stopped and did not try to make anything more for years.</p><p>Maybe around 20 years later I talked to a friend at work, and he was also really interested in making emulators, so we decided to each try and make our own Gameboy emulator. With my extra years of experience that went much smoother, and I have been working on different emulators now and then since then. After my friend recommended me Odin and working on a bigger hobby project for a while I decided to kind of go back to my roots a bit and decided to create a chip8 emulator again as a smaller project.</p><h3 id=creating-an-emulator>Creating an emulator <a class=text-decoration-none href=#creating-an-emulator>#</a></h3><p>The basics workings of a simple emulator are actually pretty simple. A game consists of a large number of instructions. These instructions can be anything from adding two numbers, jump to another part of the game or draw a sprite to the screen. So, to emulate the chip8, you basically read the first 2 bytes from the game, look at he most significant nibble to decide what kind of instruction it is and then perform that instruction. Some instructions need a little bit more decoding than that since there is a total of 35 instructions, but its still very straight forward.</p><p>The screen on chip8 is very small, only 64x32 pixels big, and there are 2 instructions to write to it. One is to clear the entire screen and the other one is to draw a sprite at a certain location on the screen. The drawing is done using xor, so if a white pixel is being drawn on another white pixel, that pixel is turned black, and a flag is set to indicate a collision so the game can handle thing like player colliding and dying.</p><p>This is just a very brief glimpse into the world of emulation and here are tons of resources on the internet, and if anyone is interested feel free to PM me @virror on the Odin discord and make sure to join the &ldquo;Emulator Development&rdquo; discord.</p><p>I also want to give a shoutout to my friend David for helping me reignite my passion for emulators and also for recommending this amazing language that makes coding even more fun then it was before : )</p><p>My chip8 repo: <a href=https://github.com/virror/odin-chip>https://github.com/virror/odin-chip</a></p><img src=/images/news/2024-05-virror2.gif class="img-fluid rounded"><hr><h2 id=asterboids-beans>Asterboids (Beans) <a class=text-decoration-none href=#asterboids-beans>#</a></h2><p>A very simple space-shooter with rogue-like elements. Loosely inspired by the classic arcade game, Asteroids. The game was meant to be a week-long project, with the goal of learning the <a href=https://odin-lang.org/>Odin</a> language and data-oriented-programming.
I ended up spending a bit more time on it because I was learning a lot and having so much fun!</p><p><video class="ratio ratio-16x9 mb-1 rounded" controls src=/images/news/2024-05-beans1.mp4></video></p><h3 id=project-breakdown>Project Breakdown <a class=text-decoration-none href=#project-breakdown>#</a></h3><p>Asterboids is a top-down space shooter where the player fights off waves of enemies from their spaceship. The enemies move in bird-like flocks, hence the name Aster<em>boids</em>.</p><p>There were three things I thought were particularly satisfying to develop: the smoke trails, enemy flocking simulation and rogue-like perk system.</p><h3 id=smoke-trails>Smoke Trails <a class=text-decoration-none href=#smoke-trails>#</a></h3><p>The original goal was to draw a trail behind the player when they dash. An approach I&rsquo;ve gotten a lot of mileage out of in the past is to draw objects that should have a trail directly into a render texture.
Rather than clearing the render texture each frame, it is drawn into <em>another</em> render texture using a shader that subtracts a little bit of alpha from the entire image. Using this double-buffered render texture aproach lets you create post-processing-like
effects which accumulate over time.</p><figure class="figure w-100 text-center"><img src=/images/news/2024-05-beans2.gif class="figure-img img-fluid rounded"><figcaption class="figure-caption text-center">The fading trail was working, but I wanted to see if I could add a bit more juice to the effect.</figcaption></figure><p>In addition to fading out the trail map over time, I add a little bit of distortion by offsetting the uvs.
This &ldquo;moves&rdquo; the pixels in render texture over time. For distortion I&rsquo;m using simplex noise. Each noise sample is mapped between 0 and TAU, and then used to rotate a unit vector.</p><p>This is what the trail effect looks like with the displacement applied. The distortion &ldquo;forces&rdquo; are hackily visualized on the right of the screen.</p><div class=text-center><img class="figure-img img-fluid rounded" src=/images/news/2024-05-beans3.gif></div><p>I actually think it looks good as-is, but as a final step I wanted the smoke to disperse over time. Rather than adding a blur pass, I&rsquo;m simply setting the filter-mode of the trail render-texture to BILINEAR. This &ldquo;blurs&rdquo; each sample, softening the smoke over time.</p><div class=text-center><img class="figure-img img-fluid rounded" src=/images/news/2024-05-beans4.gif></div><h3 id=flocking-simulation>Flocking Simulation <a class=text-decoration-none href=#flocking-simulation>#</a></h3><p>I wanted to find an interesting way for enemies to move. Boids seemed interesting, so I went with that!</p><p>I started with a naive n² implementation where each enemy checks its distance from every other enemy to find its neighbors.
This worked, but I couldn&rsquo;t have many boids before the frame-rate tanked.
To speed it up I wanted to do some sort of spatial partitioning. I had recently watched a <a href=https://youtu.be/oewDaISQpw0>video</a> on optimization using spatial hashgrids, and it seemed like a basic implementation would be quite straightforward, so I wrote my own.</p><p>Now that boids knew what cell they were in, they only had to check for boids in neighboring cells.</p><p>This was a lot faster, but I was interested giving multithreading a go.
I found a <a href=https://github.com/jakubtomsu/jobs>job-system</a> package on GitHub and threw it in my project.
Rather than processing the simulation boid by boid as I was before, the boids are now simulated cell by cell.
Each cell is simulated in its own job, and the job-system spreads that work across multiple threads automatically.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#75715e>// Pseudo-code
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>for</span> <span style=color:#a6e22e>boid</span> <span style=color:#66d9ef>in</span> <span style=color:#a6e22e>boids</span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>insert</span>(<span style=color:#a6e22e>grid</span>, <span style=color:#a6e22e>boid</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>for</span> <span style=color:#a6e22e>cell</span> <span style=color:#66d9ef>in</span> <span style=color:#a6e22e>grid</span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>add_job</span>((<span style=color:#a6e22e>cell</span>) <span style=color:#f92672>-&gt;</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span> <span style=color:#a6e22e>boid</span> <span style=color:#66d9ef>in</span> <span style=color:#a6e22e>cell</span>
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>flock</span>(<span style=color:#a6e22e>boid</span>, <span style=color:#a6e22e>cell</span>)
</span></span><span style=display:flex><span>  })
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>run_jobs</span>()
</span></span></code></pre></div><p>More boids, yay!</p><div class=text-center><img class="figure-img img-fluid rounded" src=/images/news/2024-05-beans5.gif></div><h3 id=gameplay-modifiers>Gameplay Modifiers <a class=text-decoration-none href=#gameplay-modifiers>#</a></h3><p>Whenever the player levels up they can pick one of three random level-up choices. Each choice is represented by a struct that stores a function for ensuring the modifier is valid given the current game state, and another for actually applying it to the game-state</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#a6e22e>Modifier</span> <span style=color:#f92672>::</span> <span style=color:#a6e22e>struct</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>name</span>        <span style=color:#f92672>:</span> <span style=color:#a6e22e>cstring</span>,                      <span style=color:#75715e>// Name of the modifier. Shown in the level up gui
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#a6e22e>description</span> <span style=color:#f92672>:</span> <span style=color:#a6e22e>cstring</span>,                      <span style=color:#75715e>// Description of the modifier. Shown in the level up gui
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#a6e22e>is_valid</span>    <span style=color:#f92672>:</span> <span style=color:#a6e22e>proc</span>(<span style=color:#a6e22e>game</span> <span style=color:#f92672>:</span> <span style=color:#f92672>^</span><span style=color:#a6e22e>Game</span>) <span style=color:#f92672>-&gt;</span> <span style=color:#a6e22e>bool</span>,   <span style=color:#75715e>// Function that can be called to check if a modifier is valid
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#a6e22e>on_choose</span>   <span style=color:#f92672>:</span> <span style=color:#a6e22e>proc</span>(<span style=color:#a6e22e>game</span> <span style=color:#f92672>:</span> <span style=color:#f92672>^</span><span style=color:#a6e22e>Game</span>),           <span style=color:#75715e>// Function that can be called to apply the modifier to the current game state
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>}
</span></span></code></pre></div><p>Each modifier is then authored in a big map so it&rsquo;s quite easy to throw together interesting modifiers.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#a6e22e>ModifierChoices</span> <span style=color:#f92672>:=</span> [<span style=color:#a6e22e>ModifierType</span>]<span style=color:#a6e22e>Modifier</span> {
</span></span><span style=display:flex><span>  .<span style=color:#a6e22e>RangeFinder</span> <span style=color:#f92672>=</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>name</span>        <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;Range Finder&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>description</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;Installs a laser sight onto the player ship&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>on_choose</span>   <span style=color:#f92672>=</span> <span style=color:#a6e22e>proc</span>(<span style=color:#a6e22e>game</span> <span style=color:#f92672>:</span> <span style=color:#f92672>^</span><span style=color:#a6e22e>Game</span>) { 
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>add_action</span>(<span style=color:#f92672>&amp;</span><span style=color:#a6e22e>game</span>.<span style=color:#a6e22e>weapon</span>.<span style=color:#a6e22e>on_draw_weapon</span>, <span style=color:#a6e22e>proc</span>(<span style=color:#a6e22e>draw</span> <span style=color:#f92672>:</span> <span style=color:#f92672>^</span><span style=color:#a6e22e>bool</span>, <span style=color:#a6e22e>game</span> <span style=color:#f92672>:</span> <span style=color:#f92672>^</span><span style=color:#a6e22e>Game</span>) {
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>rl</span>.<span style=color:#a6e22e>DrawLineV</span>(...)
</span></span><span style=display:flex><span>        })
</span></span><span style=display:flex><span>     }
</span></span><span style=display:flex><span>  },
</span></span><span style=display:flex><span>  ...
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h3 id=summary>Summary <a class=text-decoration-none href=#summary>#</a></h3><p>I had quite a positive experience learning the basics of Odin and am looking forward to using it for more projects in the future. Odin provides a buttery-smooth entry into low-level programming and I appreciate the lessons its design taught me about writing simpler code. I think there&rsquo;s some good bones here for a proper game so I may continue hacking on it in the future, but for now I&rsquo;ve got other projects I need to get back to :)</p></div></article><div id=TOC class="col-lg-2 odin-toc-border"><div class="sticky-top odin-below-navbar py-3"><nav id=TableOfContents><ul><li><a href=#quick-shoutouts>Quick Shoutouts</a></li><li><a href=#projects-shared-this-month>Projects shared this month</a></li><li><a href=#project-showcase>Project Showcase</a></li><li><a href=#text-editor-experimentation-1-skytrias>Text Editor Experimentation #1 (Skytrias)</a><ul><li><a href=#craving-a-challenge>Craving a Challenge</a></li><li><a href=#what-happened>What happened?</a></li><li><a href=#the-rest>The Rest</a></li><li><a href=#wrapping-up>Wrapping Up</a></li></ul></li><li><a href=#macos-voxel-engine-maco>Maco&rsquo;s Voxel Engine (maco)</a></li><li><a href=#highest-peak-skol>Highest Peak (Skol)</a><ul><li><a href=#its-my-peak>It&rsquo;s my peak</a></li><li><a href=#condition---response>Condition - Response</a></li><li><a href=#proc_rsp_do_more><code>Proc_rsp_do_more</code></a></li></ul></li><li><a href=#chip8-emulator-virror>chip8 emulator (Virror)</a><ul><li><a href=#background>Background</a></li><li><a href=#creating-an-emulator>Creating an emulator</a></li></ul></li><li><a href=#asterboids-beans>Asterboids (Beans)</a><ul><li><a href=#project-breakdown>Project Breakdown</a></li><li><a href=#smoke-trails>Smoke Trails</a></li><li><a href=#flocking-simulation>Flocking Simulation</a></li><li><a href=#gameplay-modifiers>Gameplay Modifiers</a></li><li><a href=#summary>Summary</a></li></ul></li></ul></nav></div></div></div></div></main><footer class=odin-footer><div class="container pb-5 pt-5"><div class="row g-4"><div class=col><a class=navbar-brand href=/><img class=mb-3 src=/logo.svg height=30 alt=Odin></a><p>The Data-Oriented Language for Sane Software Development.</p></div><nav class=col-md-auto><h4 class=fw-normal>Resources</h4><ul class=list-unstyled><li><a href=/docs class=link-light>Docs</a></li><li><a href=https://pkg.odin-lang.org/ class=link-light>Packages</a></li><li><a href=/news class=link-light>News</a></li></ul></nav><nav class=col-md-auto><h4 class=fw-normal>Community</h4><ul class=list-unstyled><li><a href=https://github.com/odin-lang/Odin target=_blank class=link-light>GitHub</a></li><li><a href=https://discord.gg/vafXTdubwr target=_blank class=link-light>Discord</a></li><li><a href=https://www.twitch.tv/ginger_bill target=_blank class=link-light>Twitch</a></li><li><a href=https://www.youtube.com/channel/UCUSck1dOH7VKmG4lRW7tZXg target=_blank class=link-light>YouTube</a></li><li><a href=/showcase target=_blank class=link-light>Showcase</a></li></ul></nav><nav class=col-md-auto><h4 class=fw-normal>Contribute</h4><ul class=list-unstyled><li><a href=https://github.com/odin-lang/Odin/issues target=_blank class=link-light>Issues</a></li><li><a href=https://www.patreon.com/gingerbill target=_blank class=link-light>Donate</a></li></ul></nav></div><div class="mt-4 text-muted">© 2016–2024 Ginger Bill</div></div></footer><script src=/lib/bootstrap/js/bootstrap.min.js></script><script src=/js/script.js></script></body></html>
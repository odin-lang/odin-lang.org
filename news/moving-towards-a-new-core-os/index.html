<!doctype html><html><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link rel=icon href=/favicon.svg><meta name=color-scheme content="only dark"><meta property="og:title" content='Moving Towards a New "core:os"'><meta property="og:description" content="The rationale and transition period to moving to the new &ldquo;core:os&rdquo;"><meta property="og:type" content="article"><meta property="og:url" content="https://odin-lang.org/news/moving-towards-a-new-core-os/"><meta property="og:image" content="https://odin-lang.org/images/logo-slim.png"><meta property="article:published_time" content="2025-10-31T00:00:00+00:00"><meta property="article:modified_time" content="2025-10-31T00:00:00+00:00"><link rel=stylesheet href=https://odin-lang.org/scss/custom.min.css><link rel=stylesheet href=/lib/highlight/styles/github-dark.min.css><script src=/lib/highlight/highlight.min.js></script><script src=/lib/highlight/languages/x86asm.min.js></script><script>hljs.registerLanguage("odin",function(e){return{aliases:["odin","odinlang","odin-lang"],keywords:{keyword:"auto_cast bit_field bit_set break case cast context continue defer distinct do dynamic else enum fallthrough for foreign if import in map matrix not_in or_else or_return package proc return struct switch transmute type_of typeid union using when where",literal:"true false nil",built_in:"abs align_of cap clamp complex conj expand_to_tuple imag jmag kmag len max min offset_of quaternion real size_of soa_unzip soa_zip swizzle type_info_of type_of typeid_of"},illegal:"</",contains:[e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE,{className:"string",variants:[e.QUOTE_STRING_MODE,{begin:"'",end:"[^\\\\]'"},{begin:"`",end:"`"}]},{className:"number",variants:[{begin:e.C_NUMBER_RE+"[ijk]",relevance:1},e.C_NUMBER_MODE]}]}})</script><script>hljs.highlightAll()</script><script async src="https://www.googletagmanager.com/gtag/js?id=UA-67516878-2"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","UA-67516878-2")</script><link href=/css/style.css rel=stylesheet><title>Moving Towards a New "core:os" | Odin Programming Language </title><link rel=alternate type=application/rss+xml href=https://odin-lang.org//categories/newsletter/index.xml title="Odin Newsletter"><body data-bs-spy=scroll data-bs-target=#TOC data-bs-offset=0 tabindex=0><script>window.localStorage.getItem("theme")||window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches&&(window.localStorage.setItem("theme","dark"),document.body.classList.add("dark-mode")),window.localStorage.getItem("theme")==="dark"&&document.body.classList.add("dark-mode");function toggleDarkMode(){document.body.classList.toggle("dark-mode")?window.localStorage.setItem("theme","dark"):window.localStorage.setItem("theme","light")}</script><header class=sticky-top><nav class="navbar navbar-expand-lg navbar-dark bg-primary odin-menu"><div class=container-xxl><a class=navbar-brand href=/><img src=/logo.svg height=30 alt=Odin id=navbar-logo>
</a><button class=navbar-toggler type=button data-bs-toggle=collapse data-bs-target=#odin-navbar-content aria-controls=odin-navbar-content aria-expanded=false aria-label="Toggle navigation">
<span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse" id=odin-navbar-content><ul class="navbar-nav ms-md-auto"><li class=nav-item><a class=nav-link href=/>Home</a></li><li class=nav-item><a class=nav-link href=/docs>Docs</a></li><li class=nav-item><a class=nav-link href=https://pkg.odin-lang.org/>Packages</a></li><li class=nav-item><a class="nav-link active" href=/news aria-current=page>News</a></li><li class=nav-item><a class=nav-link href=/showcase>Showcase</a></li><li class=nav-item><a class=nav-link href=https://forum.odin-lang.org>Forum</a></li><li class=nav-item><a class=nav-link href=/community>Community</a></li><li class=nav-item><a class=nav-link href=https://github.com/odin-lang/Odin target=_blank>GitHub</a></li><li class=nav-item><a class="nav-link btn-dark-mode" onclick=toggleDarkMode() title="Toggle Light/Dark Mode"><span class=dark-mode-appearance>Appearance:</span><svg fill="#fff" id="dark-mode-icon" viewBox="0 0 384 512"><path d="M223.5 32C1e2 32 0 132.3.0 256S1e2 480 223.5 480c60.6.0 115.5-24.2 155.8-63.4 5-4.9 6.3-12.5 3.1-18.7s-10.1-9.7-17-8.5c-9.8 1.7-19.8 2.6-30.1 2.6-96.9.0-175.5-78.8-175.5-176 0-65.8 36-123.1 89.3-153.3 6.1-3.5 9.2-10.5 7.7-17.3s-7.3-11.9-14.3-12.5c-6.3-.5-12.6-.8-19-.8z"/></svg><svg fill="#fff" id="light-mode-icon" viewBox="0 0 16 16"><path d="M8 12a4 4 0 100-8 4 4 0 000 8M8 0a.5.5.0 01.5.5v2a.5.5.0 01-1 0v-2A.5.5.0 018 0m0 13a.5.5.0 01.5.5v2a.5.5.0 01-1 0v-2A.5.5.0 018 13m8-5a.5.5.0 01-.5.5h-2a.5.5.0 010-1h2a.5.5.0 01.5.5M3 8a.5.5.0 01-.5.5h-2a.5.5.0 010-1h2A.5.5.0 013 8m10.657-5.657a.5.5.0 010 .707l-1.414 1.415a.5.5.0 11-.707-.708l1.414-1.414a.5.5.0 01.707.0m-9.193 9.193a.5.5.0 010 .707L3.05 13.657a.5.5.0 01-.707-.707l1.414-1.414a.5.5.0 01.707.0m9.193 2.121a.5.5.0 01-.707.0l-1.414-1.414a.5.5.0 01.707-.707l1.414 1.414a.5.5.0 010 .707M4.464 4.465a.5.5.0 01-.707.0L2.343 3.05a.5.5.0 11.707-.707l1.414 1.414a.5.5.0 010 .708"/></svg></button></a></li></ul></div></div></nav></header><main><div class=container-xxl><div class="row odin-main"><nav class="col-lg-2 odin-sidebar-border navbar-light"><div class="sticky-top odin-below-navbar py-3"><ul class="nav nav-pills d-flex flex-column"><li class=nav-item><a class="nav-link active" href=/news/moving-towards-a-new-core-os/ aria-current=page>Moving Towards a New "core:os"</a></li><li class=nav-item><a class=nav-link href=/news/newsletter-2025-q1/>2025 Q1 Newsletter</a></li><li class=nav-item><a class=nav-link href=/news/orca-odin/>Orca Odin Support</a></li><li class=nav-item><a class=nav-link href=/news/newsletter-2024-12/>December 2024 Newsletter</a></li><li class=nav-item><a class=nav-link href=/news/newsletter-2024-10/>October 2024 Newsletter</a></li><li class=nav-item><a class=nav-link href=/news/newsletter-2024-09/>September 2024 Newsletter</a></li><li class=nav-item><a class=nav-link href=/news/newsletter-2024-08/>August 2024 Newsletter</a></li><li class=nav-item><a class=nav-link href=/news/newsletter-2024-07/>July 2024 Newsletter</a></li><li class=nav-item><a class=nav-link href=/news/newsletter-2024-06/>June 2024 Newsletter</a></li><li class=nav-item><a class=nav-link href=/news/newsletter-2024-05/>May 2024 Newsletter</a></li><li class=nav-item><a class=nav-link href=/news/newsletter-2024-04/>April 2024 Newsletter</a></li><li class=nav-item><a class=nav-link href=/news/newsletter-2024-03/>March 2024 Newsletter</a></li><li class=nav-item><a class=nav-link href=/news/newsletter-2024-02/>February 2024 Newsletter</a></li><li class=nav-item><a class=nav-link href=/news/newsletter-2024-01/>January 2024 Newsletter</a></li><li class=nav-item><a class=nav-link href=/news/newsletter-2023-12/>December 2023 Newsletter</a></li><li class=nav-item><a class=nav-link href=/news/newsletter-2023-11/>November 2023 Newsletter</a></li><li class=nav-item><a class=nav-link href=/news/newsletter-2023-09/>September 2023 Newsletter</a></li><li class=nav-item><a class=nav-link href=/news/newsletter-2023-08/>August 2023 Newsletter</a></li><li class=nav-item><a class=nav-link href=/news/newsletter-2023-07/>July 2023 Newsletter</a></li><li class=nav-item><a class=nav-link href=/news/newsletter-2023-06/>June 2023 Newsletter</a></li><li class=nav-item><a class=nav-link href=/news/newsletter-2023-04/>April 2023 Newsletter</a></li><li class=nav-item><a class=nav-link href=/news/newsletter-2022-12/>December 2022 Newsletter</a></li><li class=nav-item><a class=nav-link href=/news/newsletter-2022-11/>November 2022 Newsletter</a></li><li class=nav-item><a class=nav-link href=/news/read-a-file-line-by-line/>Reading a File Line by Line</a></li><li class=nav-item><a class=nav-link href=/news/calling-odin-from-python/>Calling Odin from Python</a></li><li class=nav-item><a class=nav-link href=/news/binding-to-c/>Binding to C</a></li><li class=nav-item><a class=nav-link href=/news/declaration-syntax/>Odin's Declaration Syntax</a></li><li class=nav-item><a class=nav-link href=/news/major-graphics-apis/>Official Metal and Direct3D Support</a></li><li class=nav-item><a class=nav-link href=/news/new-package-documentation/>New Package Documentation</a></li><li class=nav-item><a class=nav-link href=/news/optional-semicolons/>Optional Semicolons</a></li><li class=nav-item><a class=nav-link href=/news/quine-in-odin/>A Quine in Odin</a></li></ul></div></nav><article class="col-lg-8 p-4"><header><nav aria-label=breadcrumb><ol class=breadcrumb><li class=breadcrumb-item><a href=/news>News</a></li><li class=breadcrumb-item><a href=/news/moving-towards-a-new-core-os>Moving towards a new core os</a></li></ol><h1>Moving Towards a New "core:os"</h1></header><div class=odin-article><p>Odin has been designed to be a pragmatic and evolutionary language, and as such, most people have come to appreciate the results of that, especially stability of language features. Odin rarely experiences breaking changes, however we have some technical debt to pay.</p><p>Packages <code>base:runtime</code> and <code>core:os</code> are the oldest packages in the core library of Odin, as they were used in bootstrapping the language and the rest of the packages. Over time they became an amalgamation of ideas, added as and when things were needed. <code>base:runtime</code> has already been cleaned up, but <code>core:os</code>&rsquo;s general API was poorly designed and inconsistent across platforms. Certain procedures were available only on specific platforms <em>and</em> other procedures, while available on all platforms, didn&rsquo;t have a unified signature across them. Constants and errors messages were all platform-specific, leading to less than ideal cross-platform behaviour.</p><p>Over the past couple of years, we have been redesigning the entirety of <code>core:os</code> (which at the time of writing is <code>core:os/os2</code>) to be in keeping with the standards of the core library. We have learnt a lot over the years in terms of library and API design for Odin, and we want to incorporate those lessons into one of its most foundational packages.</p><h2 id=transition-period>Transition Period <a class=text-decoration-none href=#transition-period>#</a></h2><p>There will be numerous breaking changes for <code>core:os</code>, but we have promised to give notice well in advance of when this will happen and how we plan to transition. This article is that notice.</p><p>We are expecting to transition to the new design of <code>core:os</code> early next year (Q1 2026).</p><p><strong>Note:</strong> <code>core:os/os2</code> is already available to use today. When the transition happens, this will become <code>core:os</code>, and <code>core:os/os2</code> will be no more.</p><h2 id=new-design>New Design <a class=text-decoration-none href=#new-design>#</a></h2><p>The new package has changed many aspects of how you interact with <code>core:os</code>; an overview:</p><ul><li>All procedures that returned allocated memory will require an explicit allocator to be passed<ul><li>If you want to emulate the current functionality, it is recommended that you pass <code>context.allocator</code> or <code>context.temp_allocator</code> where needed</li></ul></li><li>Most procedures now return an <code>os.Error</code> rather than a trivial <code>bool</code> or <code>Errno</code> where appropriate</li><li>File handling now uses <code>^os.File</code> instead of a raw file handle (<code>os.Handle</code>)<ul><li>Allowing for a more generic interface which can be easily overridden/intercepted where needed</li></ul></li><li>New APIs handling paths and processes</li><li>New and improved directory walker</li><li>Consistent API across all platforms/OSes</li><li>And many more quality of life improvements!</li></ul><h2 id=rationale-behind-design-choices>Rationale Behind Design Choices <a class=text-decoration-none href=#rationale-behind-design-choices>#</a></h2><h3 id=why-osfile>Why <code>^os.File</code> <a class=text-decoration-none href=#why-osfile>#</a></h3><p>The old API used raw file handles (<code>os.Handle</code>) for all of its file operations. This was fine for most operations, it can however be quite restrictive when doing something more complicated, or you need the ability to override/intercept behaviour.</p><p>In languages such as C, it is common to have the standard &ldquo;file&rdquo; type (e.g. <a href=https://wikipedia.org/wiki/C_file_input/output><code>FILE</code></a> in C) act like a generic stream interface with fstat-like support. This ability to override the generic interface allows for more streamlined file buffering (which was previously done with an explicit wrapper such as <a href=https://pkg.odin-lang.org/core/bufio/#Writer><code>bufio.Writer</code></a>/<a href=https://pkg.odin-lang.org/core/bufio/#Reader><code>bufio.Reader</code></a>), and also to intercept code that was written for a file handle (now <code>^os.File</code>) instead of an <a href=https://pkg.odin-lang.org/core/io/#Stream><code>io.Stream</code></a>.</p><p>A lot of Odin&rsquo;s design has centred around allowing the programmer to intercept third party code. As <code>core:os</code> is such a foundational package, we believe it should mirror this design principle.</p><p><strong>Note:</strong> Odin&rsquo;s <a href=https://odin-lang.org/docs/overview/#implicit-context-system>implicit <code>context</code> system</a> is a brilliant example of this interception ability built directly into the language.</p><h3 id=why-explicit-allocators>Why Explicit Allocators <a class=text-decoration-none href=#why-explicit-allocators>#</a></h3><p>We wanted to clarify the distinctions between user-level and OS-level allocations. Requiring an explicit allocator makes it very clear who and what is allocating where.</p><p>The internal design of the new <code>core:os</code> uses its own set of custom allocators which are not meant to be used by the rest of the user code. They are not overridable (unfortunately), and just as operating systems perform a lot of internal allocations already, this is an extension of that. This allows allocators to minimize memory usage, too.</p><p>A basic example of this is <code>^os.File</code> (a pointer to extra information) allocated using the internal allocators rather than any user-provided allocator, which are logically also freed using those internal allocators.</p><p>Other packages in the core library will keep their existing allocator idiom, such as <code>allocator := context.allocator</code>, as those APIs are purely in the user-level domain. <code>core:os</code> is being treated differently because it is a fundamentally different kind of package to the rest of the core library.</p><h2 id=some-examples-of-the-changes>Some Examples of the Changes <a class=text-decoration-none href=#some-examples-of-the-changes>#</a></h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span><span style=color:#75715e>// Old API
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>data, ok <span style=color:#f92672>:=</span> os.read_entire_file(<span style=color:#e6db74>&#34;path/to/file.txt&#34;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// New API
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>data, err <span style=color:#f92672>:=</span> os.read_entire_file(<span style=color:#e6db74>&#34;path/to/file.txt&#34;</span>, <span style=color:#66d9ef>context</span>.allocator)
</span></span></code></pre></div><pre tabindex=0><code>// Old API
fd: os.Handle

// New API
f: ^os.File
</code></pre><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span><span style=color:#75715e>// Old API
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>err<span style=color:#f92672>:</span> os.Errno <span style=color:#75715e>// just an integer
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#75715e>// New API
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>err<span style=color:#f92672>:</span> os.Error <span style=color:#75715e>// a union of enums
</span></span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span><span style=color:#75715e>// Removed procedures
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>get_last_error <span style=color:#75715e>// not needed since `os.Error` exists
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>get_page_size
</span></span><span style=display:flex><span>get_std_handle
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Removed OS specific procedures
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>get_windows_version <span style=color:#75715e>// etc
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>is_windows_<span style=color:#f92672>*</span> <span style=color:#75715e>// etc
</span></span></span></code></pre></div></div></article><div id=TOC class="col-lg-2 odin-toc-border"><div class="sticky-top odin-below-navbar py-3"><nav id=TableOfContents><ul><li><a href=#transition-period>Transition Period</a></li><li><a href=#new-design>New Design</a></li><li><a href=#rationale-behind-design-choices>Rationale Behind Design Choices</a><ul><li><a href=#why-osfile>Why <code>^os.File</code></a></li><li><a href=#why-explicit-allocators>Why Explicit Allocators</a></li></ul></li><li><a href=#some-examples-of-the-changes>Some Examples of the Changes</a></li></ul></nav></div></div></div></div></main><footer class=odin-footer><div class="container pb-5 pt-5"><div class="row g-4"><div class=col><a class=navbar-brand href=/><img class=mb-3 src=/logo.svg height=30 alt=Odin></a><p>The Data-Oriented Language for Sane Software Development.</p></div><nav class=col-md-auto><h4 class=fw-normal>Resources</h4><ul class=list-unstyled><li><a href=/docs class=link-light>Docs</a></li><li><a href=https://pkg.odin-lang.org/ class=link-light>Packages</a></li><li><a href=/news class=link-light>News</a></li></ul></nav><nav class=col-md-auto><h4 class=fw-normal>Community</h4><ul class=list-unstyled><li><a href=https://github.com/odin-lang/Odin target=_blank class=link-light>GitHub</a></li><li><a href=https://discord.gg/vafXTdubwr target=_blank class=link-light>Discord</a></li><li><a href=https://www.twitch.tv/ginger_bill target=_blank class=link-light>Twitch</a></li><li><a href=https://www.youtube.com/channel/UCUSck1dOH7VKmG4lRW7tZXg target=_blank class=link-light>YouTube</a></li><li><a href=/showcase target=_blank class=link-light>Showcase</a></li></ul></nav><nav class=col-md-auto><h4 class=fw-normal>Contribute</h4><ul class=list-unstyled><li><a href=https://github.com/odin-lang/Odin/issues target=_blank class=link-light>Issues</a></li><li><a href=https://www.patreon.com/gingerbill target=_blank class=link-light>Donate</a></li></ul></nav></div><div class="mt-4 text-muted">© 2016–2024 Ginger Bill</div></div></footer><script src=/lib/bootstrap/js/bootstrap.min.js></script><script src=/js/script.js></script></body></html>
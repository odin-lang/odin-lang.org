<!doctype html><html><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link rel=icon href=/favicon.svg><meta name=color-scheme content="only dark"><meta property="og:title" content="Overview"><meta property="og:description" content="An overview of the Odin programming language and its features."><meta property="og:type" content="article"><meta property="og:url" content="https://odin-lang.org/docs/overview/"><meta property="og:image" content="https://odin-lang.org/images/logo-slim.png"><link rel=stylesheet href=https://odin-lang.org/scss/custom.min.css><link rel=stylesheet href=/lib/highlight/styles/github-dark.min.css><script src=/lib/highlight/highlight.min.js></script><script src=/lib/highlight/languages/x86asm.min.js></script><script>hljs.registerLanguage("odin",function(e){return{aliases:["odin","odinlang","odin-lang"],keywords:{keyword:"auto_cast bit_field bit_set break case cast context continue defer distinct do dynamic else enum fallthrough for foreign if import in map matrix not_in or_else or_return package proc return struct switch transmute type_of typeid union using when where",literal:"true false nil",built_in:"abs align_of cap clamp complex conj expand_to_tuple imag jmag kmag len max min offset_of quaternion real size_of soa_unzip soa_zip swizzle type_info_of type_of typeid_of"},illegal:"</",contains:[e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE,{className:"string",variants:[e.QUOTE_STRING_MODE,{begin:"'",end:"[^\\\\]'"},{begin:"`",end:"`"}]},{className:"number",variants:[{begin:e.C_NUMBER_RE+"[ijk]",relevance:1},e.C_NUMBER_MODE]}]}})</script><script>hljs.highlightAll()</script><script async src="https://www.googletagmanager.com/gtag/js?id=UA-67516878-2"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","UA-67516878-2")</script><link href=/css/style.css rel=stylesheet><title>Overview | Odin Programming Language </title><link rel=alternate type=application/rss+xml href=https://odin-lang.org//categories/newsletter/index.xml title="Odin Newsletter"><body data-bs-spy=scroll data-bs-target=#TOC data-bs-offset=0 tabindex=0><script>window.localStorage.getItem("theme")||window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches&&(window.localStorage.setItem("theme","dark"),document.body.classList.add("dark-mode")),window.localStorage.getItem("theme")==="dark"&&document.body.classList.add("dark-mode");function toggleDarkMode(){document.body.classList.toggle("dark-mode")?window.localStorage.setItem("theme","dark"):window.localStorage.setItem("theme","light")}</script><header class=sticky-top><nav class="navbar navbar-expand-lg navbar-dark bg-primary odin-menu"><div class=container-xxl><a class=navbar-brand href=/><img src=/logo.svg height=30 alt=Odin id=navbar-logo>
</a><button class=navbar-toggler type=button data-bs-toggle=collapse data-bs-target=#odin-navbar-content aria-controls=odin-navbar-content aria-expanded=false aria-label="Toggle navigation">
<span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse" id=odin-navbar-content><ul class="navbar-nav ms-md-auto"><li class=nav-item><a class=nav-link href=/>Home</a></li><li class=nav-item><a class="nav-link active" href=/docs aria-current=page>Docs</a></li><li class=nav-item><a class=nav-link href=https://pkg.odin-lang.org/>Packages</a></li><li class=nav-item><a class=nav-link href=/news>News</a></li><li class=nav-item><a class=nav-link href=/showcase>Showcase</a></li><li class=nav-item><a class=nav-link href=https://forum.odin-lang.org>Forum</a></li><li class=nav-item><a class=nav-link href=/community>Community</a></li><li class=nav-item><a class=nav-link href=https://github.com/odin-lang/Odin target=_blank>GitHub</a></li><li class=nav-item><a class="nav-link btn-dark-mode" onclick=toggleDarkMode() title="Toggle Light/Dark Mode"><span class=dark-mode-appearance>Appearance:</span><svg fill="#fff" id="dark-mode-icon" viewBox="0 0 384 512"><path d="M223.5 32C1e2 32 0 132.3.0 256S1e2 480 223.5 480c60.6.0 115.5-24.2 155.8-63.4 5-4.9 6.3-12.5 3.1-18.7s-10.1-9.7-17-8.5c-9.8 1.7-19.8 2.6-30.1 2.6-96.9.0-175.5-78.8-175.5-176 0-65.8 36-123.1 89.3-153.3 6.1-3.5 9.2-10.5 7.7-17.3s-7.3-11.9-14.3-12.5c-6.3-.5-12.6-.8-19-.8z"/></svg><svg fill="#fff" id="light-mode-icon" viewBox="0 0 16 16"><path d="M8 12a4 4 0 100-8 4 4 0 000 8M8 0a.5.5.0 01.5.5v2a.5.5.0 01-1 0v-2A.5.5.0 018 0m0 13a.5.5.0 01.5.5v2a.5.5.0 01-1 0v-2A.5.5.0 018 13m8-5a.5.5.0 01-.5.5h-2a.5.5.0 010-1h2a.5.5.0 01.5.5M3 8a.5.5.0 01-.5.5h-2a.5.5.0 010-1h2A.5.5.0 013 8m10.657-5.657a.5.5.0 010 .707l-1.414 1.415a.5.5.0 11-.707-.708l1.414-1.414a.5.5.0 01.707.0m-9.193 9.193a.5.5.0 010 .707L3.05 13.657a.5.5.0 01-.707-.707l1.414-1.414a.5.5.0 01.707.0m9.193 2.121a.5.5.0 01-.707.0l-1.414-1.414a.5.5.0 01.707-.707l1.414 1.414a.5.5.0 010 .707M4.464 4.465a.5.5.0 01-.707.0L2.343 3.05a.5.5.0 11.707-.707l1.414 1.414a.5.5.0 010 .708"/></svg></button></a></li></ul></div></div></nav></header><main><div class=container-xxl><div class="row odin-main"><nav class="col-lg-2 odin-sidebar-border navbar-light"><div class="sticky-top odin-below-navbar py-3"><ul class="nav nav-pills d-flex flex-column"><li class=nav-item><a class=nav-link href=/docs/install/>Getting Started</a></li><li class=nav-item><a class="nav-link active" href=/docs/overview/ aria-current=page>Overview</a></li><li class=nav-item><a class=nav-link href=/docs/packages/>Packages</a></li><li class=nav-item><a class=nav-link href=/docs/examples/>Examples</a></li><li class=nav-item><a class=nav-link href=/docs/demo/>Demo File</a></li><li class=nav-item><a class=nav-link href=/docs/odin-book/>Books [External]</a></li><li class=nav-item><a class=nav-link href=/docs/testing/>Running Tests</a></li><li class=nav-item><a class=nav-link href=/docs/nightly/>Nightly Builds</a></li><li class=nav-item><a class=nav-link href=/docs/faq/>FAQ</a></li></ul></div></nav><article class="col-lg-8 p-4"><header><nav aria-label=breadcrumb><ol class=breadcrumb><li class=breadcrumb-item><a href=/docs>Docs</a></li><li class=breadcrumb-item><a href=/docs/overview>Overview</a></li></ol><h1>Overview</h1></header><div class=odin-article><h2 id=introduction>Introduction <a class=text-decoration-none href=#introduction>#</a></h2><p>This article is an introduction to the Odin Programming Language. You&rsquo;re assumed to have basic knowledge of programming concepts such as variables, statements, and types. You will see how familiar things are done in Odin, while also being introduced to new concepts.</p><p>If you haven&rsquo;t already installed Odin, then you can read how in the <a href=/docs/install/>Getting Started with Odin</a> guide.</p><h2 id=hellope>Hellope! <a class=text-decoration-none href=#hellope>#</a></h2><p>To begin this tour, let us start with a modified version of the famous &ldquo;hello world&rdquo; program:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span><span style=color:#f92672>package</span> main
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> <span style=color:#e6db74>&#34;core:fmt&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>main <span style=color:#f92672>::</span> <span style=color:#66d9ef>proc</span>() {
</span></span><span style=display:flex><span>	fmt.println(<span style=color:#e6db74>&#34;Hellope!&#34;</span>)
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>Save this code to a <code>.odin</code> file, then compile and run it using <code>odin run &lt;dir></code>. For the current directory:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-txt data-lang=txt><span style=display:flex><span>odin run .
</span></span></code></pre></div><p>The <code>run</code> command compiles the <code>.odin</code> file to an executable and then runs that executable after compilation. If you do not wish to run the executable after compilation, the <code>build</code> command can be used.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-txt data-lang=txt><span style=display:flex><span>odin build &lt;dir&gt;
</span></span></code></pre></div><p>Odin thinks in terms of directory-based packages. The <code>odin build &lt;dir></code> command takes all the files in the directory <code>&lt;dir></code>, compiles them into a package and then turns that into an executable. You can also tell it to treat a single file as a complete package, by adding <code>-file</code>, like so:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-txt data-lang=txt><span style=display:flex><span>odin run hellope.odin -file
</span></span></code></pre></div><h2 id=variable-declarations>Variable declarations <a class=text-decoration-none href=#variable-declarations>#</a></h2><p>A variable declaration declares a new variable for the current scope.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span>x<span style=color:#f92672>:</span> <span style=color:#66d9ef>int</span> <span style=color:#75715e>// declares `x` to have type `int`
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>y, z<span style=color:#f92672>:</span> <span style=color:#66d9ef>int</span> <span style=color:#75715e>// declares `y` and `z` to have type `int`
</span></span></span></code></pre></div><p>Variables are initialized to zero by default unless specified otherwise.</p><p><strong>Note:</strong> Declarations have to be <em>unique</em> within a scope.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span>x <span style=color:#f92672>:=</span> <span style=color:#a6e22e>10</span>
</span></span><span style=display:flex><span>x <span style=color:#f92672>:=</span> <span style=color:#a6e22e>20</span> <span style=color:#75715e>// Redeclaration of `x` in this scope
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>y, z <span style=color:#f92672>:=</span> <span style=color:#a6e22e>20</span>, <span style=color:#a6e22e>30</span>
</span></span><span style=display:flex><span>test, z <span style=color:#f92672>:=</span> <span style=color:#a6e22e>20</span>, <span style=color:#a6e22e>30</span> <span style=color:#75715e>// not allowed since `z` exists already
</span></span></span></code></pre></div><h2 id=assignment-statements>Assignment statements <a class=text-decoration-none href=#assignment-statements>#</a></h2><p>The assignment statement assigns a new value to a variable/location:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span>x<span style=color:#f92672>:</span> <span style=color:#66d9ef>int</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>123</span> <span style=color:#75715e>// declares a new variable `x` with type `int` and assigns a value to it
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>x <span style=color:#f92672>=</span> <span style=color:#a6e22e>637</span> <span style=color:#75715e>// assigns a new value to `x`
</span></span></span></code></pre></div><p><code>=</code> is the assignment operator.</p><p>You can assign multiple variables with it:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span>x, y <span style=color:#f92672>:=</span> <span style=color:#a6e22e>1</span>, <span style=color:#e6db74>&#34;hello&#34;</span> <span style=color:#75715e>// declares `x` and `y` and infers the types from the assignments
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>y, x <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;bye&#34;</span>, <span style=color:#a6e22e>5</span>
</span></span></code></pre></div><p><strong>Note:</strong> <code>:=</code> is two tokens, <code>:</code> and <code>=</code>. The following are all equivalent:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span>x<span style=color:#f92672>:</span> <span style=color:#66d9ef>int</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>123</span>
</span></span><span style=display:flex><span>x<span style=color:#f92672>:</span>     <span style=color:#f92672>=</span> <span style=color:#a6e22e>123</span> <span style=color:#75715e>// default type for an integer literal is `int`
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>x <span style=color:#f92672>:=</span> <span style=color:#a6e22e>123</span>
</span></span></code></pre></div><h2 id=literals>Literals <a class=text-decoration-none href=#literals>#</a></h2><h3 id=string-and-character-literals>String and character literals <a class=text-decoration-none href=#string-and-character-literals>#</a></h3><p>String literals are enclosed in double quotes and character literals in single quotes. Special characters are escaped with a backslash <code>\</code>.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span><span style=color:#e6db74>&#34;This is a string&#34;</span>
</span></span><span style=display:flex><span><span style=color:#e6db74>&#39;A&#39;</span>
</span></span><span style=display:flex><span><span style=color:#e6db74>&#39;\n&#39;</span> <span style=color:#75715e>// newline character
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#e6db74>&#34;C:\\Windows\\notepad.exe&#34;</span>
</span></span></code></pre></div><p>Raw string literals are enclosed in single back ticks.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span><span style=color:#e6db74>`C:\Windows\notepad.exe`</span>
</span></span></code></pre></div><p>The length of a string can be found using the built-in <a href=https://pkg.odin-lang.org/base/builtin/#len><code>len</code></a> proc:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span><span style=color:#66d9ef>len</span>(<span style=color:#e6db74>&#34;Foo&#34;</span>)
</span></span><span style=display:flex><span><span style=color:#66d9ef>len</span>(some_string)
</span></span></code></pre></div><p>If the string passed to <a href=https://pkg.odin-lang.org/base/builtin/#len><code>len</code></a> is a compile-time constant, the value from <a href=https://pkg.odin-lang.org/base/builtin/#len><code>len</code></a> will be a compile-time constant.</p><h4 id=escape-characters>Escape Characters <a class=text-decoration-none href=#escape-characters>#</a></h4><ul><li><code>\a</code> - bell (BEL)</li><li><code>\b</code> - backspace (BS)</li><li><code>\e</code> - escape (ESC)</li><li><code>\f</code> - form feed (FF)</li><li><code>\n</code> - newline</li><li><code>\r</code> - carriage return</li><li><code>\t</code> - tab</li><li><code>\v</code> - vertical tab (VT)</li><li><code>\\</code> - backslash</li><li><code>\"</code> - double quote (if needed)</li><li><code>\'</code> - single quote (if needed)</li><li><code>\NNN</code>- octal 6 bit character (3 digits)</li><li><code>\xNN</code> - hexadecimal 8 bit character (2 digits)</li><li><code>\uNNNN</code> - hexadecimal 16-bit Unicode character UTF-8 encoded (4 digits)</li><li><code>\UNNNNNNNN</code> - hexadecimal 32-bit Unicode character UTF-8 encoded (8 digits)</li></ul><h3 id=numbers>Numbers <a class=text-decoration-none href=#numbers>#</a></h3><p>Numerical literals are written similar to most other programming languages. A useful feature in Odin is that underscores are allowed for better readability: <code>1_000_000_000</code> (one billion). A number that contains a dot is a floating point literal: <code>1.0e9</code> (one billion). If a number literal is suffixed with <code>i</code>, it is an imaginary number literal: <code>2i</code> (2 multiply the square root of -1).</p><p>Binary literals are prefixed with <code>0b</code>, octal literals with <code>0o</code>, and hexadecimal literals with <code>0x</code>. A leading zero does not produce an octal constant (unlike C).</p><p>In Odin, if a number constant can be represented by a type without precision loss, it will automatically convert to that type.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span>x<span style=color:#f92672>:</span> <span style=color:#66d9ef>int</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>1</span><span style=color:#ae81ff>.0</span> <span style=color:#75715e>// A float literal but it can be represented by an integer without precision loss
</span></span></span></code></pre></div><p>Constant literals are &ldquo;untyped&rdquo; which means that they can implicitly convert to a type.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span>x<span style=color:#f92672>:</span> <span style=color:#66d9ef>int</span> <span style=color:#75715e>// `x` is typed as being of type `int`
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>x <span style=color:#f92672>=</span> <span style=color:#a6e22e>1</span> <span style=color:#75715e>// `1` is an untyped integer literal which can implicitly convert to `int`
</span></span></span></code></pre></div><h2 id=comments>Comments <a class=text-decoration-none href=#comments>#</a></h2><p>Comments can be anywhere outside of a string or character literal. Single line comments begin with <code>//</code>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span><span style=color:#75715e>// A comment
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>my_integer_variable<span style=color:#f92672>:</span> <span style=color:#66d9ef>int</span> <span style=color:#75715e>// A comment for documentation
</span></span></span></code></pre></div><p>Multi-line comments begin with <code>/*</code> and end with <code>*/</code>. Multi-line comments can be also be nested (unlike in C):</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span><span style=color:#75715e>/*
</span></span></span><span style=display:flex><span><span style=color:#75715e>	You can have any text or code here and
</span></span></span><span style=display:flex><span><span style=color:#75715e>	have it be commented.
</span></span></span><span style=display:flex><span><span style=color:#75715e>	/*
</span></span></span><span style=display:flex><span><span style=color:#75715e>		NOTE: comments can be nested!
</span></span></span><span style=display:flex><span><span style=color:#75715e>	*/
</span></span></span><span style=display:flex><span><span style=color:#75715e>*/</span>
</span></span></code></pre></div><p>Comments are parsed as tokens within the compiler. This is to allow for future work on automatic documentation tools.</p><h2 id=constant-declarations>Constant declarations <a class=text-decoration-none href=#constant-declarations>#</a></h2><p>Constants are entities (symbols) which have an assigned value. The constant&rsquo;s value cannot be changed. The constant&rsquo;s value must be able to be evaluated at compile time:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span>x <span style=color:#f92672>::</span> <span style=color:#e6db74>&#34;what&#34;</span> <span style=color:#75715e>// constant `x` has the untyped string value &#34;what&#34;
</span></span></span></code></pre></div><p>Constants can be explicitly typed like a variable declaration:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span>y <span style=color:#f92672>:</span> <span style=color:#66d9ef>int</span> <span style=color:#f92672>:</span> <span style=color:#a6e22e>123</span>
</span></span><span style=display:flex><span>z <span style=color:#f92672>::</span> y <span style=color:#f92672>+</span> <span style=color:#a6e22e>7</span> <span style=color:#75715e>// constant computations are possible
</span></span></span></code></pre></div><p>For more information regarding value declarations in general, please see the <a href=/docs/faq>Odin FAQ</a> and Ginger Bill&rsquo;s article <a href=https://www.gingerbill.org/article/2018/03/12/on-the-aesthetics-of-the-syntax-of-declarations/>On the Aesthetics of the Syntax of Declarations</a>.</p><h2 id=packages>Packages <a class=text-decoration-none href=#packages>#</a></h2><p>Odin programs consist of packages. A package is a directory of Odin code files, all of which have the same package declaration at the top. Execution starts in the package&rsquo;s <code>main</code> procedure.</p><h3 id=import-statement><code>import</code> statement <a class=text-decoration-none href=#import-statement>#</a></h3><p>The following program imports the <code>fmt</code> and <code>os</code> packages from the <code>core</code> library collection.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span><span style=color:#f92672>package</span> main
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> <span style=color:#e6db74>&#34;core:fmt&#34;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> <span style=color:#e6db74>&#34;core:os&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>main <span style=color:#f92672>::</span> <span style=color:#66d9ef>proc</span>() {
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>The <code>core:</code> prefix is used to state where the import is meant to look; this is called a library collection. If no prefix is present, the import will look relative to the current file.</p><p><strong>Note</strong>: By convention, the package name is the same as the last element in the import path. <code>"core:fmt"</code> package comprises of files that begin with the statement <code>package fmt</code>. However, this is not enforced by the compiler, which means the default name for the import name will be determined by the last element in the import path if possible.</p><p>A different import name can be used over the default package name:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span><span style=color:#f92672>import</span> <span style=color:#e6db74>&#34;core:fmt&#34;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> foo <span style=color:#e6db74>&#34;core:fmt&#34;</span> <span style=color:#75715e>// reference a package by a different name
</span></span></span></code></pre></div><h3 id=exported-names>Exported names <a class=text-decoration-none href=#exported-names>#</a></h3><p>All declarations in a package are public by default.</p><p>The <code>private</code> attribute can be applied to an entity to prevent it from being exported from a package.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span><span style=color:#a6e22e>@(private)</span>
</span></span><span style=display:flex><span>my_variable<span style=color:#f92672>:</span> <span style=color:#66d9ef>int</span> <span style=color:#75715e>// cannot be accessed outside this package
</span></span></span></code></pre></div><p>You may also make an entity private to <em>the file</em> instead of the package.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span><span style=color:#a6e22e>@(private=&#34;file&#34;)</span>
</span></span><span style=display:flex><span>my_variable<span style=color:#f92672>:</span> <span style=color:#66d9ef>int</span> <span style=color:#75715e>// cannot be accessed outside this file
</span></span></span></code></pre></div><p><code>@(private)</code> is equivalent to <code>@(private="package")</code>.</p><h3 id=authoring-a-package>Authoring a package <a class=text-decoration-none href=#authoring-a-package>#</a></h3><p>A package is a directory of Odin code files, all of which have the same package declaration at the top, e.g. <code>package main</code>. Each .odin file <em>must</em> have the same package name. A directory cannot contain more than 1 package.</p><h3 id=organizing-packages>Organizing packages <a class=text-decoration-none href=#organizing-packages>#</a></h3><p>Packages may be thematically organized by placing them in subdirectories of another package. For example: <code>core:image/png</code> and <code>core:image/tga</code>, as subdirectories of <code>core:image</code>.
Nesting these packages is a helpful taxonomy. It does not imply a dependency: <code>core:foo/bar</code> does not need to import <code>core:foo</code> and reference anything from it.</p><h2 id=control-flow-statements>Control flow statements <a class=text-decoration-none href=#control-flow-statements>#</a></h2><h3 id=for-statement><code>for</code> statement <a class=text-decoration-none href=#for-statement>#</a></h3><p>Odin has only one loop statement, the <code>for</code> loop.</p><h4 id=basic-for-loop>Basic for loop <a class=text-decoration-none href=#basic-for-loop>#</a></h4><p>A basic <code>for</code> loop has three components separated by semicolons:</p><ul><li>The initial statement: executed before the first iteration</li><li>The condition expression: evaluated before every iteration</li><li>The post statement: executed at the end of every iteration</li></ul><p>The loop will stop executing when the condition is evaluated to <code>false</code>.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span><span style=color:#66d9ef>for</span> i <span style=color:#f92672>:=</span> <span style=color:#a6e22e>0</span>; i <span style=color:#f92672>&lt;</span> <span style=color:#a6e22e>10</span>; i <span style=color:#f92672>+=</span> <span style=color:#a6e22e>1</span> {
</span></span><span style=display:flex><span>	fmt.println(i)
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p><strong>Note:</strong> Unlike other languages like C, there are no parentheses <code>( )</code> surrounding the three components. Braces <code>{ }</code> or a <code>do</code> are always required.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span><span style=color:#66d9ef>for</span> i <span style=color:#f92672>:=</span> <span style=color:#a6e22e>0</span>; i <span style=color:#f92672>&lt;</span> <span style=color:#a6e22e>10</span>; i <span style=color:#f92672>+=</span> <span style=color:#a6e22e>1</span> { }
</span></span><span style=display:flex><span><span style=color:#66d9ef>for</span> i <span style=color:#f92672>:=</span> <span style=color:#a6e22e>0</span>; i <span style=color:#f92672>&lt;</span> <span style=color:#a6e22e>10</span>; i <span style=color:#f92672>+=</span> <span style=color:#a6e22e>1</span> <span style=color:#66d9ef>do</span> single_statement()
</span></span></code></pre></div><p>The initial and post statements are optional:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span>i <span style=color:#f92672>:=</span> <span style=color:#a6e22e>0</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>for</span> ; i <span style=color:#f92672>&lt;</span> <span style=color:#a6e22e>10</span>; {
</span></span><span style=display:flex><span>	i <span style=color:#f92672>+=</span> <span style=color:#a6e22e>1</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>These semicolons can be dropped. This <code>for</code> loop is equivalent to C&rsquo;s <code>while</code> loop:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span>i <span style=color:#f92672>:=</span> <span style=color:#a6e22e>0</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>for</span> i <span style=color:#f92672>&lt;</span> <span style=color:#a6e22e>10</span> {
</span></span><span style=display:flex><span>	i <span style=color:#f92672>+=</span> <span style=color:#a6e22e>1</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>If the condition is omitted, this produces an infinite loop:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span><span style=color:#66d9ef>for</span> {
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h4 id=range-based-for-loop>Range-based for loop <a class=text-decoration-none href=#range-based-for-loop>#</a></h4><p>The basic for loop</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span><span style=color:#66d9ef>for</span> i <span style=color:#f92672>:=</span> <span style=color:#a6e22e>0</span>; i <span style=color:#f92672>&lt;</span> <span style=color:#a6e22e>10</span>; i <span style=color:#f92672>+=</span> <span style=color:#a6e22e>1</span> {
</span></span><span style=display:flex><span>	fmt.println(i)
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>can also be written</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span><span style=color:#66d9ef>for</span> i <span style=color:#66d9ef>in</span> <span style=color:#a6e22e>0</span><span style=color:#f92672>..&lt;</span><span style=color:#a6e22e>10</span> {
</span></span><span style=display:flex><span>	fmt.println(i)
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span><span style=color:#75715e>// or
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>for</span> i <span style=color:#66d9ef>in</span> <span style=color:#a6e22e>0</span><span style=color:#f92672>..=</span><span style=color:#a6e22e>9</span> {
</span></span><span style=display:flex><span>	fmt.println(i)
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>where <code>a..=b</code> denotes a closed interval <code>[a,b]</code>, i.e. the upper limit is <em>inclusive</em>, and <code>a..&lt;b</code> denotes a half-open interval <code>[a,b)</code>, i.e. the upper limit is <em>exclusive</em>.</p><p>Certain built-in types can be iterated over:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span>some_string <span style=color:#f92672>:=</span> <span style=color:#e6db74>&#34;Hello, 世界&#34;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>for</span> character <span style=color:#66d9ef>in</span> some_string {
</span></span><span style=display:flex><span>	fmt.println(character)
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>some_array <span style=color:#f92672>:=</span> [<span style=color:#a6e22e>3</span>]<span style=color:#66d9ef>int</span>{<span style=color:#a6e22e>1</span>, <span style=color:#a6e22e>4</span>, <span style=color:#a6e22e>9</span>}
</span></span><span style=display:flex><span><span style=color:#66d9ef>for</span> value <span style=color:#66d9ef>in</span> some_array {
</span></span><span style=display:flex><span>	fmt.println(value)
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>some_slice <span style=color:#f92672>:=</span> []<span style=color:#66d9ef>int</span>{<span style=color:#a6e22e>1</span>, <span style=color:#a6e22e>4</span>, <span style=color:#a6e22e>9</span>}
</span></span><span style=display:flex><span><span style=color:#66d9ef>for</span> value <span style=color:#66d9ef>in</span> some_slice {
</span></span><span style=display:flex><span>	fmt.println(value)
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>some_dynamic_array <span style=color:#f92672>:=</span> [<span style=color:#66d9ef>dynamic</span>]<span style=color:#66d9ef>int</span>{<span style=color:#a6e22e>1</span>, <span style=color:#a6e22e>4</span>, <span style=color:#a6e22e>9</span>} <span style=color:#75715e>// must be enabled with `#+feature dynamic-literals`
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>defer</span> <span style=color:#66d9ef>delete</span>(some_dynamic_array)
</span></span><span style=display:flex><span><span style=color:#66d9ef>for</span> value <span style=color:#66d9ef>in</span> some_dynamic_array {
</span></span><span style=display:flex><span>	fmt.println(value)
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>some_map <span style=color:#f92672>:=</span> <span style=color:#66d9ef>map</span>[<span style=color:#66d9ef>string</span>]<span style=color:#66d9ef>int</span>{<span style=color:#e6db74>&#34;A&#34;</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>1</span>, <span style=color:#e6db74>&#34;C&#34;</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>9</span>, <span style=color:#e6db74>&#34;B&#34;</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>4</span>} <span style=color:#75715e>// must be enabled with `#+feature dynamic-literals`
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>defer</span> <span style=color:#66d9ef>delete</span>(some_map)
</span></span><span style=display:flex><span><span style=color:#66d9ef>for</span> key <span style=color:#66d9ef>in</span> some_map {
</span></span><span style=display:flex><span>	fmt.println(key)
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>Alternatively a second index value can be added:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span><span style=color:#66d9ef>for</span> character, index <span style=color:#66d9ef>in</span> some_string {
</span></span><span style=display:flex><span>	fmt.println(index, character)
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span><span style=color:#66d9ef>for</span> value, index <span style=color:#66d9ef>in</span> some_array {
</span></span><span style=display:flex><span>	fmt.println(index, value)
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span><span style=color:#66d9ef>for</span> value, index <span style=color:#66d9ef>in</span> some_slice {
</span></span><span style=display:flex><span>	fmt.println(index, value)
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span><span style=color:#66d9ef>for</span> value, index <span style=color:#66d9ef>in</span> some_dynamic_array {
</span></span><span style=display:flex><span>	fmt.println(index, value)
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span><span style=color:#66d9ef>for</span> key, value <span style=color:#66d9ef>in</span> some_map {
</span></span><span style=display:flex><span>	fmt.println(key, value)
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>The iterated values are <em>copies</em> and cannot be written to.</p><p>When iterating a string, the characters will be <code>rune</code>s and not bytes. <code>for in</code> assumes the string is encoded as UTF-8.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span>str<span style=color:#f92672>:</span> <span style=color:#66d9ef>string</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;Some text&#34;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>for</span> character <span style=color:#66d9ef>in</span> str {
</span></span><span style=display:flex><span>	assert(type_of(character) <span style=color:#f92672>==</span> <span style=color:#66d9ef>rune</span>)
</span></span><span style=display:flex><span>	fmt.println(character)
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>You can iterate arrays and slices by-reference with the <a href=#address-operator>address operator</a>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span><span style=color:#66d9ef>for</span> <span style=color:#f92672>&amp;</span>value <span style=color:#66d9ef>in</span> some_array {
</span></span><span style=display:flex><span>	value <span style=color:#f92672>=</span> something
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span><span style=color:#66d9ef>for</span> <span style=color:#f92672>&amp;</span>value <span style=color:#66d9ef>in</span> some_slice {
</span></span><span style=display:flex><span>	value <span style=color:#f92672>=</span> something
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span><span style=color:#66d9ef>for</span> <span style=color:#f92672>&amp;</span>value <span style=color:#66d9ef>in</span> some_dynamic_array {
</span></span><span style=display:flex><span>	value <span style=color:#f92672>=</span> something
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span><span style=color:#75715e>// does not impact the second index value
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>for</span> <span style=color:#f92672>&amp;</span>value, index <span style=color:#66d9ef>in</span> some_dynamic_array {
</span></span><span style=display:flex><span>	value <span style=color:#f92672>=</span> something
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>Map values can be iterated by-reference, but their keys cannot since map keys are immutable:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span>some_map <span style=color:#f92672>:=</span> <span style=color:#66d9ef>map</span>[<span style=color:#66d9ef>string</span>]<span style=color:#66d9ef>int</span>{<span style=color:#e6db74>&#34;A&#34;</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>1</span>, <span style=color:#e6db74>&#34;C&#34;</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>9</span>, <span style=color:#e6db74>&#34;B&#34;</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>4</span>} <span style=color:#75715e>// must be enabled with `#+feature dynamic-literals`
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>defer</span> <span style=color:#66d9ef>delete</span>(some_map)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>for</span> key, <span style=color:#f92672>&amp;</span>value <span style=color:#66d9ef>in</span> some_map {
</span></span><span style=display:flex><span>	value <span style=color:#f92672>+=</span> <span style=color:#a6e22e>1</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>fmt.println(some_map[<span style=color:#e6db74>&#34;A&#34;</span>]) <span style=color:#75715e>// 2
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>fmt.println(some_map[<span style=color:#e6db74>&#34;C&#34;</span>]) <span style=color:#75715e>// 10
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>fmt.println(some_map[<span style=color:#e6db74>&#34;B&#34;</span>]) <span style=color:#75715e>// 5
</span></span></span></code></pre></div><p><strong>Note:</strong> It is not possible to iterate a string in a by-reference manner as strings are immutable.</p><h4 id=for-reverse-iteration><code>for</code> reverse iteration <a class=text-decoration-none href=#for-reverse-iteration>#</a></h4><p>The <code>#reverse</code> directive makes a range-based <code>for</code> loop iterate in reverse.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span>array <span style=color:#f92672>:=</span> [<span style=color:#960050;background-color:#1e0010>?</span>]<span style=color:#66d9ef>int</span> { <span style=color:#a6e22e>10</span>, <span style=color:#a6e22e>20</span>, <span style=color:#a6e22e>30</span>, <span style=color:#a6e22e>40</span>, <span style=color:#a6e22e>50</span> }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>#reverse</span> <span style=color:#66d9ef>for</span> x <span style=color:#66d9ef>in</span> array {
</span></span><span style=display:flex><span>	fmt.println(x) <span style=color:#75715e>// 50 40 30 20 10
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>}
</span></span></code></pre></div><h4 id=for-loop-unrolling><code>for</code> loop unrolling <a class=text-decoration-none href=#for-loop-unrolling>#</a></h4><p>The <code>#unroll</code> directive takes a <code>for</code> loop and expands it at compile-time to the individual statements, repeated for as many times as the loop would normally iterate. This may result in performance improvements or provides the ability to repeat a set of instructions a limited number of times without explicitly writing each out in repetition.</p><p>Please note that <code>#unroll</code> may only be used with ranged <code>for</code> loops that have constant intervals known at compile-time.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span>x<span style=color:#f92672>:</span> [<span style=color:#a6e22e>4</span>]<span style=color:#66d9ef>u8</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>0xFF</span>
</span></span><span style=display:flex><span>y<span style=color:#f92672>:</span> [<span style=color:#a6e22e>4</span>]<span style=color:#66d9ef>u8</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>0x88</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>#unroll</span> <span style=color:#66d9ef>for</span> i <span style=color:#66d9ef>in</span> <span style=color:#a6e22e>0</span><span style=color:#f92672>..&lt;</span><span style=color:#66d9ef>len</span>(x) {
</span></span><span style=display:flex><span>	x[i] <span style=color:#960050;background-color:#1e0010>~</span><span style=color:#f92672>=</span> y[i]
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h3 id=if-statement><code>if</code> statement <a class=text-decoration-none href=#if-statement>#</a></h3><p>Odin&rsquo;s <code>if</code> statements do not need to be surrounded by parentheses <code>( )</code> but braces <code>{ }</code> or <code>do</code> are required.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span><span style=color:#66d9ef>if</span> x <span style=color:#f92672>&gt;=</span> <span style=color:#a6e22e>0</span> {
</span></span><span style=display:flex><span>	fmt.println(<span style=color:#e6db74>&#34;x is positive&#34;</span>)
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>Like <code>for</code>, the <code>if</code> statement can start with an initial statement to execute before the condition. Variables declared by the initial statement are only in the scope of that <code>if</code> statement.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span><span style=color:#66d9ef>if</span> x <span style=color:#f92672>:=</span> foo(); x <span style=color:#f92672>&lt;</span> <span style=color:#a6e22e>0</span> {
</span></span><span style=display:flex><span>	fmt.println(<span style=color:#e6db74>&#34;x is negative&#34;</span>)
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>Variables declared inside an <code>if</code> initial statement are also available to any of the <code>else</code> blocks:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span><span style=color:#66d9ef>if</span> x <span style=color:#f92672>:=</span> foo(); x <span style=color:#f92672>&lt;</span> <span style=color:#a6e22e>0</span> {
</span></span><span style=display:flex><span>	fmt.println(<span style=color:#e6db74>&#34;x is negative&#34;</span>)
</span></span><span style=display:flex><span>} <span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span> x <span style=color:#f92672>==</span> <span style=color:#a6e22e>0</span> {
</span></span><span style=display:flex><span>	fmt.println(<span style=color:#e6db74>&#34;x is zero&#34;</span>)
</span></span><span style=display:flex><span>} <span style=color:#66d9ef>else</span> {
</span></span><span style=display:flex><span>	fmt.println(<span style=color:#e6db74>&#34;x is positive&#34;</span>)
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h3 id=switch-statement><code>switch</code> statement <a class=text-decoration-none href=#switch-statement>#</a></h3><p>A switch statement is another way to write a sequence of if-else statements. In Odin, the default case is denoted as a case without any expression.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span><span style=color:#66d9ef>switch</span> arch <span style=color:#f92672>:=</span> ODIN_ARCH; arch {
</span></span><span style=display:flex><span><span style=color:#66d9ef>case</span> .i386, .wasm32, .arm32<span style=color:#f92672>:</span>
</span></span><span style=display:flex><span>	fmt.println(<span style=color:#e6db74>&#34;32 bit&#34;</span>)
</span></span><span style=display:flex><span><span style=color:#66d9ef>case</span> .amd64, .wasm64p32, .arm64, .riscv64<span style=color:#f92672>:</span>
</span></span><span style=display:flex><span>	fmt.println(<span style=color:#e6db74>&#34;64 bit&#34;</span>)
</span></span><span style=display:flex><span><span style=color:#66d9ef>case</span> .Unknown<span style=color:#f92672>:</span>
</span></span><span style=display:flex><span>	fmt.println(<span style=color:#e6db74>&#34;Unknown architecture&#34;</span>)
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>Odin&rsquo;s <code>switch</code> is like the one in C or C++, except that Odin only runs the selected case. This means that a <code>break</code> statement is not needed at the end of each case. Another important difference is that the case values need not be integers nor constants.</p><p>To achieve a C-like fall through into the next case block, the keyword <a href=#fallthrough-statement><code>fallthrough</code></a> can be used.</p><p>Switch cases are evaluated from top to bottom, stopping when a case succeeds. For example:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span><span style=color:#66d9ef>switch</span> i {
</span></span><span style=display:flex><span><span style=color:#66d9ef>case</span> <span style=color:#a6e22e>0</span><span style=color:#f92672>:</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>case</span> foo()<span style=color:#f92672>:</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p><code>foo()</code> does not get called if <code>i==0</code>. If all the case values are constants, the compiler may optimize the switch statement into a jump table (like C).</p><p>A <code>switch</code> statement without a condition is the same as <code>switch true</code>. This can be used to write a clean and long if-else chain and have the ability to <a href=#fallthrough-statement><code>break</code></a> if needed</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span><span style=color:#66d9ef>switch</span> {
</span></span><span style=display:flex><span><span style=color:#66d9ef>case</span> x <span style=color:#f92672>&lt;</span> <span style=color:#a6e22e>0</span><span style=color:#f92672>:</span>
</span></span><span style=display:flex><span>	fmt.println(<span style=color:#e6db74>&#34;x is negative&#34;</span>)
</span></span><span style=display:flex><span><span style=color:#66d9ef>case</span> x <span style=color:#f92672>==</span> <span style=color:#a6e22e>0</span><span style=color:#f92672>:</span>
</span></span><span style=display:flex><span>	fmt.println(<span style=color:#e6db74>&#34;x is zero&#34;</span>)
</span></span><span style=display:flex><span><span style=color:#66d9ef>case</span><span style=color:#f92672>:</span>
</span></span><span style=display:flex><span>	fmt.println(<span style=color:#e6db74>&#34;x is positive&#34;</span>)
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>A <code>switch</code> statement can also use ranges like a range-based loop:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span><span style=color:#66d9ef>switch</span> c {
</span></span><span style=display:flex><span><span style=color:#66d9ef>case</span> <span style=color:#e6db74>&#39;A&#39;</span><span style=color:#f92672>..=</span><span style=color:#e6db74>&#39;Z&#39;</span>, <span style=color:#e6db74>&#39;a&#39;</span><span style=color:#f92672>..=</span><span style=color:#e6db74>&#39;z&#39;</span>, <span style=color:#e6db74>&#39;0&#39;</span><span style=color:#f92672>..=</span><span style=color:#e6db74>&#39;9&#39;</span><span style=color:#f92672>:</span>
</span></span><span style=display:flex><span>	fmt.println(<span style=color:#e6db74>&#34;c is alphanumeric&#34;</span>)
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>switch</span> x {
</span></span><span style=display:flex><span><span style=color:#66d9ef>case</span> <span style=color:#a6e22e>0</span><span style=color:#f92672>..&lt;</span><span style=color:#a6e22e>10</span><span style=color:#f92672>:</span>
</span></span><span style=display:flex><span>	fmt.println(<span style=color:#e6db74>&#34;units&#34;</span>)
</span></span><span style=display:flex><span><span style=color:#66d9ef>case</span> <span style=color:#a6e22e>10</span><span style=color:#f92672>..&lt;</span><span style=color:#a6e22e>13</span><span style=color:#f92672>:</span>
</span></span><span style=display:flex><span>	fmt.println(<span style=color:#e6db74>&#34;pre-teens&#34;</span>)
</span></span><span style=display:flex><span><span style=color:#66d9ef>case</span> <span style=color:#a6e22e>13</span><span style=color:#f92672>..&lt;</span><span style=color:#a6e22e>20</span><span style=color:#f92672>:</span>
</span></span><span style=display:flex><span>	fmt.println(<span style=color:#e6db74>&#34;teens&#34;</span>)
</span></span><span style=display:flex><span><span style=color:#66d9ef>case</span> <span style=color:#a6e22e>20</span><span style=color:#f92672>..&lt;</span><span style=color:#a6e22e>30</span><span style=color:#f92672>:</span>
</span></span><span style=display:flex><span>	fmt.println(<span style=color:#e6db74>&#34;twenties&#34;</span>)
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h4 id=partial-switch><code>#partial switch</code> <a class=text-decoration-none href=#partial-switch>#</a></h4><p>With <code>enum</code> values:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span>Foo <span style=color:#f92672>::</span> <span style=color:#66d9ef>enum</span> {
</span></span><span style=display:flex><span>	A,
</span></span><span style=display:flex><span>	B,
</span></span><span style=display:flex><span>	C,
</span></span><span style=display:flex><span>	D,
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>f <span style=color:#f92672>:=</span> Foo.A
</span></span><span style=display:flex><span><span style=color:#66d9ef>switch</span> f {
</span></span><span style=display:flex><span><span style=color:#66d9ef>case</span> .A<span style=color:#f92672>:</span> fmt.println(<span style=color:#e6db74>&#34;A&#34;</span>)
</span></span><span style=display:flex><span><span style=color:#66d9ef>case</span> .B<span style=color:#f92672>:</span> fmt.println(<span style=color:#e6db74>&#34;B&#34;</span>)
</span></span><span style=display:flex><span><span style=color:#66d9ef>case</span> .C<span style=color:#f92672>:</span> fmt.println(<span style=color:#e6db74>&#34;C&#34;</span>)
</span></span><span style=display:flex><span><span style=color:#66d9ef>case</span> .D<span style=color:#f92672>:</span> fmt.println(<span style=color:#e6db74>&#34;D&#34;</span>)
</span></span><span style=display:flex><span><span style=color:#66d9ef>case</span><span style=color:#f92672>:</span>    fmt.println(<span style=color:#e6db74>&#34;?&#34;</span>)
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>#partial</span> <span style=color:#66d9ef>switch</span> f {
</span></span><span style=display:flex><span><span style=color:#66d9ef>case</span> .A<span style=color:#f92672>:</span> fmt.println(<span style=color:#e6db74>&#34;A&#34;</span>)
</span></span><span style=display:flex><span><span style=color:#66d9ef>case</span> .D<span style=color:#f92672>:</span> fmt.println(<span style=color:#e6db74>&#34;D&#34;</span>)
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>With <code>union</code> types (see <a href=#type-switch-statement>Type switch statement</a>)</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span>Foo <span style=color:#f92672>::</span> <span style=color:#66d9ef>union</span> {<span style=color:#66d9ef>int</span>, <span style=color:#66d9ef>bool</span>}
</span></span><span style=display:flex><span>f<span style=color:#f92672>:</span> Foo <span style=color:#f92672>=</span> <span style=color:#a6e22e>123</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>switch</span> _ <span style=color:#66d9ef>in</span> f {
</span></span><span style=display:flex><span><span style=color:#66d9ef>case</span> <span style=color:#66d9ef>int</span><span style=color:#f92672>:</span>  fmt.println(<span style=color:#e6db74>&#34;int&#34;</span>)
</span></span><span style=display:flex><span><span style=color:#66d9ef>case</span> <span style=color:#66d9ef>bool</span><span style=color:#f92672>:</span> fmt.println(<span style=color:#e6db74>&#34;bool&#34;</span>)
</span></span><span style=display:flex><span><span style=color:#66d9ef>case</span><span style=color:#f92672>:</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>#partial</span> <span style=color:#66d9ef>switch</span> _ <span style=color:#66d9ef>in</span> f {
</span></span><span style=display:flex><span><span style=color:#66d9ef>case</span> <span style=color:#66d9ef>bool</span><span style=color:#f92672>:</span> fmt.println(<span style=color:#e6db74>&#34;bool&#34;</span>)
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h3 id=defer-statement><code>defer</code> statement <a class=text-decoration-none href=#defer-statement>#</a></h3><p>A defer statement defers the execution of a statement until the end of the scope it is in.</p><p>The following will print <code>4</code> then <code>234</code>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span><span style=color:#f92672>package</span> main
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> <span style=color:#e6db74>&#34;core:fmt&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>main <span style=color:#f92672>::</span> <span style=color:#66d9ef>proc</span>() {
</span></span><span style=display:flex><span>	x <span style=color:#f92672>:=</span> <span style=color:#a6e22e>123</span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>defer</span> fmt.println(x)
</span></span><span style=display:flex><span>	{
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>defer</span> x <span style=color:#f92672>=</span> <span style=color:#a6e22e>4</span>
</span></span><span style=display:flex><span>		x <span style=color:#f92672>=</span> <span style=color:#a6e22e>2</span>
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>	fmt.println(x)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	x <span style=color:#f92672>=</span> <span style=color:#a6e22e>234</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>You can defer an entire block too:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span>{
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>defer</span> {
</span></span><span style=display:flex><span>		foo()
</span></span><span style=display:flex><span>		bar()
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>	<span style=color:#75715e>// This is equivalent to `defer { if cond { bar() } }` because the `if` is
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>	<span style=color:#75715e>// a statement in its own right.
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>	<span style=color:#66d9ef>defer</span> <span style=color:#66d9ef>if</span> cond {
</span></span><span style=display:flex><span>		bar()
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>Defer statements are executed in the reverse order that they were declared:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span><span style=color:#66d9ef>defer</span> fmt.println(<span style=color:#e6db74>&#34;1&#34;</span>)
</span></span><span style=display:flex><span><span style=color:#66d9ef>defer</span> fmt.println(<span style=color:#e6db74>&#34;2&#34;</span>)
</span></span><span style=display:flex><span><span style=color:#66d9ef>defer</span> fmt.println(<span style=color:#e6db74>&#34;3&#34;</span>)
</span></span></code></pre></div><p>Will print <code>3</code>, <code>2</code>, and then <code>1</code>.</p><p>A real world use case for <code>defer</code> may be something like the following:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span>f, err <span style=color:#f92672>:=</span> os.open(<span style=color:#e6db74>&#34;my_file.txt&#34;</span>)
</span></span><span style=display:flex><span><span style=color:#66d9ef>if</span> err <span style=color:#f92672>!=</span> os.ERROR_NONE {
</span></span><span style=display:flex><span>	<span style=color:#75715e>// handle error
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>}
</span></span><span style=display:flex><span><span style=color:#66d9ef>defer</span> os.close(f)
</span></span><span style=display:flex><span><span style=color:#75715e>// rest of code
</span></span></span></code></pre></div><p>In this case, it acts akin to an explicit C++ destructor however, the error handling is basic control flow.</p><p>It&rsquo;s important to note that <code>defer</code> cannot be used to change a procedure&rsquo;s named return values, as it runs after exit when the values have already been returned.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span>foo <span style=color:#f92672>::</span> <span style=color:#66d9ef>proc</span>() <span style=color:#f92672>-&gt;</span> (n<span style=color:#f92672>:</span> <span style=color:#66d9ef>int</span>) {
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>defer</span> {
</span></span><span style=display:flex><span>		n <span style=color:#f92672>=</span> <span style=color:#a6e22e>456</span> <span style=color:#75715e>// This won&#39;t affect `n`
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>	}
</span></span><span style=display:flex><span>	n <span style=color:#f92672>=</span> <span style=color:#a6e22e>123</span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>return</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p><strong>Note:</strong> The <code>defer</code> construct in Odin differs from Go&rsquo;s <code>defer</code>, which is function-exit and relies on a closure stack system.</p><h3 id=when-statement><code>when</code> statement <a class=text-decoration-none href=#when-statement>#</a></h3><p>The <code>when</code> statement is almost identical to the <code>if</code> statement but with some differences:</p><ul><li>Each condition must be a constant expression as a <code>when</code> statement is evaluated at compile time.</li><li>The statements within a branch do not create a new scope</li><li>The compiler checks the semantics and code <strong>only</strong> for statements that belong to the first condition that is <code>true</code></li><li>An initial statement is not allowed in a <code>when</code> statement</li><li><code>when</code> statements are allowed at file scope</li></ul><p>Example:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span><span style=color:#66d9ef>when</span> ODIN_ARCH <span style=color:#f92672>==</span> .i386 {
</span></span><span style=display:flex><span>	fmt.println(<span style=color:#e6db74>&#34;32 bit&#34;</span>)
</span></span><span style=display:flex><span>} <span style=color:#66d9ef>else</span> <span style=color:#66d9ef>when</span> ODIN_ARCH <span style=color:#f92672>==</span> .amd64 {
</span></span><span style=display:flex><span>	fmt.println(<span style=color:#e6db74>&#34;64 bit&#34;</span>)
</span></span><span style=display:flex><span>} <span style=color:#66d9ef>else</span> {
</span></span><span style=display:flex><span>	fmt.println(<span style=color:#e6db74>&#34;Unsupported architecture&#34;</span>)
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>The <code>when</code> statement is very useful for writing platform specific code. This is akin to the <code>#if</code> construct in C&rsquo;s preprocessor. However, in Odin, it is type checked.</p><p>See the <a href=#when-statements>Conditional compilation section</a> for examples of built-in constants you can use with <code>when</code> statements.</p><h3 id=branch-statements>Branch statements <a class=text-decoration-none href=#branch-statements>#</a></h3><h4 id=break-statement><code>break</code> statement <a class=text-decoration-none href=#break-statement>#</a></h4><p>A for loop, conditional, or a switch statement can be left prematurely with a <code>break</code> statement. It leaves the innermost construct, unless a label of a construct is given:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span><span style=color:#66d9ef>for</span> cond {
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>switch</span> {
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>case</span><span style=color:#f92672>:</span>
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>if</span> cond {
</span></span><span style=display:flex><span>			<span style=color:#66d9ef>break</span> <span style=color:#75715e>// break out of the `switch` statement
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>		}
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>break</span> <span style=color:#75715e>// break out of the `for` statement
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>loop<span style=color:#f92672>:</span> <span style=color:#66d9ef>for</span> cond1 {
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>for</span> cond2 {
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>break</span> loop <span style=color:#75715e>// leaves both loops
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>	}
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>outer<span style=color:#f92672>:</span> <span style=color:#66d9ef>if</span> cond {
</span></span><span style=display:flex><span>	ok <span style=color:#f92672>:=</span> check_something()
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>if</span> <span style=color:#960050;background-color:#1e0010>!</span>ok {
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>break</span> outer <span style=color:#75715e>// label names are required with conditionals
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>	}
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>exit<span style=color:#f92672>:</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> <span style=color:#66d9ef>true</span> {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>break</span> exit <span style=color:#75715e>// works with labeled blocks too
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    }
</span></span><span style=display:flex><span>    fmt.println(<span style=color:#e6db74>&#34;This line will never print.&#34;</span>)
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h4 id=continue-statement><code>continue</code> statement <a class=text-decoration-none href=#continue-statement>#</a></h4><p>As in many programming languages, a <code>continue</code> statement starts the next iteration of a loop prematurely:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span><span style=color:#66d9ef>for</span> cond {
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>if</span> get_foo() {
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>continue</span>
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>	fmt.println(<span style=color:#e6db74>&#34;Hellope&#34;</span>)
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h4 id=fallthrough-statement><code>fallthrough</code> statement <a class=text-decoration-none href=#fallthrough-statement>#</a></h4><p>Odin&rsquo;s <code>switch</code> is like the one in C or C++, except that Odin only runs the selected case. This means that a <code>break</code> statement is not needed at the end of each case. Another important difference is that the case values need not be integers nor constants.</p><p><code>fallthrough</code> can be used to explicitly fall through into the next case block:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span><span style=color:#66d9ef>switch</span> i {
</span></span><span style=display:flex><span><span style=color:#66d9ef>case</span> <span style=color:#a6e22e>0</span><span style=color:#f92672>:</span>
</span></span><span style=display:flex><span>	foo()
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>fallthrough</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>case</span> <span style=color:#a6e22e>1</span><span style=color:#f92672>:</span>
</span></span><span style=display:flex><span>	bar()
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h2 id=procedures>Procedures <a class=text-decoration-none href=#procedures>#</a></h2><p>In Odin, a procedure is something that can do work, which some languages call <em>functions</em> or <em>methods</em>. A procedure literal in Odin is defined with the <code>proc</code> keyword:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span>fibonacci <span style=color:#f92672>::</span> <span style=color:#66d9ef>proc</span>(n<span style=color:#f92672>:</span> <span style=color:#66d9ef>int</span>) <span style=color:#f92672>-&gt;</span> <span style=color:#66d9ef>int</span> {
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>switch</span> {
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>case</span> n <span style=color:#f92672>&lt;</span> <span style=color:#a6e22e>1</span><span style=color:#f92672>:</span>
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>return</span> <span style=color:#a6e22e>0</span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>case</span> n <span style=color:#f92672>==</span> <span style=color:#a6e22e>1</span><span style=color:#f92672>:</span>
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>return</span> <span style=color:#a6e22e>1</span>
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>return</span> fibonacci(n<span style=color:#f92672>-</span><span style=color:#a6e22e>1</span>) <span style=color:#f92672>+</span> fibonacci(n<span style=color:#f92672>-</span><span style=color:#a6e22e>2</span>)
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>fmt.println(fibonacci(<span style=color:#a6e22e>3</span>)) <span style=color:#75715e>// 2
</span></span></span></code></pre></div><p>For more information regarding value declarations in general, please see the <a href=/docs/faq>Odin FAQ</a>.</p><h3 id=parameters>Parameters <a class=text-decoration-none href=#parameters>#</a></h3><p>Procedures can take zero or many parameters. The following example is a basic procedure that multiplies two integers together:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span>multiply <span style=color:#f92672>::</span> <span style=color:#66d9ef>proc</span>(x<span style=color:#f92672>:</span> <span style=color:#66d9ef>int</span>, y<span style=color:#f92672>:</span> <span style=color:#66d9ef>int</span>) <span style=color:#f92672>-&gt;</span> <span style=color:#66d9ef>int</span> {
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>return</span> x <span style=color:#f92672>*</span> y
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>fmt.println(multiply(<span style=color:#a6e22e>137</span>, <span style=color:#a6e22e>432</span>))
</span></span></code></pre></div><p>When two or more consecutive parameters share a type, you can omit the other types from previous names, like with variable declarations. In this example: <code>x: int, y: int</code> can be shortened to <code>x, y: int</code>, for example:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span>multiply <span style=color:#f92672>::</span> <span style=color:#66d9ef>proc</span>(x, y<span style=color:#f92672>:</span> <span style=color:#66d9ef>int</span>) <span style=color:#f92672>-&gt;</span> <span style=color:#66d9ef>int</span> {
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>return</span> x <span style=color:#f92672>*</span> y
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>fmt.println(multiply(<span style=color:#a6e22e>137</span>, <span style=color:#a6e22e>432</span>))
</span></span></code></pre></div><p>Continuing the C family tradition, everything in Odin is passed by value (rather than by reference, e.g. FORTRAN, Java, etc). However, Odin differs from the C/C++ tradition in that all procedure parameters in Odin are immutable values. This allows for numerous optimizations with the Odin <a href=#calling-conventions>calling conventions</a> (<code>"odin"</code> and <code>"contextless"</code>) which would not be possible with the original C tradition of always passing a copy of the thing that has been passed.</p><p>Passing a pointer value makes a copy of the pointer, not the data it points to. Slices, dynamic arrays, and maps behave like pointers in this case (Internally they are structures that contain values, which include pointers, and the &ldquo;structure&rdquo; is passed by value).</p><h4 id=shadowing-parameters>Shadowing Parameters <a class=text-decoration-none href=#shadowing-parameters>#</a></h4><p>To mutate the procedure parameter (like in C), an explicit copy is required. This can be done through shadowing the variable declaration:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span>foo <span style=color:#f92672>::</span> <span style=color:#66d9ef>proc</span>(x<span style=color:#f92672>:</span> <span style=color:#66d9ef>int</span>) {
</span></span><span style=display:flex><span>	x <span style=color:#f92672>:=</span> x <span style=color:#75715e>// explicit mutation
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>	<span style=color:#66d9ef>for</span> x <span style=color:#f92672>&gt;</span> <span style=color:#a6e22e>0</span> {
</span></span><span style=display:flex><span>		fmt.println(x)
</span></span><span style=display:flex><span>		x <span style=color:#f92672>-=</span> <span style=color:#a6e22e>1</span>
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h4 id=variadic-parameters>Variadic Parameters <a class=text-decoration-none href=#variadic-parameters>#</a></h4><p>Procedures can be variadic, taking a varying number of arguments:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span>sum <span style=color:#f92672>::</span> <span style=color:#66d9ef>proc</span>(nums<span style=color:#f92672>:</span> ..<span style=color:#66d9ef>int</span>) <span style=color:#f92672>-&gt;</span> (result<span style=color:#f92672>:</span> <span style=color:#66d9ef>int</span>) {
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>for</span> n <span style=color:#66d9ef>in</span> nums {
</span></span><span style=display:flex><span>		result <span style=color:#f92672>+=</span> n
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>return</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>fmt.println(sum())              <span style=color:#75715e>// 0
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>fmt.println(sum(<span style=color:#a6e22e>1</span>, <span style=color:#a6e22e>2</span>))          <span style=color:#75715e>// 3
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>fmt.println(sum(<span style=color:#a6e22e>1</span>, <span style=color:#a6e22e>2</span>, <span style=color:#a6e22e>3</span>, <span style=color:#a6e22e>4</span>, <span style=color:#a6e22e>5</span>)) <span style=color:#75715e>// 15
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>odds <span style=color:#f92672>:=</span> []<span style=color:#66d9ef>int</span>{<span style=color:#a6e22e>1</span>, <span style=color:#a6e22e>3</span>, <span style=color:#a6e22e>5</span>}
</span></span><span style=display:flex><span>fmt.println(sum(..odds))        <span style=color:#75715e>// 9, passing a slice as varargs
</span></span></span></code></pre></div><h3 id=multiple-results>Multiple results <a class=text-decoration-none href=#multiple-results>#</a></h3><p>A procedure in Odin can return any number of results. For example:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span>swap <span style=color:#f92672>::</span> <span style=color:#66d9ef>proc</span>(x, y<span style=color:#f92672>:</span> <span style=color:#66d9ef>int</span>) <span style=color:#f92672>-&gt;</span> (<span style=color:#66d9ef>int</span>, <span style=color:#66d9ef>int</span>) {
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>return</span> y, x
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>a, b <span style=color:#f92672>:=</span> swap(<span style=color:#a6e22e>1</span>, <span style=color:#a6e22e>2</span>)
</span></span><span style=display:flex><span>fmt.println(a, b) <span style=color:#75715e>// 2 1
</span></span></span></code></pre></div><h3 id=named-results>Named results <a class=text-decoration-none href=#named-results>#</a></h3><p>Return values in Odin may be named. If so, they are treated as variables defined at the top of the procedure, like input parameters. A <code>return</code> statement without arguments returns the named return value (or values). &ldquo;Naked&rdquo; return statements should only be used in short procedures as it reduces clarity when reading.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span>do_math <span style=color:#f92672>::</span> <span style=color:#66d9ef>proc</span>(input<span style=color:#f92672>:</span> <span style=color:#66d9ef>int</span>) <span style=color:#f92672>-&gt;</span> (x, y<span style=color:#f92672>:</span> <span style=color:#66d9ef>int</span>) {
</span></span><span style=display:flex><span>	x <span style=color:#f92672>=</span> <span style=color:#a6e22e>2</span><span style=color:#f92672>*</span>input <span style=color:#f92672>+</span> <span style=color:#a6e22e>1</span>
</span></span><span style=display:flex><span>	y <span style=color:#f92672>=</span> <span style=color:#a6e22e>3</span><span style=color:#f92672>*</span>input <span style=color:#f92672>/</span> <span style=color:#a6e22e>5</span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>return</span> x, y
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>do_math_with_naked_return <span style=color:#f92672>::</span> <span style=color:#66d9ef>proc</span>(input<span style=color:#f92672>:</span> <span style=color:#66d9ef>int</span>) <span style=color:#f92672>-&gt;</span> (x, y<span style=color:#f92672>:</span> <span style=color:#66d9ef>int</span>) {
</span></span><span style=display:flex><span>	x <span style=color:#f92672>=</span> <span style=color:#a6e22e>2</span><span style=color:#f92672>*</span>input <span style=color:#f92672>+</span> <span style=color:#a6e22e>1</span>
</span></span><span style=display:flex><span>	y <span style=color:#f92672>=</span> <span style=color:#a6e22e>3</span><span style=color:#f92672>*</span>input <span style=color:#f92672>/</span> <span style=color:#a6e22e>5</span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>return</span> <span style=color:#75715e>// A &#34;naked&#34; return statement, as no values are explicitly specified.
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>}
</span></span></code></pre></div><p>Assigning <a href=#default-values>default values</a> to named results is also possible:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span>conditionally_blue <span style=color:#f92672>::</span> <span style=color:#66d9ef>proc</span>(red<span style=color:#f92672>:</span> <span style=color:#66d9ef>bool</span>) <span style=color:#f92672>-&gt;</span> (color <span style=color:#f92672>:=</span> <span style=color:#e6db74>&#34;blue&#34;</span>) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> red {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> <span style=color:#e6db74>&#34;red&#34;</span>
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h3 id=named-arguments>Named arguments <a class=text-decoration-none href=#named-arguments>#</a></h3><p>When calling a procedure, it is not clear in which order parameters might appear. Therefore, the arguments can be named, like a struct literal, to make it clear which argument a parameter is for:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span>create_window <span style=color:#f92672>::</span> <span style=color:#66d9ef>proc</span>(title<span style=color:#f92672>:</span> <span style=color:#66d9ef>string</span>, x, y<span style=color:#f92672>:</span> <span style=color:#66d9ef>int</span>, width, height<span style=color:#f92672>:</span> <span style=color:#66d9ef>int</span>, monitor<span style=color:#f92672>:</span> <span style=color:#f92672>^</span>Monitor) <span style=color:#f92672>-&gt;</span> (<span style=color:#f92672>^</span>Window, Window_Error) {...}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>window, err <span style=color:#f92672>:=</span> create_window(title<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;Hellope Title&#34;</span>, monitor<span style=color:#f92672>=</span><span style=color:#66d9ef>nil</span>, width<span style=color:#f92672>=</span><span style=color:#a6e22e>854</span>, height<span style=color:#f92672>=</span><span style=color:#a6e22e>480</span>, x<span style=color:#f92672>=</span><span style=color:#a6e22e>0</span>, y<span style=color:#f92672>=</span><span style=color:#a6e22e>0</span>)
</span></span></code></pre></div><p>As of the <code>dev-2023-07</code> release, mixing named and positional arguments is allowed. This is often useful when a procedure has a lot of arguments <em>or</em> you want to customize <a href=#default-values>default values</a>.</p><p><em><strong>Positional</strong></em> arguments are not allowed after <em><strong>named</strong></em> arguments.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span>foo <span style=color:#f92672>::</span> <span style=color:#66d9ef>proc</span>(value<span style=color:#f92672>:</span> <span style=color:#66d9ef>int</span>, name<span style=color:#f92672>:</span> <span style=color:#66d9ef>string</span>, x<span style=color:#f92672>:</span> <span style=color:#66d9ef>bool</span>, y<span style=color:#f92672>:</span> <span style=color:#66d9ef>f32</span>, z <span style=color:#f92672>:=</span> <span style=color:#a6e22e>0</span>) { }
</span></span><span style=display:flex><span>foo(<span style=color:#a6e22e>134</span>, <span style=color:#e6db74>&#34;hellope&#34;</span>, x<span style=color:#f92672>=</span><span style=color:#66d9ef>true</span>, y<span style=color:#f92672>=</span><span style=color:#a6e22e>4</span><span style=color:#ae81ff>.5</span>)
</span></span></code></pre></div><h3 id=default-values>Default values <a class=text-decoration-none href=#default-values>#</a></h3><p>The <code>create_window</code> procedure may be easier to use if default values are provided, which will be used if they are not specified:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span>create_window <span style=color:#f92672>::</span> <span style=color:#66d9ef>proc</span>(title<span style=color:#f92672>:</span> <span style=color:#66d9ef>string</span>, x <span style=color:#f92672>:=</span> <span style=color:#a6e22e>0</span>, y <span style=color:#f92672>:=</span> <span style=color:#a6e22e>0</span>, width <span style=color:#f92672>:=</span> <span style=color:#a6e22e>854</span>, height <span style=color:#f92672>:=</span> <span style=color:#a6e22e>480</span>, monitor<span style=color:#f92672>:</span> <span style=color:#f92672>^</span>Monitor <span style=color:#f92672>=</span> <span style=color:#66d9ef>nil</span>) <span style=color:#f92672>-&gt;</span> (<span style=color:#f92672>^</span>Window, Window_Error) {...}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>window1, err1 <span style=color:#f92672>:=</span> create_window(<span style=color:#e6db74>&#34;Title1&#34;</span>)
</span></span><span style=display:flex><span>window2, err2 <span style=color:#f92672>:=</span> create_window(title<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;Title1&#34;</span>, width<span style=color:#f92672>=</span><span style=color:#a6e22e>640</span>, height<span style=color:#f92672>=</span><span style=color:#a6e22e>360</span>)
</span></span></code></pre></div><p>Default values are assigned at the start of the procedure call and can be <a href=#shadowing-parameters>overwritten</a>. They may also be assigned to <a href=#named-results>named results</a>.</p><p><strong>Note:</strong> These default values must be compile time known values, such as a constant value or <code>nil</code> (if the type supports it).</p><h3 id=explicit-procedure-overloading>Explicit procedure overloading <a class=text-decoration-none href=#explicit-procedure-overloading>#</a></h3><p>Unlike other languages, Odin provides the ability to explicitly overload procedures:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span>bool_to_string <span style=color:#f92672>::</span> <span style=color:#66d9ef>proc</span>(b<span style=color:#f92672>:</span> <span style=color:#66d9ef>bool</span>) <span style=color:#f92672>-&gt;</span> <span style=color:#66d9ef>string</span> {...}
</span></span><span style=display:flex><span>int_to_string  <span style=color:#f92672>::</span> <span style=color:#66d9ef>proc</span>(i<span style=color:#f92672>:</span> <span style=color:#66d9ef>int</span>)  <span style=color:#f92672>-&gt;</span> <span style=color:#66d9ef>string</span> {...}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>to_string <span style=color:#f92672>::</span> <span style=color:#66d9ef>proc</span>{bool_to_string, int_to_string}
</span></span></code></pre></div><h4 id=rationale-behind-explicit-overloading>Rationale behind explicit overloading <a class=text-decoration-none href=#rationale-behind-explicit-overloading>#</a></h4><p>The design goals of Odin were explicitness and simplicity. Implicit procedure overloading complicates the scoping system. In C++, you cannot nest procedures within procedures, so all procedure look-ups are done at the global scope. In Odin, procedures can be nested within procedures and, as a result, determining which procedure should be used, in the case of implicit overloading, is complex.</p><p>Explicit overloading has many advantages:</p><ul><li>Explicitness of what is overloaded</li><li>Able to refer to the specific procedure if needed</li><li>Clear which scope the entity name belongs to</li><li>Ability to specialize parametric polymorphic procedures if necessary, which have the same parameter but different bounds (see <a href=#where-clauses><code>where</code> clauses</a>)</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span>foo <span style=color:#f92672>::</span> <span style=color:#66d9ef>proc</span>{
</span></span><span style=display:flex><span>	foo_bar,
</span></span><span style=display:flex><span>	foo_baz,
</span></span><span style=display:flex><span>	foo_baz2,
</span></span><span style=display:flex><span>	another_thing_entirely,
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h2 id=basic-types>Basic types <a class=text-decoration-none href=#basic-types>#</a></h2><p>Odin&rsquo;s basic types are:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span><span style=color:#66d9ef>bool</span> <span style=color:#66d9ef>b8</span> <span style=color:#66d9ef>b16</span> <span style=color:#66d9ef>b32</span> <span style=color:#66d9ef>b64</span> <span style=color:#75715e>// booleans
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#75715e>// integers
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>int</span>  <span style=color:#66d9ef>i8</span> <span style=color:#66d9ef>i16</span> <span style=color:#66d9ef>i32</span> <span style=color:#66d9ef>i64</span> i128
</span></span><span style=display:flex><span><span style=color:#66d9ef>uint</span> <span style=color:#66d9ef>u8</span> <span style=color:#66d9ef>u16</span> <span style=color:#66d9ef>u32</span> <span style=color:#66d9ef>u64</span> u128 <span style=color:#66d9ef>uintptr</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// endian specific integers
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>i16le</span> <span style=color:#66d9ef>i32le</span> <span style=color:#66d9ef>i64le</span> <span style=color:#66d9ef>i128le</span> <span style=color:#66d9ef>u16le</span> <span style=color:#66d9ef>u32le</span> <span style=color:#66d9ef>u64le</span> <span style=color:#66d9ef>u128le</span> <span style=color:#75715e>// little endian
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>i16be</span> <span style=color:#66d9ef>i32be</span> <span style=color:#66d9ef>i64be</span> <span style=color:#66d9ef>i128be</span> <span style=color:#66d9ef>u16be</span> <span style=color:#66d9ef>u32be</span> <span style=color:#66d9ef>u64be</span> <span style=color:#66d9ef>u128be</span> <span style=color:#75715e>// big endian
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>f16</span> <span style=color:#66d9ef>f32</span> <span style=color:#66d9ef>f64</span> <span style=color:#75715e>// floating point numbers
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#75715e>// endian specific floating point numbers
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>f16le f32le f64le <span style=color:#75715e>// little endian
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>f16be f32be f64be <span style=color:#75715e>// big endian
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>complex32</span> <span style=color:#66d9ef>complex64</span> <span style=color:#66d9ef>complex128</span> <span style=color:#75715e>// complex numbers
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>quaternion64</span> <span style=color:#66d9ef>quaternion128</span> <span style=color:#66d9ef>quaternion256</span> <span style=color:#75715e>// quaternion numbers
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>rune</span> <span style=color:#75715e>// signed 32 bit integer
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>	 <span style=color:#75715e>// represents a Unicode code point
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>	 <span style=color:#75715e>// is a distinct type to `i32`
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#75715e>// strings
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>string</span> <span style=color:#66d9ef>cstring</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// raw pointer type
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>rawptr</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// runtime type information specific type
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>typeid</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>any</span>
</span></span></code></pre></div><p>The <code>uintptr</code> type is pointer sized, and the <code>int</code>, <code>uint</code> types are the &ldquo;natural&rdquo; register size, which is guaranteed to greater than or equal to the size of a pointer (i.e. <code>size_of(uint) >= size_of(uintptr)</code>). When you need an integer value, you should default to using <code>int</code> unless you have a specific reason to use a sized or unsigned integer type</p><p><strong>Note:</strong> The Odin <code>string</code> type stores the pointer to the data and the length of the string. <code>cstring</code> is used to interface with foreign libraries written in/for C that use zero-terminated strings.</p><h3 id=zero-values>Zero values <a class=text-decoration-none href=#zero-values>#</a></h3><p>Variables declared without an explicit initial value are given their <em>zero</em> value.</p><p>The zero value is:</p><ul><li><code>0</code> for numeric and rune types</li><li><code>false</code> for boolean types</li><li><code>""</code> (the empty string) for strings</li><li><code>nil</code> for pointer, typeid, and any types.</li></ul><p>The expression <code>{}</code> can be used for all types to act as a zero type. This is not recommended as it is not clear and if a type has a specific zero value shown above, please prefer that.</p><h3 id=type-conversion>Type conversion <a class=text-decoration-none href=#type-conversion>#</a></h3><p>The expression <code>T(v)</code> converts the value <code>v</code> to the type <code>T</code>.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span>i<span style=color:#f92672>:</span> <span style=color:#66d9ef>int</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>123</span>
</span></span><span style=display:flex><span>f<span style=color:#f92672>:</span> <span style=color:#66d9ef>f64</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>f64</span>(i)
</span></span><span style=display:flex><span>u<span style=color:#f92672>:</span> <span style=color:#66d9ef>u32</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>u32</span>(f)
</span></span></code></pre></div><p>or with type inference:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span>i <span style=color:#f92672>:=</span> <span style=color:#a6e22e>123</span>
</span></span><span style=display:flex><span>f <span style=color:#f92672>:=</span> <span style=color:#66d9ef>f64</span>(i)
</span></span><span style=display:flex><span>u <span style=color:#f92672>:=</span> <span style=color:#66d9ef>u32</span>(f)
</span></span></code></pre></div><p>Unlike C, assignments between values of a different type require an explicit conversion.</p><h4 id=cast-operator>Cast operator <a class=text-decoration-none href=#cast-operator>#</a></h4><p>The <code>cast</code> operator can also be used to do the same thing:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span>i <span style=color:#f92672>:=</span> <span style=color:#a6e22e>123</span>
</span></span><span style=display:flex><span>f <span style=color:#f92672>:=</span> <span style=color:#66d9ef>cast</span>(<span style=color:#66d9ef>f64</span>)i
</span></span><span style=display:flex><span>u <span style=color:#f92672>:=</span> <span style=color:#66d9ef>cast</span>(<span style=color:#66d9ef>u32</span>)f
</span></span></code></pre></div><p>This is useful in some contexts but has the same semantic meaning.</p><h4 id=transmute-operator>Transmute operator <a class=text-decoration-none href=#transmute-operator>#</a></h4><p>The <code>transmute</code> operator is a bit cast conversion between two types of the same size:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span>f <span style=color:#f92672>:=</span> <span style=color:#66d9ef>f32</span>(<span style=color:#a6e22e>123</span>)
</span></span><span style=display:flex><span>u <span style=color:#f92672>:=</span> <span style=color:#66d9ef>transmute</span>(<span style=color:#66d9ef>u32</span>)f
</span></span></code></pre></div><p>This is akin to doing the following pointer cast manipulations:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span>f <span style=color:#f92672>:=</span> <span style=color:#66d9ef>f32</span>(<span style=color:#a6e22e>123</span>)
</span></span><span style=display:flex><span>u <span style=color:#f92672>:=</span> (<span style=color:#f92672>^</span><span style=color:#66d9ef>u32</span>)(<span style=color:#f92672>&amp;</span>f)<span style=color:#f92672>^</span>
</span></span></code></pre></div><p>However, <code>transmute</code> does not require taking the address of the value in question, which may not be possible for many expressions.</p><h3 id=untyped-types>Untyped types <a class=text-decoration-none href=#untyped-types>#</a></h3><p>In the Odin type system, certain expressions will have an &ldquo;untyped&rdquo; type. An untyped type can implicitly convert to a &ldquo;typed&rdquo; type.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span>I <span style=color:#f92672>::</span> <span style=color:#a6e22e>42</span>        <span style=color:#75715e>// untyped integer, will implicitly convert to any numeric type (int, u32, f64, quaternion128 etc)
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>F <span style=color:#f92672>::</span> <span style=color:#a6e22e>1</span><span style=color:#ae81ff>.37</span>      <span style=color:#75715e>// untyped float,  will implicitly convert to any numeric type that can support fractional parts (f64, quaternion128 etc)
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>S <span style=color:#f92672>::</span> <span style=color:#e6db74>&#34;Hellope&#34;</span> <span style=color:#75715e>// untyped string,  will implicitly convert to string and cstring
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>B <span style=color:#f92672>::</span> <span style=color:#66d9ef>true</span>      <span style=color:#75715e>// untyped boolean, will implicitly convert to bool, b8, b16, etc.
</span></span></span></code></pre></div><p>(The more formal name for these &ldquo;untyped&rdquo; types is <a href=https://en.wikipedia.org/wiki/Existential_type>existential</a> or <a href=https://en.wikipedia.org/wiki/Abstract_type>abstract</a> types.)</p><h3 id=auto-cast-operation>Auto cast operation <a class=text-decoration-none href=#auto-cast-operation>#</a></h3><p>The <code>auto_cast</code> operator automatically casts an expression to the destination&rsquo;s type if possible:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span>x<span style=color:#f92672>:</span> <span style=color:#66d9ef>f32</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>123</span>
</span></span><span style=display:flex><span>y<span style=color:#f92672>:</span> <span style=color:#66d9ef>int</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>auto_cast</span> x
</span></span></code></pre></div><p><strong>Note:</strong> This operation is only recommended to be used for prototyping and quick tests. Please do not abuse it.</p><h3 id=built-in-constants-values-and-procedures>Built-in constants, values, and procedures <a class=text-decoration-none href=#built-in-constants-values-and-procedures>#</a></h3><p>There are a few built-in constants and values in Odin which have different uses:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span><span style=color:#66d9ef>false</span> <span style=color:#75715e>// untyped boolean constant equivalent to the expression 0!=0
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>true</span>  <span style=color:#75715e>// untyped boolean constant equivalent to the expression 0==0
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>nil</span>   <span style=color:#75715e>// untyped nil value used for certain values
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#f92672>---</span>   <span style=color:#75715e>// untyped undefined value used to explicitly not initialize a variable
</span></span></span></code></pre></div><p><code>---</code> is useful if you want to explicitly not initialize a variable with any default value:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span>x<span style=color:#f92672>:</span> <span style=color:#66d9ef>int</span> <span style=color:#75715e>// initialized with its zero value
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>y<span style=color:#f92672>:</span> <span style=color:#66d9ef>int</span> <span style=color:#f92672>=</span> <span style=color:#f92672>---</span> <span style=color:#75715e>// uses uninitialized memory
</span></span></span></code></pre></div><p>This is the default behaviour in C, whilst the default behaviour in Odin is to zero the memory.</p><p><strong>Note:</strong> <code>---</code> is not a contract in that all memory is uninitialized, but that it may be. For example, as a side-effect of an implementation detail, padding in a struct must be zeroed to permit trivial bitwise memory comparison.</p><h4 id=built-in-procedures>Built-in procedures <a class=text-decoration-none href=#built-in-procedures>#</a></h4><p>For the full list of builtin-procedures, see the documentation for <a href=https://pkg.odin-lang.org/base/builtin/>package builtin</a>.</p><p>There are two kinds of built-in procedures in Odin:</p><ul><li>Compiler defined</li><li>Core library defined</li></ul><h3 id=string-type><code>string</code> type <a class=text-decoration-none href=#string-type>#</a></h3><p>As previously mentioned the odin <code>string</code> type is just a <code>rawptr</code> + <code>len</code>.</p><p>The <code>core:strings</code> library was created to help dealing with string cloning, conversion of <code>string</code>&lt;-><code>cstring</code> and other calls you find in standard libraries.</p><p>All procedures are <a href=https://pkg.odin-lang.org/core/strings/>documented</a> and can be easily understood with code examples.</p><h4 id=string-iteration><code>string</code> iteration <a class=text-decoration-none href=#string-iteration>#</a></h4><p>Iterating a <code>string</code> can be done in two ways - by runes or by bytes.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span><span style=color:#75715e>// by runes
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>x <span style=color:#f92672>:=</span> <span style=color:#e6db74>&#34;ABC&#34;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>for</span> codepoint, index <span style=color:#66d9ef>in</span> x {
</span></span><span style=display:flex><span>	fmt.println(index, codepoint)
</span></span><span style=display:flex><span>	<span style=color:#75715e>// 0 A
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>	<span style=color:#75715e>// 1 B
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>	<span style=color:#75715e>// 2 C
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// by bytes - string length is in bytes
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>for</span> index <span style=color:#66d9ef>in</span> <span style=color:#a6e22e>0</span><span style=color:#f92672>..&lt;</span><span style=color:#66d9ef>len</span>(x) {
</span></span><span style=display:flex><span>	fmt.println(index, x[index])
</span></span><span style=display:flex><span>	<span style=color:#75715e>// 0 65
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>	<span style=color:#75715e>// 1 66
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>	<span style=color:#75715e>// 2 67
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>}
</span></span></code></pre></div><p>Iteration through runes is preferred since odin strings are <em><strong>UTF8</strong></em>. Most core library procedures will be addressed by <code>*_byte</code> if they do input/output an index in <em>byte</em>.</p><h4 id=string-format-printing><code>string</code> format printing <a class=text-decoration-none href=#string-format-printing>#</a></h4><p>The <code>core:fmt</code> library supports printing strings from byte arrays in structs, when additional tag information is supplied.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span>Foo <span style=color:#f92672>::</span> <span style=color:#66d9ef>struct</span> {
</span></span><span style=display:flex><span>	a<span style=color:#f92672>:</span> [L]<span style=color:#66d9ef>u8</span> <span style=color:#e6db74>`fmt:&#34;s&#34;`</span>, <span style=color:#75715e>// whole buffer is a string
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>	b<span style=color:#f92672>:</span> [N]<span style=color:#66d9ef>u8</span> <span style=color:#e6db74>`fmt:&#34;s,0&#34;`</span>, <span style=color:#75715e>// 0 terminated string
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>	c<span style=color:#f92672>:</span> [M]<span style=color:#66d9ef>u8</span> <span style=color:#e6db74>`fmt:&#34;q,n&#34;`</span>, <span style=color:#75715e>// string with length determined by n, and use %q rather than %s
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>	n<span style=color:#f92672>:</span> <span style=color:#66d9ef>int</span> <span style=color:#e6db74>`fmt:&#34;-&#34;`</span>, <span style=color:#75715e>// ignore this from formatting
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>}
</span></span></code></pre></div><h3 id=cstring-type><code>cstring</code> type <a class=text-decoration-none href=#cstring-type>#</a></h3><p>The <code>cstring</code> type is a c-style string value, which is zero-terminated. It is equivalent to <code>char const *</code> in C. Its primary purpose is for easy interfacing with C. Please see the <a href=#foreign-system>foreign system</a> for more information.</p><p>A <code>cstring</code> is easily convertible to an Odin <code>string</code>. However, to convert a <code>string</code> to a <code>cstring</code>, it requires allocations if the value is not constant.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span>str<span style=color:#f92672>:</span>  <span style=color:#66d9ef>string</span>  <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;Hellope&#34;</span>
</span></span><span style=display:flex><span>cstr<span style=color:#f92672>:</span> <span style=color:#66d9ef>cstring</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;Hellope&#34;</span> <span style=color:#75715e>// constant literal
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>cstr2 <span style=color:#f92672>:=</span> <span style=color:#66d9ef>string</span>(cstr)     <span style=color:#75715e>// O(n) conversion as it requires search from the zero-terminator
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>nstr  <span style=color:#f92672>:=</span> <span style=color:#66d9ef>len</span>(str)  <span style=color:#75715e>// O(1)
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>ncstr <span style=color:#f92672>:=</span> <span style=color:#66d9ef>len</span>(cstr) <span style=color:#75715e>// O(n)
</span></span></span></code></pre></div><h3 id=string-type-conversions><code>string</code> type conversions <a class=text-decoration-none href=#string-type-conversions>#</a></h3><p>Here is a short list of possible type conversions - including whether they <em>copy</em> or <em>alias</em>. This is important to understand since <em><strong>Odin</strong></em> gives you the possibility to keep <em>allocations</em> to a low degree.</p><p>If some cases are missing please let us know.</p><p>Legend:</p><ul><li><em><strong>copy</strong></em> = get a freshly allocated copy of the &lsquo;from&rsquo; data</li><li><em><strong>alias</strong></em> = reuse the &lsquo;from&rsquo; data, without allocation</li><li><em><strong>stream</strong></em> = get individual values from the string, without allocation</li><li><em><strong>st</strong></em> = the input string</li></ul><h4 id=from-string-to-x>From <code>string</code> to X <a class=text-decoration-none href=#from-string-to-x>#</a></h4><table><thead><tr><th>To</th><th>Action</th><th>Code</th></tr></thead><tbody><tr><td><code>[]u8</code></td><td>alias</td><td><code>transmute([]u8)st</code></td></tr><tr><td><code>string</code></td><td>copy</td><td><code>strings.clone(st)</code></td></tr><tr><td><code>cstring</code></td><td>copy</td><td><code>strings.clone_to_cstring(st)</code></td></tr><tr><td><code>cstring</code></td><td>alias</td><td><code>strings.unsafe_string_to_cstring(st)</code></td></tr><tr><td><code>[]rune</code></td><td>stream</td><td><code>for rune in st { ... }</code></td></tr><tr><td><code>[]rune</code></td><td>copy</td><td><code>utf8.string_to_runes(st)</code></td></tr><tr><td><code>[^]u8</code></td><td>alias</td><td><code>raw_data(st)</code></td></tr></tbody></table><h4 id=from-cstring-to-x>From <code>cstring</code> to X <a class=text-decoration-none href=#from-cstring-to-x>#</a></h4><table><thead><tr><th>To</th><th>Action</th><th>Code</th></tr></thead><tbody><tr><td><code>string</code></td><td>alias</td><td><code>string(st)</code></td></tr><tr><td><code>[^]u8</code></td><td>alias</td><td><code>transmute([^]u8)st</code></td></tr></tbody></table><h4 id=from-a-string-literal-to-x>From a <em><strong>string literal</strong></em> to X <a class=text-decoration-none href=#from-a-string-literal-to-x>#</a></h4><table><thead><tr><th>To</th><th>Action</th><th>Code</th></tr></thead><tbody><tr><td><code>string</code></td><td>alias</td><td><code>string(st)</code> or <code>newstr: string = st</code></td></tr><tr><td><code>cstring</code></td><td>alias</td><td><code>cstring(st)</code> or <code>newstr: cstring = st</code></td></tr></tbody></table><h4 id=from-u8-to-x>From <code>[]u8</code> to X <a class=text-decoration-none href=#from-u8-to-x>#</a></h4><table><thead><tr><th>To</th><th>Action</th><th>Code</th></tr></thead><tbody><tr><td><code>string</code></td><td>alias</td><td><code>transmute(string)st</code></td></tr><tr><td><code>string</code></td><td>alias</td><td><code>string(st)</code> unless a slice literal</td></tr><tr><td><code>[^]u8</code></td><td>alias</td><td><code>raw_data(st)</code></td></tr></tbody></table><h4 id=from-rune-to-string>From <code>[]rune</code> to <code>string</code> <a class=text-decoration-none href=#from-rune-to-string>#</a></h4><table><thead><tr><th>Action</th><th>Code</th></tr></thead><tbody><tr><td>copy</td><td><code>utf8.runes_to_string(st)</code></td></tr></tbody></table><h4 id=from-u8-to-cstring>From <code>[^]u8</code> to <code>cstring</code> <a class=text-decoration-none href=#from-u8-to-cstring>#</a></h4><table><thead><tr><th>Action</th><th>Code</th></tr></thead><tbody><tr><td>alias</td><td><code>cstring(st)</code></td></tr></tbody></table><h4 id=from-u8-and-length-int-to-string>From <code>[^]u8</code> and length <code>int</code> to <code>string</code> <a class=text-decoration-none href=#from-u8-and-length-int-to-string>#</a></h4><table><thead><tr><th>Action</th><th>Code</th></tr></thead><tbody><tr><td>alias</td><td><code>strings.string_from_ptr(ptr, length)</code></td></tr></tbody></table><h2 id=operators>Operators <a class=text-decoration-none href=#operators>#</a></h2><p>Operators combine operands into expressions. For binary operations, operand types must be identical or implicitly convertible unless the operation involves shifts or untyped constants.</p><h3 id=arithmetic-operators>Arithmetic operators <a class=text-decoration-none href=#arithmetic-operators>#</a></h3><p>Unary:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-txt data-lang=txt><span style=display:flex><span>+                           is 0 + x
</span></span><span style=display:flex><span>-    negation               is 0 - x
</span></span><span style=display:flex><span>~    bitwise complement     is m ~ x where m = &#34;all bits set to 1&#34; for unsigned x
</span></span><span style=display:flex><span>                                     and m = -1 for signed x
</span></span></code></pre></div><p>Binary:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-txt data-lang=txt><span style=display:flex><span>+       sum                        integers, enums, floats, complex values, quaternions, arrays of numeric types, matrices, constant strings
</span></span><span style=display:flex><span>-       subtraction                integers, enums, floats, complex values, quaternions, arrays of numeric types, matrices
</span></span><span style=display:flex><span>*       multiplication             integers, floats, complex values, quaternions, arrays of numeric types, matrices
</span></span><span style=display:flex><span>/       division                   integers, floats, complex values, quaternions, arrays of numeric types
</span></span><span style=display:flex><span>%       modulo (truncated)         integers
</span></span><span style=display:flex><span>%%      remainder (floored)        integers
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>|       bitwise or                 integers, enums
</span></span><span style=display:flex><span>~       bitwise xor                integers, enums
</span></span><span style=display:flex><span>&amp;       bitwise and                integers, enums
</span></span><span style=display:flex><span>&amp;~      bitwise and-not            integers, enums
</span></span><span style=display:flex><span>&lt;&lt;      left shift                 integer &lt;&lt; integer &gt;= 0
</span></span><span style=display:flex><span>&gt;&gt;      right shift                integer &gt;&gt; integer &gt;= 0
</span></span></code></pre></div><p>Except for shift operations, if one operand is an untyped constant and the other operand is not, the constant is implicitly converted to the type of the other operand (if possible).</p><p>The right operand in a shift expression must have an unsigned integer type or be an untyped constant representable by a typed unsigned integer. If the left operand of a non-constant shift expression is an untyped constant, it is first implicitly converted to the type it would assume if the shift expression were replaced solely by the left operand alone (with type inference and hinting rules applied).</p><h3 id=comparison-operators>Comparison operators <a class=text-decoration-none href=#comparison-operators>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-txt data-lang=txt><span style=display:flex><span>==      equal
</span></span><span style=display:flex><span>!=      not equal
</span></span><span style=display:flex><span>&lt;       less
</span></span><span style=display:flex><span>&lt;=      less or equal
</span></span><span style=display:flex><span>&gt;       greater
</span></span><span style=display:flex><span>&gt;=      greater or equal
</span></span><span style=display:flex><span>&amp;&amp;      short-circuiting logical and
</span></span><span style=display:flex><span>||      short-circuiting logical or
</span></span></code></pre></div><p>In any comparison, the first operand must be assignable to the type of the second, or vice versa.</p><p>The equality operators <code>==</code> and <code>!=</code> apply to operands that are <em>comparable</em>. The ordering operators <code>&lt;</code>, <code>&lt;=</code>, <code>></code>, and <code>>=</code> apply to operands that are <em>ordered</em>. These terms and the result of the comparisons are defined as follows:</p><ul><li>Boolean values are comparable.</li><li>Integers values are comparable and ordered.</li><li>Floating-point values are comparable and ordered, defined by the IEEE-754 standard.</li><li>Complex values are comparable.</li><li>Quaternion values are comparable.</li><li>Rune values are comparable and ordered.</li><li>String values are comparable and ordered, lexically byte-wise.</li><li>Matrix values are comparable.</li><li>Pointer values are comparable and ordered.</li><li>Multi-pointer values are comparable and ordered.</li><li>Soa-pointer values are comparable.</li><li>Enum values are comparable and ordered.</li><li>Bit-set values are comparable.</li><li>Struct values are comparable if all their fields are comparable.</li><li>Union values are comparable if all their variants are comparable.</li><li>Array and enumerated array values are comparable if values of the element type are comparable.</li><li><code>typeid</code> is comparable.</li><li>Simd vectors are comparable.</li></ul><p>Bit-set values use different logic compared to integers when comparison operators are used: please see the section of <a href=/docs/overview/#bit-sets>bit sets</a></p><h3 id=logical-operators>Logical operators <a class=text-decoration-none href=#logical-operators>#</a></h3><p>Logical operators apply to boolean values. The right operand is evaluated conditionally</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-txt data-lang=txt><span style=display:flex><span>&amp;&amp;      conditional AND    a &amp;&amp; b  is &#34;b if a else false&#34;
</span></span><span style=display:flex><span>||      conditional OR     a || b  is &#34;true if a else b&#34;
</span></span><span style=display:flex><span>!       NOT                !a      is &#34;not a&#34;
</span></span></code></pre></div><h3 id=compound-binary-operator-and-assign>Compound binary operator and assign <a class=text-decoration-none href=#compound-binary-operator-and-assign>#</a></h3><p>Like many other languages, there is a shorthand for performing a binary operation and assigning the result to the first operand e.g. <code>x = x + 5</code>. All arithmetic and logical binary operators have this shorthand</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-txt data-lang=txt><span style=display:flex><span>+=       sum and assign                   a += b is a = a + b
</span></span><span style=display:flex><span>-=       subtraction and assign           a -= b is a = a - b
</span></span><span style=display:flex><span>*=       multiplication and assign        a *= b is a = a * b
</span></span><span style=display:flex><span>/=       division and assign              a /= b is a = a / b
</span></span><span style=display:flex><span>%=       modulo (truncated) and assign    a %= b is a = a % b
</span></span><span style=display:flex><span>%%=      remainder (floored) and assign   a %%= b is a = a %% b
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>|=       bitwise or and assign            a |= b is a = a | b
</span></span><span style=display:flex><span>~=       bitwise xor and assign           a ~= b is a = a ~ b
</span></span><span style=display:flex><span>&amp;=       bitwise and and assign           a &amp;= b is a = a &amp; b
</span></span><span style=display:flex><span>&amp;~=      bitwise and-not and assign       a &amp;~= b is a = a &amp;~ b
</span></span><span style=display:flex><span>&lt;&lt;=      left shift and assign            a &lt;&lt;= b is a = a &lt;&lt; b
</span></span><span style=display:flex><span>&gt;&gt;=      right shift and assign           a &gt;&gt;= b is a = a &gt;&gt; b
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&amp;&amp;=      conditional AND and assign       a &amp;&amp;= b is a = a &amp;&amp; b
</span></span><span style=display:flex><span>||=      conditional OR and assign        a ||= b is a = a || b
</span></span></code></pre></div><h3 id=address-operator>Address operator <a class=text-decoration-none href=#address-operator>#</a></h3><p>For an operand <code>x</code> of type <code>T</code>, the address operation <code>&amp;x</code> generates a pointer of <code>^T</code> to <code>x</code>. The operand must be <em>addressable</em>, meaning that either a variable, pointer indirection, or slice/dynamic array indexing operator; or a field selector of an addressable struct operand; or an array index operation of an addressable array; or a type assertion of an addressable union or <code>any</code>; or a compound literal value.</p><p>For an operand <code>x</code> of pointer type <code>^T</code>, the pointer indirection <code>x^</code> denotes the variable of type <code>T</code> pointed to by <code>x</code>. If <code>x</code> is an invalid address, such as <code>nil</code>, an attempt to evaluate <code>x^</code> will result in platform specific behaviour - on most platforms this will be a segmentation fault.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span><span style=color:#f92672>&amp;</span>x
</span></span><span style=display:flex><span><span style=color:#f92672>&amp;</span>a[foo(<span style=color:#a6e22e>123</span>)]
</span></span><span style=display:flex><span><span style=color:#f92672>&amp;</span>Foo{<span style=color:#a6e22e>1</span>, <span style=color:#a6e22e>2</span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>p<span style=color:#f92672>^</span>
</span></span><span style=display:flex><span>pproc(a)<span style=color:#f92672>^</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>x<span style=color:#f92672>:</span> <span style=color:#f92672>^</span><span style=color:#66d9ef>int</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>nil</span>
</span></span><span style=display:flex><span>x<span style=color:#f92672>^</span>      <span style=color:#75715e>// causes a runtime panic
</span></span></span></code></pre></div><h3 id=ternary-operators>Ternary Operators <a class=text-decoration-none href=#ternary-operators>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span>x <span style=color:#66d9ef>if</span> cond <span style=color:#66d9ef>else</span> y    <span style=color:#75715e>// ternary runtime conditional expression
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>x <span style=color:#66d9ef>when</span> cond <span style=color:#66d9ef>else</span> y  <span style=color:#75715e>// ternary compile-time conditional expression
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>cond <span style=color:#960050;background-color:#1e0010>?</span> x <span style=color:#f92672>:</span> y        <span style=color:#75715e>// ternary runtime conditional expression, equivalent to &#34;x if cond else y&#34;
</span></span></span></code></pre></div><h3 id=other-operators>Other operators <a class=text-decoration-none href=#other-operators>#</a></h3><ul><li><code>or_else</code><ul><li>see section on <a href=/docs/overview/#or_else-expression><code>or_else</code></a></li></ul></li><li><code>or_return</code><ul><li>see section on <a href=/docs/overview/#or_return-operator><code>or_return</code></a></li></ul></li><li><code>or_continue</code><ul><li>see section on <a href=/docs/overview/#or_continue-operator><code>or_continue</code></a></li></ul></li><li><code>or_break</code><ul><li>see section on <a href=/docs/overview/#or_break-operator><code>or_break</code></a></li></ul></li><li><code>in</code> - set membership (<code>e in A</code>, <code>A</code> contains element <code>e</code>)<ul><li>Used for <code>bit_set</code> types and <code>map</code> types</li></ul></li><li><code>not_in</code> - not set membership (<code>e not_in A</code>, <code>A</code> does not contain <code>e</code>)<ul><li>Used for <code>bit_set</code> types and <code>map</code> types</li></ul></li><li><code>..=</code> - inclusive range</li><li><code>..&lt;</code> - half open range</li></ul><p>The range operations <code>..=</code> and <code>..&lt;</code> are only possible within certain contexts:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span><span style=color:#66d9ef>for</span> x <span style=color:#66d9ef>in</span> a<span style=color:#f92672>..&lt;</span>b {}
</span></span><span style=display:flex><span><span style=color:#66d9ef>for</span> x <span style=color:#66d9ef>in</span> a<span style=color:#f92672>..=</span>b {}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>switch</span> x {
</span></span><span style=display:flex><span><span style=color:#66d9ef>case</span> a<span style=color:#f92672>..&lt;</span>b<span style=color:#f92672>:</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>case</span> c<span style=color:#f92672>..=</span>d<span style=color:#f92672>:</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>bit_set</span>[a<span style=color:#f92672>..&lt;</span>b]
</span></span><span style=display:flex><span><span style=color:#66d9ef>bit_set</span>[a<span style=color:#f92672>..=</span>b]
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>foo <span style=color:#f92672>:=</span> [<span style=color:#960050;background-color:#1e0010>?</span>]<span style=color:#66d9ef>int</span>{<span style=color:#a6e22e>0</span><span style=color:#f92672>..=</span><span style=color:#a6e22e>3</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>1</span>} <span style=color:#75715e>// initialises as: [1, 1, 1, 1]
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>bar <span style=color:#f92672>:=</span> [<span style=color:#960050;background-color:#1e0010>?</span>]<span style=color:#66d9ef>int</span>{<span style=color:#a6e22e>0</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>0</span>, <span style=color:#a6e22e>1</span><span style=color:#f92672>..&lt;</span><span style=color:#a6e22e>3</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>1</span>} <span style=color:#75715e>// initialises as: [0, 1, 1]
</span></span></span></code></pre></div><p><code>in</code> and <code>not_in</code> are not allowed in within a for loop condition without ambiguity:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span><span style=color:#66d9ef>for</span> x <span style=color:#66d9ef>in</span> y {}    <span style=color:#75715e>// range loop
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>for</span> (x <span style=color:#66d9ef>in</span> y) {}  <span style=color:#75715e>// condition-only for-loop (while-loop in some other languages)
</span></span></span></code></pre></div><h3 id=operator-precedence>Operator precedence <a class=text-decoration-none href=#operator-precedence>#</a></h3><p>Unary operators have the highest precedence.</p><p>There are seven precedence levels for binary (and ternary) operators.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-txt data-lang=txt><span style=display:flex><span>Precedence    Operator
</span></span><span style=display:flex><span>     7           *   /   %   %%   &amp;   &amp;~  &lt;&lt;   &gt;&gt;
</span></span><span style=display:flex><span>     6           +   -   |   ~    in  not_in
</span></span><span style=display:flex><span>     5           ==  !=  &lt;   &gt;    &lt;=  &gt;=
</span></span><span style=display:flex><span>     4           &amp;&amp;
</span></span><span style=display:flex><span>     3           ||
</span></span><span style=display:flex><span>     2           ..=    ..&lt;
</span></span><span style=display:flex><span>     1           or_else     ?    if  when
</span></span></code></pre></div><p>Binary operators of the same precedence associate from left to right. For instance <code>x / y * z</code> is the same as <code>(x / y) * z</code>.</p><h3 id=integer-operators>Integer operators <a class=text-decoration-none href=#integer-operators>#</a></h3><p>For two integers values <code>x</code> and <code>y</code>, the integer quotient <code>q = x/y</code> and remainder <code>r = x%y</code> satisfies the following relationships:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-txt data-lang=txt><span style=display:flex><span>x = q*y + r   and |r| &lt; |y|
</span></span></code></pre></div><p>with <code>x/y</code> truncated towards zero (<a href=https://wikipedia.org/wiki/Modulo_operation>truncated division</a>).</p><p>For two integers values <code>x</code> and <code>y</code>, the integer quotient <code>q = x/y</code> and remainder <code>r = x%%y</code> satisfies the following relationships:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-txt data-lang=txt><span style=display:flex><span>r = x - y*floor(x/y)
</span></span></code></pre></div><p>The exception to these rules are when the dividend <code>x</code> is the most non-negative value for the integer type of <code>x</code>, and the quotient <code>q = x/-1</code> is equal to <code>x</code> (and <code>r or m = 0</code>) due to two&rsquo;s complement integer overflow.</p><p>If the divisor is a constant, it must not be zero. If the divisor is zero at runtime, a runtime panic occurs.</p><p>The shift operators shift the left operand by the shift count specified by the right operand, which must be non-negative. The shift operators implement arithmetic shifts if the left operand is a signed integer and logical shifts if the left operand is an unsigned integer. There is not an upper limit on the shift count. Shifts behave as if the left operand is shifted <code>n</code> times by <code>1</code> for a shift count of <code>n</code>. Therefore, <code>x&lt;&lt;1</code> is the same as <code>x*2</code> and <code>x>>1</code> is the same as <code>x/2</code> but truncated towards negative infinity.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span><span style=color:#75715e>// These are equivalent:
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>x <span style=color:#f92672>&lt;&lt;</span> y
</span></span><span style=display:flex><span>x <span style=color:#f92672>&lt;&lt;</span> y <span style=color:#66d9ef>if</span> y <span style=color:#f92672>&lt;</span> <span style=color:#a6e22e>8</span><span style=color:#f92672>*</span>size_of(x) <span style=color:#66d9ef>else</span> <span style=color:#a6e22e>0</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>x <span style=color:#f92672>&gt;&gt;</span> y
</span></span><span style=display:flex><span>x <span style=color:#f92672>&gt;&gt;</span> y <span style=color:#66d9ef>if</span> y <span style=color:#f92672>&lt;</span> <span style=color:#a6e22e>8</span><span style=color:#f92672>*</span>size_of(x) <span style=color:#66d9ef>else</span> <span style=color:#a6e22e>0</span>
</span></span></code></pre></div><h3 id=integer-overflow>Integer overflow <a class=text-decoration-none href=#integer-overflow>#</a></h3><p>For unsigned integers, the operations <code>+</code>, <code>-</code>, <code>*</code>, and <code>&lt;&lt;</code> are computed modulo 2<sup>n</sup>, where <em>n</em> is the bit width of the unsigned integer&rsquo;s type. In a sense, these unsigned integer operations discard the high bits upon overflow, and programs may rely on &ldquo;wrap around&rdquo;.</p><p>For signed integers, the operations <code>+</code>, <code>-</code>, <code>*</code>, <code>/</code>, and <code>&lt;&lt;</code> may legally overflow and the resulting value exists and is deterministically defined by the signed integer representation. Overflow <strong>does not</strong> cause a runtime panic. A compiler may not optimize code under the assumption that overflow does not occur. For instance, <code>x &lt; x+1</code> may not be assumed to be always true.</p><h3 id=floating-point-operators>Floating-point operators <a class=text-decoration-none href=#floating-point-operators>#</a></h3><p>For floating-point, complex numbers, quaternions, and other floating-point embedded types:</p><ul><li><code>+x</code> is the same as <code>x</code></li><li><code>-x</code> is the negation of <code>x</code></li></ul><p>The result of a floating-point related division by zero is not specified beyond the IEEE-754 standard; a runtime panic will occur.</p><p>An implementation may combine multiple floating-point operations into a single fused operation, and produce a result that differs from the value obtained by executing and rounding the instructions individually.</p><h2 id=advanced-types>Advanced types <a class=text-decoration-none href=#advanced-types>#</a></h2><h3 id=type-alias>Type alias <a class=text-decoration-none href=#type-alias>#</a></h3><p>You can alias a named type with another name:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span>My_Int <span style=color:#f92672>::</span> <span style=color:#66d9ef>int</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>#assert</span>(My_Int <span style=color:#f92672>==</span> <span style=color:#66d9ef>int</span>)
</span></span></code></pre></div><h3 id=distinct-types>Distinct types <a class=text-decoration-none href=#distinct-types>#</a></h3><p>A distinct type allows for the creation of a new type with the same underlying semantics.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span>My_Int <span style=color:#f92672>::</span> <span style=color:#66d9ef>distinct</span> <span style=color:#66d9ef>int</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>#assert</span>(My_Int <span style=color:#f92672>!=</span> <span style=color:#66d9ef>int</span>)
</span></span></code></pre></div><p>Aggregate types (struct, enum, union) will always be distinct even when named.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span>Foo <span style=color:#f92672>::</span> <span style=color:#66d9ef>struct</span> {}
</span></span><span style=display:flex><span><span style=color:#a6e22e>#assert</span>(Foo <span style=color:#f92672>!=</span> <span style=color:#66d9ef>struct</span>{})
</span></span></code></pre></div><h3 id=fixed-arrays>Fixed arrays <a class=text-decoration-none href=#fixed-arrays>#</a></h3><p>An array is a simplified fixed length container. Each element in an array has the same type. An array&rsquo;s index can be any integer, character, or enumeration type.</p><p>An array can be constructed like the following:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span>x <span style=color:#f92672>:=</span> [<span style=color:#a6e22e>5</span>]<span style=color:#66d9ef>int</span>{<span style=color:#a6e22e>1</span>, <span style=color:#a6e22e>2</span>, <span style=color:#a6e22e>3</span>, <span style=color:#a6e22e>4</span>, <span style=color:#a6e22e>5</span>}
</span></span><span style=display:flex><span><span style=color:#66d9ef>for</span> i <span style=color:#66d9ef>in</span> <span style=color:#a6e22e>0</span><span style=color:#f92672>..=</span><span style=color:#a6e22e>4</span> {
</span></span><span style=display:flex><span>	fmt.println(x[i])
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>Fixed arrays are equivalent to a struct with a field for each element. They are just a number of values in a row in memory.</p><p>The notation <code>x[i]</code> is used to access the i-th element of <code>x</code>; and 0-index based (like C).</p><p>The above array can also be constructed with a question mark (<code>?</code>) to automatically infer its length:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span>x <span style=color:#f92672>:=</span> [<span style=color:#960050;background-color:#1e0010>?</span>]<span style=color:#66d9ef>int</span>{<span style=color:#a6e22e>1</span>, <span style=color:#a6e22e>2</span>, <span style=color:#a6e22e>3</span>, <span style=color:#a6e22e>4</span>, <span style=color:#a6e22e>5</span>}
</span></span></code></pre></div><p>Construct an array with designated initializers:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span>favorite_animals <span style=color:#f92672>:=</span> [<span style=color:#960050;background-color:#1e0010>?</span>]<span style=color:#66d9ef>string</span>{
</span></span><span style=display:flex><span>	<span style=color:#75715e>// Assign by index
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>	<span style=color:#a6e22e>0</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;Raven&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>1</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;Zebra&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>2</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;Spider&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#75715e>// Assign by range of indices
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>	<span style=color:#a6e22e>3</span><span style=color:#f92672>..=</span><span style=color:#a6e22e>5</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;Frog&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>6</span><span style=color:#f92672>..&lt;</span><span style=color:#a6e22e>8</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;Cat&#34;</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>The built-in <a href=https://pkg.odin-lang.org/base/builtin/#len><code>len</code></a> proc returns the array&rsquo;s length.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span>x<span style=color:#f92672>:</span> [<span style=color:#a6e22e>5</span>]<span style=color:#66d9ef>int</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>#assert</span>(<span style=color:#66d9ef>len</span>(x) <span style=color:#f92672>==</span> <span style=color:#a6e22e>5</span>)
</span></span></code></pre></div><p>Array access is bounds checked by default, both at compile-time (with constant indices) and at runtime. This can be disabled and enabled at a per block level with the <code>#no_bounds_check</code> and <code>#bounds_check</code> directives, respectively:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span><span style=color:#a6e22e>#no_bounds_check</span> {
</span></span><span style=display:flex><span>	x[n] <span style=color:#f92672>=</span> <span style=color:#a6e22e>123</span> <span style=color:#75715e>// n could be in or out of range of valid indices
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>}
</span></span></code></pre></div><p><code>#no_bounds_check</code> can be used to improve performance when the bounds are known to not exceed.</p><h4 id=array-programming>Array programming <a class=text-decoration-none href=#array-programming>#</a></h4><p>Odin&rsquo;s fixed length arrays support <a href=https://en.wikipedia.org/wiki/Array_programming>array programming</a>.</p><p>Example:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span>Vector3 <span style=color:#f92672>::</span> [<span style=color:#a6e22e>3</span>]<span style=color:#66d9ef>f32</span>
</span></span><span style=display:flex><span>a <span style=color:#f92672>:=</span> Vector3{<span style=color:#a6e22e>1</span>, <span style=color:#a6e22e>4</span>, <span style=color:#a6e22e>9</span>}
</span></span><span style=display:flex><span>b <span style=color:#f92672>:=</span> Vector3{<span style=color:#a6e22e>2</span>, <span style=color:#a6e22e>4</span>, <span style=color:#a6e22e>8</span>}
</span></span><span style=display:flex><span>c <span style=color:#f92672>:=</span> a <span style=color:#f92672>+</span> b  <span style=color:#75715e>// {3, 8, 17}
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>d <span style=color:#f92672>:=</span> a <span style=color:#f92672>*</span> b  <span style=color:#75715e>// {2, 16, 72}
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>e <span style=color:#f92672>:=</span> c <span style=color:#f92672>!=</span> d <span style=color:#75715e>// true
</span></span></span></code></pre></div><p><strong>n.b.</strong> Odin also supports <a href=/docs/overview/#matrix-type><code>matrix</code> types</a>.</p><h5 id=swizzle-operations>Swizzle Operations <a class=text-decoration-none href=#swizzle-operations>#</a></h5><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span>a <span style=color:#f92672>:=</span> [<span style=color:#a6e22e>3</span>]<span style=color:#66d9ef>f32</span>{<span style=color:#a6e22e>10</span>, <span style=color:#a6e22e>20</span>, <span style=color:#a6e22e>30</span>}
</span></span><span style=display:flex><span>b <span style=color:#f92672>:=</span> swizzle(a, <span style=color:#a6e22e>2</span>, <span style=color:#a6e22e>1</span>, <span style=color:#a6e22e>0</span>)
</span></span><span style=display:flex><span>assert(b <span style=color:#f92672>==</span> [<span style=color:#a6e22e>3</span>]<span style=color:#66d9ef>f32</span>{<span style=color:#a6e22e>30</span>, <span style=color:#a6e22e>20</span>, <span style=color:#a6e22e>10</span>})
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>c <span style=color:#f92672>:=</span> swizzle(a, <span style=color:#a6e22e>0</span>, <span style=color:#a6e22e>0</span>)
</span></span><span style=display:flex><span>assert(c <span style=color:#f92672>==</span> [<span style=color:#a6e22e>2</span>]<span style=color:#66d9ef>f32</span>{<span style=color:#a6e22e>10</span>, <span style=color:#a6e22e>10</span>})
</span></span><span style=display:flex><span>assert(c <span style=color:#f92672>==</span> <span style=color:#a6e22e>10</span>) <span style=color:#75715e>// assert all elements == 10
</span></span></span></code></pre></div><p>Builtin implicit swizzle fields are available on any array with length &lt;= 4 as <code>xyzw</code> and <code>rgba</code>.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span>Vector3 <span style=color:#f92672>::</span> <span style=color:#66d9ef>distinct</span> [<span style=color:#a6e22e>3</span>]<span style=color:#66d9ef>f32</span>
</span></span><span style=display:flex><span>a <span style=color:#f92672>:=</span> Vector3{<span style=color:#a6e22e>1</span>, <span style=color:#a6e22e>2</span>, <span style=color:#a6e22e>3</span>}
</span></span><span style=display:flex><span>b <span style=color:#f92672>:=</span> Vector3{<span style=color:#a6e22e>5</span>, <span style=color:#a6e22e>6</span>, <span style=color:#a6e22e>7</span>}
</span></span><span style=display:flex><span>c <span style=color:#f92672>:=</span> (a <span style=color:#f92672>*</span> b)<span style=color:#f92672>/</span><span style=color:#a6e22e>2</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>1</span>
</span></span><span style=display:flex><span>d <span style=color:#f92672>:=</span> c.x <span style=color:#f92672>+</span> c.y <span style=color:#f92672>+</span> c.z
</span></span><span style=display:flex><span>fmt.printf(<span style=color:#e6db74>&#34;%.1f\n&#34;</span>, d) <span style=color:#75715e>// 22.0
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>cross <span style=color:#f92672>::</span> <span style=color:#66d9ef>proc</span>(a, b<span style=color:#f92672>:</span> Vector3) <span style=color:#f92672>-&gt;</span> Vector3 {
</span></span><span style=display:flex><span>	i <span style=color:#f92672>:=</span> swizzle(a, <span style=color:#a6e22e>1</span>, <span style=color:#a6e22e>2</span>, <span style=color:#a6e22e>0</span>) <span style=color:#f92672>*</span> swizzle(b, <span style=color:#a6e22e>2</span>, <span style=color:#a6e22e>0</span>, <span style=color:#a6e22e>1</span>)
</span></span><span style=display:flex><span>	j <span style=color:#f92672>:=</span> swizzle(a, <span style=color:#a6e22e>2</span>, <span style=color:#a6e22e>0</span>, <span style=color:#a6e22e>1</span>) <span style=color:#f92672>*</span> swizzle(b, <span style=color:#a6e22e>1</span>, <span style=color:#a6e22e>2</span>, <span style=color:#a6e22e>0</span>)
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>return</span> i <span style=color:#f92672>-</span> j
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>cross_shorter <span style=color:#f92672>::</span> <span style=color:#66d9ef>proc</span>(a, b<span style=color:#f92672>:</span> Vector3) <span style=color:#f92672>-&gt;</span> Vector3 {
</span></span><span style=display:flex><span>	i <span style=color:#f92672>:=</span> a.yzx <span style=color:#f92672>*</span> b.zxy
</span></span><span style=display:flex><span>	j <span style=color:#f92672>:=</span> a.zxy <span style=color:#f92672>*</span> b.yzx
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>return</span> i <span style=color:#f92672>-</span> j
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>blah <span style=color:#f92672>::</span> <span style=color:#66d9ef>proc</span>(a<span style=color:#f92672>:</span> Vector3) <span style=color:#f92672>-&gt;</span> <span style=color:#66d9ef>f32</span> {
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>return</span> a.x <span style=color:#f92672>+</span> a.y <span style=color:#f92672>+</span> a.z
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>x <span style=color:#f92672>:=</span> cross(a, b)
</span></span><span style=display:flex><span>fmt.println(x)
</span></span><span style=display:flex><span>fmt.println(blah(x))
</span></span></code></pre></div><h3 id=slices>Slices <a class=text-decoration-none href=#slices>#</a></h3><p>Slices look similar to arrays however, their length is not known at compile time. The type <code>[]T</code> is a slice with elements of type <code>T</code>. In practice, slices are much more common than arrays.</p><p>A slice is formed by specifying two indices, a low and high bound, separated by a colon:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span>a[low <span style=color:#f92672>:</span> high]
</span></span></code></pre></div><p>This selects a half-open range which includes the lower element, but excludes the higher element.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span>fibonaccis <span style=color:#f92672>:=</span> [<span style=color:#a6e22e>6</span>]<span style=color:#66d9ef>int</span>{<span style=color:#a6e22e>0</span>, <span style=color:#a6e22e>1</span>, <span style=color:#a6e22e>1</span>, <span style=color:#a6e22e>2</span>, <span style=color:#a6e22e>3</span>, <span style=color:#a6e22e>5</span>}
</span></span><span style=display:flex><span>s<span style=color:#f92672>:</span> []<span style=color:#66d9ef>int</span> <span style=color:#f92672>=</span> fibonaccis[<span style=color:#a6e22e>1</span><span style=color:#f92672>:</span><span style=color:#a6e22e>4</span>] <span style=color:#75715e>// creates a slice which includes elements 1 through 3
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>fmt.println(s) <span style=color:#75715e>// 1, 1, 2
</span></span></span></code></pre></div><p>Slices are like references to arrays; they do not store any data, rather they describe a section, or slice, of underlying data.</p><p>Internally, a slice stores a pointer to the data and an integer to store the length of the slice.</p><p>The built-in <a href=https://pkg.odin-lang.org/base/builtin/#len><code>len</code></a> proc returns the slice&rsquo;s length.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span>x<span style=color:#f92672>:</span> []<span style=color:#66d9ef>int</span> <span style=color:#f92672>=</span> ...
</span></span><span style=display:flex><span>length_of_x <span style=color:#f92672>:=</span> <span style=color:#66d9ef>len</span>(x)
</span></span></code></pre></div><h4 id=slice-literals>Slice literals <a class=text-decoration-none href=#slice-literals>#</a></h4><p>A slice literal is like an array literal without the length.
This is an array literal:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span>[<span style=color:#a6e22e>3</span>]<span style=color:#66d9ef>int</span>{<span style=color:#a6e22e>1</span>, <span style=color:#a6e22e>6</span>, <span style=color:#a6e22e>3</span>}
</span></span></code></pre></div><p>This is a slice literal which creates the same array as above, and then creates a slice that references it:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span>[]<span style=color:#66d9ef>int</span>{<span style=color:#a6e22e>1</span>, <span style=color:#a6e22e>6</span>, <span style=color:#a6e22e>3</span>}
</span></span></code></pre></div><h4 id=slice-shorthand>Slice shorthand <a class=text-decoration-none href=#slice-shorthand>#</a></h4><p>For the array:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span>a<span style=color:#f92672>:</span> [<span style=color:#a6e22e>6</span>]<span style=color:#66d9ef>int</span>
</span></span></code></pre></div><p>these slice expressions are equivalent:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span>a[<span style=color:#a6e22e>0</span><span style=color:#f92672>:</span><span style=color:#a6e22e>6</span>]
</span></span><span style=display:flex><span>a[<span style=color:#f92672>:</span><span style=color:#a6e22e>6</span>]
</span></span><span style=display:flex><span>a[<span style=color:#a6e22e>0</span><span style=color:#f92672>:</span>]
</span></span><span style=display:flex><span>a[<span style=color:#f92672>:</span>]
</span></span></code></pre></div><p>When grabbing a chunk of a slice:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span>a[offset<span style=color:#f92672>:</span>offset<span style=color:#f92672>+</span>length]
</span></span></code></pre></div><p>can also be written:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span>a[offset<span style=color:#f92672>:</span>][<span style=color:#f92672>:</span>length]
</span></span></code></pre></div><h4 id=nil-slices>Nil slices <a class=text-decoration-none href=#nil-slices>#</a></h4><p>The zero value of a slice is <code>nil</code>. A nil slice has a length of 0 and does not point to any underlying memory. Slices can be compared against <code>nil</code> and nothing else.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span>s<span style=color:#f92672>:</span> []<span style=color:#66d9ef>int</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>if</span> s <span style=color:#f92672>==</span> <span style=color:#66d9ef>nil</span> {
</span></span><span style=display:flex><span>	fmt.println(<span style=color:#e6db74>&#34;s is nil!&#34;</span>)
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h4 id=sort-slices>Sort slices <a class=text-decoration-none href=#sort-slices>#</a></h4><p>A slice literal can be sorted in ascending order as follows:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span>s <span style=color:#f92672>:=</span> []<span style=color:#66d9ef>int</span>{<span style=color:#a6e22e>1</span>, <span style=color:#a6e22e>6</span>, <span style=color:#a6e22e>3</span>, <span style=color:#a6e22e>5</span> ,<span style=color:#a6e22e>7</span>, <span style=color:#a6e22e>3</span>, <span style=color:#a6e22e>0</span>}
</span></span><span style=display:flex><span>slice.sort(s)
</span></span></code></pre></div><p>or in descending order</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span>r <span style=color:#f92672>:=</span> []<span style=color:#66d9ef>int</span>{<span style=color:#a6e22e>1</span>, <span style=color:#a6e22e>6</span>, <span style=color:#a6e22e>3</span>, <span style=color:#a6e22e>5</span> ,<span style=color:#a6e22e>7</span>, <span style=color:#a6e22e>3</span>, <span style=color:#a6e22e>0</span>}
</span></span><span style=display:flex><span>slice.reverse_sort(r)
</span></span></code></pre></div><h3 id=dynamic-arrays>Dynamic arrays <a class=text-decoration-none href=#dynamic-arrays>#</a></h3><p>Dynamic arrays are similar to slices, but their lengths may change during runtime. Dynamic arrays are resizeable and they are allocated using the current <a href=#implicit-context-system>context</a>&rsquo;s allocator.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span>x<span style=color:#f92672>:</span> [<span style=color:#66d9ef>dynamic</span>]<span style=color:#66d9ef>int</span>
</span></span></code></pre></div><p>Along with the built-in proc <a href=https://pkg.odin-lang.org/base/builtin/#len><code>len</code></a>, dynamic arrays also have <a href=https://pkg.odin-lang.org/base/builtin/#cap><code>cap</code></a> which can used to determine the dynamic array&rsquo;s current underlying capacity.</p><h4 id=appending-to-a-dynamic-array>Appending to a dynamic array <a class=text-decoration-none href=#appending-to-a-dynamic-array>#</a></h4><p>It is common to append new elements to a dynamic array; this can be done using the built-in <a href=http://pkg.odin-lang.org/base/builtin/#append><code>append</code></a> proc.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span>x<span style=color:#f92672>:</span> [<span style=color:#66d9ef>dynamic</span>]<span style=color:#66d9ef>int</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>append</span>(<span style=color:#f92672>&amp;</span>x, <span style=color:#a6e22e>123</span>)
</span></span><span style=display:flex><span><span style=color:#66d9ef>append</span>(<span style=color:#f92672>&amp;</span>x, <span style=color:#a6e22e>4</span>, <span style=color:#a6e22e>1</span>, <span style=color:#a6e22e>74</span>, <span style=color:#a6e22e>3</span>) <span style=color:#75715e>// append multiple values at once
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>y<span style=color:#f92672>:</span> [<span style=color:#66d9ef>dynamic</span>]<span style=color:#66d9ef>int</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>append</span>(<span style=color:#f92672>&amp;</span>y, ..x[<span style=color:#f92672>:</span>]) <span style=color:#75715e>// append a slice
</span></span></span></code></pre></div><h4 id=inject--assign-to-a-dynamic-array>Inject / Assign to a dynamic array <a class=text-decoration-none href=#inject--assign-to-a-dynamic-array>#</a></h4><p>Injecting into a specific index can be done with <code>inject</code>. It will move other elements upwards when inserted below other elements.</p><p>Assign a type at a specific index can be done with <code>assign</code>. It&rsquo;s the same as doing <code>x[index] = 10</code>.</p><p>Both of these procedures will resize the dynamic array <code>len</code> to the wanted index. This can be seen in the example below.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span>x <span style=color:#f92672>:=</span> <span style=color:#66d9ef>make</span>([<span style=color:#66d9ef>dynamic</span>]<span style=color:#66d9ef>int</span>, <span style=color:#a6e22e>0</span>, <span style=color:#a6e22e>16</span>)
</span></span><span style=display:flex><span>inject_at(<span style=color:#f92672>&amp;</span>x, <span style=color:#a6e22e>0</span>, <span style=color:#a6e22e>10</span>)
</span></span><span style=display:flex><span>inject_at(<span style=color:#f92672>&amp;</span>x, <span style=color:#a6e22e>3</span>, <span style=color:#a6e22e>10</span>) <span style=color:#75715e>// resizes till length
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>fmt.eprintln(x[<span style=color:#f92672>:</span>], <span style=color:#66d9ef>len</span>(x), <span style=color:#66d9ef>cap</span>(x)) <span style=color:#75715e>// [10, 0, 0, 10] 4 16
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>assign_at(<span style=color:#f92672>&amp;</span>x, <span style=color:#a6e22e>3</span>, <span style=color:#a6e22e>20</span>)
</span></span><span style=display:flex><span>assign_at(<span style=color:#f92672>&amp;</span>x, <span style=color:#a6e22e>4</span>, <span style=color:#a6e22e>30</span>)
</span></span><span style=display:flex><span>fmt.eprintln(x[<span style=color:#f92672>:</span>], <span style=color:#66d9ef>len</span>(x), <span style=color:#66d9ef>cap</span>(x)) <span style=color:#75715e>// [10, 0, 0, 20, 30] 5, 16
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>assign_at(<span style=color:#f92672>&amp;</span>x, <span style=color:#a6e22e>5</span>, <span style=color:#a6e22e>40</span>, <span style=color:#a6e22e>50</span>, <span style=color:#a6e22e>60</span>)
</span></span><span style=display:flex><span>fmt.eprintln(x[<span style=color:#f92672>:</span>], <span style=color:#66d9ef>len</span>(x), <span style=color:#66d9ef>cap</span>(x)) <span style=color:#75715e>// [10, 0, 0, 20, 30, 40, 50, 60] 8 16
</span></span></span></code></pre></div><h4 id=removing-from-a-dynamic-array>Removing from a dynamic array <a class=text-decoration-none href=#removing-from-a-dynamic-array>#</a></h4><p>Removing from a dynamic array can be done in several ways using the built-in procedures:</p><ul><li><a href=https://pkg.odin-lang.org/base/builtin/#pop><code>pop</code></a> pops the last element of the array</li><li><a href=https://pkg.odin-lang.org/base/builtin/#unordered_remove><code>unordered_remove</code></a> removes an element at a specific index. <em>Unordered</em> means it is <code>O(1)</code>, since it swaps the last element to the removed location - making the array be <em>sorted</em> differently.</li><li><a href=https://pkg.odin-lang.org/base/builtin/#ordered_remove><code>ordered_remove</code></a> removes an element at a specific index. <em>Ordered</em> means it will move all elements after the index downwards with a <code>copy</code> - ensuring elements remain in the same order.</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span>x<span style=color:#f92672>:</span> [<span style=color:#66d9ef>dynamic</span>]<span style=color:#66d9ef>int</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>append</span>(<span style=color:#f92672>&amp;</span>x, <span style=color:#a6e22e>1</span>, <span style=color:#a6e22e>2</span>, <span style=color:#a6e22e>3</span>, <span style=color:#a6e22e>4</span>, <span style=color:#a6e22e>5</span>) <span style=color:#75715e>// [1, 2, 3, 4, 5]
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>pop(<span style=color:#f92672>&amp;</span>x) <span style=color:#75715e>// [1, 2, 3, 4]
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>ordered_remove(<span style=color:#f92672>&amp;</span>x, <span style=color:#a6e22e>0</span>) <span style=color:#75715e>// [2, 3, 4]
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>unordered_remove(<span style=color:#f92672>&amp;</span>x, <span style=color:#a6e22e>0</span>) <span style=color:#75715e>// [4, 3]
</span></span></span></code></pre></div><p>Other variants can be found in the <a href=https://pkg.odin-lang.org/base/builtin>built-in procedures</a> documentation.</p><h4 id=slice--sort-a-dynamic-array>Slice & Sort a dynamic array <a class=text-decoration-none href=#slice--sort-a-dynamic-array>#</a></h4><p>Although dynamic arrays and slices are different concepts, dynamic arrays can be &lsquo;sliced&rsquo;
and sorted as follows:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span>s<span style=color:#f92672>:</span> [<span style=color:#66d9ef>dynamic</span>]<span style=color:#66d9ef>int</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>append</span>(<span style=color:#f92672>&amp;</span>s, <span style=color:#a6e22e>1</span>, <span style=color:#a6e22e>6</span>, <span style=color:#a6e22e>3</span>, <span style=color:#a6e22e>5</span>, <span style=color:#a6e22e>7</span>, <span style=color:#a6e22e>3</span>, <span style=color:#a6e22e>0</span>) <span style=color:#75715e>// [1, 6, 3, 5, 7, 3, 0]
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>slice.sort(s[<span style=color:#f92672>:</span>]) <span style=color:#75715e>// [0, 1, 3, 3, 5, 6, 7]
</span></span></span></code></pre></div><h4 id=making-and-deleting-slices-and-dynamic-arrays>Making and deleting slices and dynamic arrays <a class=text-decoration-none href=#making-and-deleting-slices-and-dynamic-arrays>#</a></h4><p>Slices and dynamic arrays can be explicitly allocated with the built-in <a href=http://pkg.odin-lang.org/base/builtin/#make><code>make</code></a> proc.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span>a <span style=color:#f92672>:=</span> <span style=color:#66d9ef>make</span>([]<span style=color:#66d9ef>int</span>, <span style=color:#a6e22e>6</span>)           <span style=color:#75715e>// len(a) == 6
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>b <span style=color:#f92672>:=</span> <span style=color:#66d9ef>make</span>([<span style=color:#66d9ef>dynamic</span>]<span style=color:#66d9ef>int</span>, <span style=color:#a6e22e>6</span>)    <span style=color:#75715e>// len(b) == 6, cap(b) == 6
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>c <span style=color:#f92672>:=</span> <span style=color:#66d9ef>make</span>([<span style=color:#66d9ef>dynamic</span>]<span style=color:#66d9ef>int</span>, <span style=color:#a6e22e>0</span>, <span style=color:#a6e22e>6</span>) <span style=color:#75715e>// len(c) == 0, cap(c) == 6
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>d <span style=color:#f92672>:=</span> []<span style=color:#66d9ef>int</span>{<span style=color:#a6e22e>1</span>, <span style=color:#a6e22e>2</span>, <span style=color:#a6e22e>3</span>}           <span style=color:#75715e>// a slice literal, for comparison
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#75715e>// with an explicit allocator:
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>e <span style=color:#f92672>:=</span> <span style=color:#66d9ef>make</span>([]<span style=color:#66d9ef>int</span>, <span style=color:#a6e22e>6</span>, <span style=color:#66d9ef>context</span>.allocator)
</span></span><span style=display:flex><span>f <span style=color:#f92672>:=</span> <span style=color:#66d9ef>make</span>([<span style=color:#66d9ef>dynamic</span>]<span style=color:#66d9ef>int</span>, <span style=color:#a6e22e>0</span>, <span style=color:#a6e22e>6</span>, <span style=color:#66d9ef>context</span>.allocator)
</span></span></code></pre></div><p>Slices and dynamic arrays can be deleted with the built-in <a href=http://pkg.odin-lang.org/base/builtin/#delete><code>delete</code></a> proc.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span><span style=color:#66d9ef>delete</span>(a)
</span></span><span style=display:flex><span><span style=color:#66d9ef>delete</span>(b)
</span></span><span style=display:flex><span><span style=color:#66d9ef>delete</span>(c)
</span></span><span style=display:flex><span><span style=color:#75715e>// delete(d)                  // no need to clean up slice literals
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>delete</span>(e)                     <span style=color:#75715e>// slices are always deleted from context.allocator
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>delete</span>(f)                     <span style=color:#75715e>// dynamic arrays remember their allocator
</span></span></span></code></pre></div><p><strong>Note:</strong> There is no automatic memory management in Odin.</p><h4 id=clearing-a-dynamic-array>Clearing a dynamic array <a class=text-decoration-none href=#clearing-a-dynamic-array>#</a></h4><p>Instead of deleting the array you often want to simply <a href=https://pkg.odin-lang.org/base/builtin/#clear>clear</a> the dynamic array. This will set the length <code>len()</code> to be <code>0</code>, while the capacity <code>cap</code> remains the same.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span>x<span style=color:#f92672>:</span> [<span style=color:#66d9ef>dynamic</span>]<span style=color:#66d9ef>int</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>append</span>(<span style=color:#f92672>&amp;</span>x, <span style=color:#a6e22e>1</span>, <span style=color:#a6e22e>2</span>, <span style=color:#a6e22e>3</span>, <span style=color:#a6e22e>4</span>, <span style=color:#a6e22e>5</span>) <span style=color:#75715e>// [1, 2, 3, 4, 5]
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>fmt.println(<span style=color:#66d9ef>len</span>(x)) <span style=color:#75715e>// 5
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>clear</span>(<span style=color:#f92672>&amp;</span>x) <span style=color:#75715e>// []
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>fmt.println(<span style=color:#66d9ef>len</span>(x)) <span style=color:#75715e>// 0
</span></span></span></code></pre></div><h4 id=resize--reserve-with-a-dynamic-array>Resize / Reserve with a dynamic array <a class=text-decoration-none href=#resize--reserve-with-a-dynamic-array>#</a></h4><p>Often enough we also want to resize or reserve a specific amount for a dynamic array. It&rsquo;s important to understand the difference between the two operations.</p><ul><li><a href=https://pkg.odin-lang.org/base/builtin/#resize>resize</a> will try to resize memory of a passed dynamic array to the requested element count (setting the <code>len</code>, and possibly <code>cap</code>).</li><li><a href=https://pkg.odin-lang.org/base/builtin/#reserve>reserve</a> will try to reserve memory of a passed dynamic array to the requested element count (setting the <code>cap</code>).</li><li><a href=https://pkg.odin-lang.org/base/builtin/#shrink>shrink</a> will shrink the capacity of a dynamic array down to the current length, or the given capacity.</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span>x<span style=color:#f92672>:</span> [<span style=color:#66d9ef>dynamic</span>]<span style=color:#66d9ef>int</span>
</span></span><span style=display:flex><span>fmt.println(<span style=color:#66d9ef>len</span>(x), <span style=color:#66d9ef>cap</span>(x)) <span style=color:#75715e>// 0 0
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>append</span>(<span style=color:#f92672>&amp;</span>x, <span style=color:#a6e22e>1</span>, <span style=color:#a6e22e>2</span>, <span style=color:#a6e22e>3</span>) <span style=color:#75715e>// [1, 2, 3]
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>fmt.println(<span style=color:#66d9ef>len</span>(x), <span style=color:#66d9ef>cap</span>(x)) <span style=color:#75715e>// 3 8
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>resize(<span style=color:#f92672>&amp;</span>x, <span style=color:#a6e22e>5</span>) 
</span></span><span style=display:flex><span>fmt.println(x[<span style=color:#f92672>:</span>]) <span style=color:#75715e>// [1, 2, 3, 0, 0] other values are zero&#39;d memory
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>fmt.println(<span style=color:#66d9ef>len</span>(x), <span style=color:#66d9ef>cap</span>(x)) <span style=color:#75715e>// 5 8
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>reserve(<span style=color:#f92672>&amp;</span>x, <span style=color:#a6e22e>32</span>)
</span></span><span style=display:flex><span>fmt.println(<span style=color:#66d9ef>len</span>(x), <span style=color:#66d9ef>cap</span>(x)) <span style=color:#75715e>// 5 32
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>shrink(<span style=color:#f92672>&amp;</span>x)
</span></span><span style=display:flex><span>fmt.println(<span style=color:#66d9ef>len</span>(x), <span style=color:#66d9ef>cap</span>(x)) <span style=color:#75715e>// 5 5
</span></span></span></code></pre></div><h4 id=small_arrayn-t-container-dynamic-array><code>Small_Array(N, T)</code> container dynamic array <a class=text-decoration-none href=#small_arrayn-t-container-dynamic-array>#</a></h4><p>The <code>core</code> library also contains a container dynamic array <a href=https://github.com/odin-lang/Odin/blob/master/core/container/small_array/small_array.odin>Small_Array(N, T)</a>. It implements most dynamic array procedures while being able to remain on the stack.</p><p>Short Example:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span><span style=color:#f92672>import</span> sa <span style=color:#e6db74>&#34;core:container/small_array&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>x<span style=color:#f92672>:</span> sa.Small_Array(<span style=color:#a6e22e>8</span>, <span style=color:#66d9ef>int</span>)
</span></span><span style=display:flex><span>fmt.println(sa.<span style=color:#66d9ef>len</span>(x), sa.<span style=color:#66d9ef>cap</span>(x)) <span style=color:#75715e>// 0 8
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>sa.<span style=color:#66d9ef>append</span>(<span style=color:#f92672>&amp;</span>x, <span style=color:#a6e22e>1</span>, <span style=color:#a6e22e>2</span>, <span style=color:#a6e22e>3</span>) 
</span></span><span style=display:flex><span>fmt.println(sa.<span style=color:#66d9ef>len</span>(x), sa.<span style=color:#66d9ef>cap</span>(x)) <span style=color:#75715e>// 3 8
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>fmt.println(sa.slice(<span style=color:#f92672>&amp;</span>x)) <span style=color:#75715e>// [1, 2, 3]
</span></span></span></code></pre></div><h3 id=enumerations>Enumerations <a class=text-decoration-none href=#enumerations>#</a></h3><p>Enumeration types define a new type whose values consist of the ones specified. The values are ordered, for example:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span>Direction <span style=color:#f92672>::</span> <span style=color:#66d9ef>enum</span>{North, East, South, West}
</span></span></code></pre></div><p>The following holds:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span><span style=color:#66d9ef>int</span>(Direction.North) <span style=color:#f92672>==</span> <span style=color:#a6e22e>0</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>int</span>(Direction.East)  <span style=color:#f92672>==</span> <span style=color:#a6e22e>1</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>int</span>(Direction.South) <span style=color:#f92672>==</span> <span style=color:#a6e22e>2</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>int</span>(Direction.West)  <span style=color:#f92672>==</span> <span style=color:#a6e22e>3</span>
</span></span></code></pre></div><p>Enum fields can be assigned an explicit value:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span>Foo <span style=color:#f92672>::</span> <span style=color:#66d9ef>enum</span> {
</span></span><span style=display:flex><span>	A,
</span></span><span style=display:flex><span>	B <span style=color:#f92672>=</span> <span style=color:#a6e22e>4</span>, <span style=color:#75715e>// Holes are valid
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>	C <span style=color:#f92672>=</span> <span style=color:#a6e22e>7</span>,
</span></span><span style=display:flex><span>	D <span style=color:#f92672>=</span> <span style=color:#a6e22e>1337</span>,
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>If an enumeration requires a specific size, a backing integer type can be specified. By default, <code>int</code> is used as the backing type for an enumeration.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span>Foo <span style=color:#f92672>::</span> <span style=color:#66d9ef>enum</span> <span style=color:#66d9ef>u8</span> {A, B, C} <span style=color:#75715e>// Foo will only be 8 bits
</span></span></span></code></pre></div><h4 id=implicit-selector-expression>Implicit Selector Expression <a class=text-decoration-none href=#implicit-selector-expression>#</a></h4><p>An <em>implicit selector expression</em> is an abbreviated way to access a member of an enumeration, in a context where type inference can determine the implied type. It has the following form:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span>.member_name
</span></span></code></pre></div><p>For example:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span>Foo <span style=color:#f92672>::</span> <span style=color:#66d9ef>enum</span>{A, B, C}
</span></span><span style=display:flex><span>f<span style=color:#f92672>:</span> Foo
</span></span><span style=display:flex><span>f <span style=color:#f92672>=</span> Foo.A
</span></span><span style=display:flex><span>f <span style=color:#f92672>=</span> .A
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>switch</span> f {
</span></span><span style=display:flex><span><span style=color:#66d9ef>case</span> .A<span style=color:#f92672>:</span>
</span></span><span style=display:flex><span>	fmt.println(<span style=color:#e6db74>&#34;foo&#34;</span>)
</span></span><span style=display:flex><span><span style=color:#66d9ef>case</span> .B<span style=color:#f92672>:</span>
</span></span><span style=display:flex><span>	fmt.println(<span style=color:#e6db74>&#34;bar&#34;</span>)
</span></span><span style=display:flex><span><span style=color:#66d9ef>case</span> .C<span style=color:#f92672>:</span>
</span></span><span style=display:flex><span>	fmt.println(<span style=color:#e6db74>&#34;baz&#34;</span>)
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p><a href=#using-statement><code>using</code></a> can also be used with an enumeration to bring the fields into the current scope:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span>main <span style=color:#f92672>::</span> <span style=color:#66d9ef>proc</span>() {
</span></span><span style=display:flex><span>	Foo <span style=color:#f92672>::</span> <span style=color:#66d9ef>enum</span> {A, B, C}
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>using</span> Foo
</span></span><span style=display:flex><span>	a <span style=color:#f92672>:=</span> A
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p><strong>Note:</strong> Implicit selector expression is preferred to <a href=#using-statement><code>using</code></a> an enumeration as <code>using</code> does pollute the current scope.</p><h4 id=iterating-an-enumeration>Iterating an Enumeration <a class=text-decoration-none href=#iterating-an-enumeration>#</a></h4><p>Enums can be trivially <code>for</code> looped in odin. This way we can loop through the entire <code>enum</code> and do things like printing or inserting into an <em>Enumerated Array</em>.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span>Direction <span style=color:#f92672>::</span> <span style=color:#66d9ef>enum</span>{North, East, South, West}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>for</span> direction, index <span style=color:#66d9ef>in</span> Direction {
</span></span><span style=display:flex><span>	fmt.println(index, direction) 
</span></span><span style=display:flex><span>	<span style=color:#75715e>// 0 North
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>	<span style=color:#75715e>// 1 East
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>	<span style=color:#75715e>// 2 South
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>	<span style=color:#75715e>// 3 West
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>}
</span></span></code></pre></div><h3 id=enumerated-array>Enumerated Array <a class=text-decoration-none href=#enumerated-array>#</a></h3><p><code>Enumerated Arrays</code> allow the use of an <code>Enum</code> to be used as indices to a fixed <code>array</code>.</p><p>We&rsquo;ll extend the <code>Direction</code> enum used previously to add direction vectors.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span>Direction <span style=color:#f92672>::</span> <span style=color:#66d9ef>enum</span>{North, East, South, West}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Direction_Vectors <span style=color:#f92672>::</span> [Direction][<span style=color:#a6e22e>2</span>]<span style=color:#66d9ef>int</span> {
</span></span><span style=display:flex><span>	.North <span style=color:#f92672>=</span> {  <span style=color:#a6e22e>0</span>, <span style=color:#f92672>-</span><span style=color:#a6e22e>1</span> },
</span></span><span style=display:flex><span>	.East <span style=color:#f92672>=</span> { <span style=color:#f92672>+</span><span style=color:#a6e22e>1</span>,  <span style=color:#a6e22e>0</span> },
</span></span><span style=display:flex><span>	.South <span style=color:#f92672>=</span> {  <span style=color:#a6e22e>0</span>, <span style=color:#f92672>+</span><span style=color:#a6e22e>1</span> },
</span></span><span style=display:flex><span>	.West <span style=color:#f92672>=</span> { <span style=color:#f92672>-</span><span style=color:#a6e22e>1</span>,  <span style=color:#a6e22e>0</span> },
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>assert(Direction_Vectors[.North] <span style=color:#f92672>==</span> { <span style=color:#a6e22e>0</span>, <span style=color:#f92672>-</span><span style=color:#a6e22e>1</span> })
</span></span><span style=display:flex><span>assert(Direction_Vectors[.East] <span style=color:#f92672>==</span> { <span style=color:#a6e22e>1</span>, <span style=color:#a6e22e>0</span> })
</span></span><span style=display:flex><span>assert(Direction_Vectors[<span style=color:#66d9ef>cast</span>(Direction) <span style=color:#a6e22e>2</span>] <span style=color:#f92672>==</span> { <span style=color:#a6e22e>0</span>, <span style=color:#a6e22e>1</span> })
</span></span></code></pre></div><p>The <code>#partial</code> directive can be used to initialize an enumerated array <em>partially</em>.</p><p>The <a href=#sparse><code>#sparse</code></a> directive can be used to initialize an enumerated array with an <code>Enum</code> which does not have contiguous values.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span>arr<span style=color:#f92672>:</span> [<span style=color:#66d9ef>enum</span> {A, B, C}]<span style=color:#66d9ef>int</span>
</span></span><span style=display:flex><span>arr <span style=color:#f92672>=</span> <span style=color:#a6e22e>#partial</span> { <span style=color:#75715e>// without partial the compiler would complain
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>	.A <span style=color:#f92672>=</span> <span style=color:#a6e22e>42</span>,
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>fmt.println(arr) <span style=color:#75715e>// [.A = 42, .B = 0, .C = 0]
</span></span></span></code></pre></div><h3 id=bit-sets>Bit sets <a class=text-decoration-none href=#bit-sets>#</a></h3><p>The <code>bit_set</code> type models the mathematical notion of a set. A bit_set&rsquo;s element type can be either an enumeration or a range:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span>Direction <span style=color:#f92672>::</span> <span style=color:#66d9ef>enum</span>{North, East, South, West}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Direction_Set <span style=color:#f92672>::</span> <span style=color:#66d9ef>bit_set</span>[Direction]
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Char_Set <span style=color:#f92672>::</span> <span style=color:#66d9ef>bit_set</span>[<span style=color:#e6db74>&#39;A&#39;</span><span style=color:#f92672>..=</span><span style=color:#e6db74>&#39;Z&#39;</span>]
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Number_Set <span style=color:#f92672>::</span> <span style=color:#66d9ef>bit_set</span>[<span style=color:#a6e22e>0</span><span style=color:#f92672>..&lt;</span><span style=color:#a6e22e>10</span>] <span style=color:#75715e>// bit_set[0..=9]
</span></span></span></code></pre></div><p>Bit sets are implemented as bit vectors internally for high performance. The zero value of a bit set is either <code>nil</code> or <code>{}</code>.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span>x<span style=color:#f92672>:</span> Char_Set
</span></span><span style=display:flex><span>x <span style=color:#f92672>=</span> {<span style=color:#e6db74>&#39;A&#39;</span>, <span style=color:#e6db74>&#39;B&#39;</span>, <span style=color:#e6db74>&#39;Y&#39;</span>}
</span></span><span style=display:flex><span>y<span style=color:#f92672>:</span> Direction_Set
</span></span><span style=display:flex><span>y <span style=color:#f92672>=</span> {.North, .West}
</span></span></code></pre></div><p>Bit sets support the following operations:</p><ul><li><code>A + B</code> - union of two sets (equivalent to <code>A | B</code>)</li><li><code>A - B</code> - difference of two sets (A without B&rsquo;s elements) (equivalent to <code>A &~ B</code>)</li><li><code>A & B</code> - intersection of two sets</li><li><code>A | B</code> - union of two sets (equivalent to <code>A + B</code>)</li><li><code>A &~ B</code> - difference of two sets (A without B&rsquo;s elements) (equivalent to <code>A - B</code>)</li><li><code>A ~ B</code> - symmetric difference (Elements that are in A and B but not both)</li><li><code>A == B</code> - set equality</li><li><code>A != B</code> - set inequality</li><li><code>A &lt;= B</code> - subset relation (A is a subset of B or equal to B)</li><li><code>A &lt; B</code> - strict subset relation (A is a proper subset of B)</li><li><code>A >= B</code> - superset relation (A is a superset of B or equal to B)</li><li><code>A > B</code> - strict superset relation (A is a proper superset of B)</li><li><code>e in A</code> - set membership (A contains element e)</li><li><code>e not_in A</code> - not set membership (A does not contain element e)</li></ul><p>Bit sets are often used to denote flags. This is much cleaner than defining integer constants that need to be bitwise or-ed together.</p><p>If a bit set requires a specific size, the underlying integer type can be specified:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span>Char_Set <span style=color:#f92672>::</span> <span style=color:#66d9ef>bit_set</span>[<span style=color:#e6db74>&#39;A&#39;</span><span style=color:#f92672>..=</span><span style=color:#e6db74>&#39;Z&#39;</span>; <span style=color:#66d9ef>u64</span>]
</span></span><span style=display:flex><span><span style=color:#a6e22e>#assert</span>(size_of(Char_Set) <span style=color:#f92672>==</span> size_of(<span style=color:#66d9ef>u64</span>))
</span></span></code></pre></div><p>To get the number of elements set, its cardinality, of a bit_set, use the built-in card procedure:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span>x<span style=color:#f92672>:</span> Direction_Set
</span></span><span style=display:flex><span>x <span style=color:#f92672>=</span> {.North, .West}
</span></span><span style=display:flex><span>count <span style=color:#f92672>:=</span> card(x)
</span></span><span style=display:flex><span>assert(count <span style=color:#f92672>==</span> <span style=color:#a6e22e>2</span>)
</span></span></code></pre></div><h3 id=pointers>Pointers <a class=text-decoration-none href=#pointers>#</a></h3><p>Odin has pointers. A pointer is a memory address of a value. The type <code>^T</code> is a pointer to a <code>T</code> value. Its zero value is <code>nil</code>.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span>p<span style=color:#f92672>:</span> <span style=color:#f92672>^</span><span style=color:#66d9ef>int</span>
</span></span></code></pre></div><p>The <code>&</code> operator takes the address of its operand (if possible):</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span>i <span style=color:#f92672>:=</span> <span style=color:#a6e22e>123</span>
</span></span><span style=display:flex><span>p <span style=color:#f92672>:=</span> <span style=color:#f92672>&amp;</span>i
</span></span></code></pre></div><p>The <code>^</code> operator dereferences the pointer&rsquo;s underlying value:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span>fmt.println(p<span style=color:#f92672>^</span>) <span style=color:#75715e>// read `i` through the pointer `p`
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>p<span style=color:#f92672>^</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>1337</span>       <span style=color:#75715e>// write `i` through the pointer `p`
</span></span></span></code></pre></div><p><strong>Note:</strong> C programmers may be used to using <code>*</code> to denote pointers. In Odin, the <code>^</code> syntax is borrowed from Pascal. This is to keep the convention of the type on the left and its usage on the right:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span>p<span style=color:#f92672>:</span> <span style=color:#f92672>^</span><span style=color:#66d9ef>int</span> <span style=color:#75715e>// ^ on the left
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>x <span style=color:#f92672>:=</span> p<span style=color:#f92672>^</span> <span style=color:#75715e>// ^ on the right
</span></span></span></code></pre></div><p><strong>Note:</strong> Unlike C, Odin has no pointer arithmetic. If you need a form of pointer arithmetic, please use the <code>ptr_offset</code> and <code>ptr_sub</code> procedures in the <code>"core:mem"</code> package.</p><h3 id=structs>Structs <a class=text-decoration-none href=#structs>#</a></h3><p>A <code>struct</code> is a record type in Odin. It is a collection of fields. Struct fields are accessed by using a dot:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span>Vector2 <span style=color:#f92672>::</span> <span style=color:#66d9ef>struct</span> {
</span></span><span style=display:flex><span>	x<span style=color:#f92672>:</span> <span style=color:#66d9ef>f32</span>,
</span></span><span style=display:flex><span>	y<span style=color:#f92672>:</span> <span style=color:#66d9ef>f32</span>,
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>v <span style=color:#f92672>:=</span> Vector2{<span style=color:#a6e22e>1</span>, <span style=color:#a6e22e>2</span>}
</span></span><span style=display:flex><span>v.x <span style=color:#f92672>=</span> <span style=color:#a6e22e>4</span>
</span></span><span style=display:flex><span>fmt.println(v.x)
</span></span></code></pre></div><p>Struct fields can be accessed through a struct pointer:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span>v <span style=color:#f92672>:=</span> Vector2{<span style=color:#a6e22e>1</span>, <span style=color:#a6e22e>2</span>}
</span></span><span style=display:flex><span>p <span style=color:#f92672>:=</span> <span style=color:#f92672>&amp;</span>v
</span></span><span style=display:flex><span>p.x <span style=color:#f92672>=</span> <span style=color:#a6e22e>1335</span>
</span></span><span style=display:flex><span>fmt.println(v)
</span></span></code></pre></div><p>We could write <code>p^.x</code>, however, it is nice to not have to explicitly dereference the pointer. This is very useful when refactoring code to use a pointer rather than a value, and vice versa.</p><h4 id=struct-literals>Struct literals <a class=text-decoration-none href=#struct-literals>#</a></h4><p>A struct literal can be denoted by providing the struct&rsquo;s type followed by <code>{}</code>. A struct literal must either provide all the arguments or none:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span>Vector3 <span style=color:#f92672>::</span> <span style=color:#66d9ef>struct</span> {
</span></span><span style=display:flex><span>	x, y, z<span style=color:#f92672>:</span> <span style=color:#66d9ef>f32</span>,
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>v<span style=color:#f92672>:</span> Vector3
</span></span><span style=display:flex><span>v <span style=color:#f92672>=</span> Vector3{} <span style=color:#75715e>// Zero value
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>v <span style=color:#f92672>=</span> Vector3{<span style=color:#a6e22e>1</span>, <span style=color:#a6e22e>4</span>, <span style=color:#a6e22e>9</span>}
</span></span></code></pre></div><p>You can list just a subset of the fields if you specify the field by name (the order of the named fields does not matter):</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span>v <span style=color:#f92672>:=</span> Vector3{z<span style=color:#f92672>=</span><span style=color:#a6e22e>1</span>, y<span style=color:#f92672>=</span><span style=color:#a6e22e>2</span>}
</span></span><span style=display:flex><span>assert(v.x <span style=color:#f92672>==</span> <span style=color:#a6e22e>0</span>)
</span></span><span style=display:flex><span>assert(v.y <span style=color:#f92672>==</span> <span style=color:#a6e22e>2</span>)
</span></span><span style=display:flex><span>assert(v.z <span style=color:#f92672>==</span> <span style=color:#a6e22e>1</span>)
</span></span></code></pre></div><p>Structs can be nested by defining a field as a struct.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span>Foo <span style=color:#f92672>::</span> <span style=color:#66d9ef>struct</span> {
</span></span><span style=display:flex><span>	a, b, c<span style=color:#f92672>:</span> <span style=color:#66d9ef>int</span>,
</span></span><span style=display:flex><span>	
</span></span><span style=display:flex><span>	bar_1<span style=color:#f92672>:</span> <span style=color:#66d9ef>struct</span> {
</span></span><span style=display:flex><span>		x, y, z<span style=color:#f92672>:</span> <span style=color:#66d9ef>int</span>,
</span></span><span style=display:flex><span>	},
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	bar_2<span style=color:#f92672>:</span> <span style=color:#66d9ef>struct</span> {
</span></span><span style=display:flex><span>		x, y, z<span style=color:#f92672>:</span> <span style=color:#66d9ef>int</span>,
</span></span><span style=display:flex><span>	},
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	_<span style=color:#f92672>:</span> <span style=color:#66d9ef>struct</span> {
</span></span><span style=display:flex><span>		x, y, z<span style=color:#f92672>:</span> <span style=color:#66d9ef>int</span>,
</span></span><span style=display:flex><span>	},
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h4 id=struct-directives>Struct directives <a class=text-decoration-none href=#struct-directives>#</a></h4><p>Structs can be annotated with different memory layout and alignment requirements:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span><span style=color:#66d9ef>struct</span> <span style=color:#a6e22e>#align</span>(<span style=color:#a6e22e>4</span>) {...} <span style=color:#75715e>// align to 4 bytes
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>struct</span> <span style=color:#a6e22e>#packed</span> {...} <span style=color:#75715e>// remove padding between fields
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>struct</span> <span style=color:#a6e22e>#raw_union</span> {...} <span style=color:#75715e>// all fields share the same offset (0). This is the same as C&#39;s union
</span></span></span></code></pre></div><h4 id=struct-field-tags>Struct field tags <a class=text-decoration-none href=#struct-field-tags>#</a></h4><p>Struct fields can be tagged with a string literal to attach meta-information which can be used with runtime-type information. Usually this is used to provide transactional information info on how a struct field is encoded to or decoded from another format, but you can store whatever you want within the string literal</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span>User <span style=color:#f92672>::</span> <span style=color:#66d9ef>struct</span> {
</span></span><span style=display:flex><span>	flag<span style=color:#f92672>:</span> <span style=color:#66d9ef>bool</span>, <span style=color:#75715e>// untagged field
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>	age<span style=color:#f92672>:</span>  <span style=color:#66d9ef>int</span>    <span style=color:#e6db74>&#34;custom whatever information&#34;</span>,
</span></span><span style=display:flex><span>	name<span style=color:#f92672>:</span> <span style=color:#66d9ef>string</span> <span style=color:#e6db74>`json:&#34;username&#34; xml:&#34;user-name&#34; fmt:&#34;q&#34;`</span>, <span style=color:#75715e>// `core:reflect` layout
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>}
</span></span></code></pre></div><p>Within Odin&rsquo;s core library, the standard convention is to store a <code>key</code> that denotes the package and then a subsequence <code>"value"</code>. For example, <code>json</code> keys are processed and used by <code>core:encoding/json</code> package, <code>fmt</code> keys are processed by <code>core:fmt</code>.</p><p>If multiple information is to be passed in the <code>"value"</code>, usually it is specified by separating it with a common (<code>,</code>), e.g.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span>name<span style=color:#f92672>:</span> <span style=color:#66d9ef>string</span> <span style=color:#960050;background-color:#1e0010>`</span>json<span style=color:#f92672>:</span><span style=color:#e6db74>&#34;username,omitempty&#34;</span>,
</span></span></code></pre></div><p>n.b. Field tags also exist for <a href=#bit-fields><code>bit_field</code> record types</a>.</p><h3 id=unions>Unions <a class=text-decoration-none href=#unions>#</a></h3><p>A <code>union</code> in Odin is a discriminated union, also known as a tagged union or sum type. The zero value of a union is <code>nil</code>.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span>Value <span style=color:#f92672>::</span> <span style=color:#66d9ef>union</span> {
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>bool</span>,
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>i32</span>,
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>f32</span>,
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>string</span>,
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>v<span style=color:#f92672>:</span> Value
</span></span><span style=display:flex><span>v <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;Hellope&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// type assert that `v` is a `string` and panic otherwise
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>s1 <span style=color:#f92672>:=</span> v.(<span style=color:#66d9ef>string</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// type assert but with an explicit boolean check. This will not panic
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>s2, ok <span style=color:#f92672>:=</span> v.(<span style=color:#66d9ef>string</span>)
</span></span></code></pre></div><h4 id=type-switch-statement>Type switch statement <a class=text-decoration-none href=#type-switch-statement>#</a></h4><p>A type switch is a construct that allows several type assertions in series. A type switch is like a regular switch statement, but the cases are types (not values). For a union, the only case types allowed are that of the union.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span>value<span style=color:#f92672>:</span> Value <span style=color:#f92672>=</span> ...
</span></span><span style=display:flex><span><span style=color:#66d9ef>switch</span> v <span style=color:#66d9ef>in</span> value {
</span></span><span style=display:flex><span><span style=color:#66d9ef>case</span> <span style=color:#66d9ef>string</span><span style=color:#f92672>:</span>
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>#assert</span>(type_of(v) <span style=color:#f92672>==</span> <span style=color:#66d9ef>string</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>case</span> <span style=color:#66d9ef>bool</span><span style=color:#f92672>:</span>
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>#assert</span>(type_of(v) <span style=color:#f92672>==</span> <span style=color:#66d9ef>bool</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>case</span> <span style=color:#66d9ef>i32</span>, <span style=color:#66d9ef>f32</span><span style=color:#f92672>:</span>
</span></span><span style=display:flex><span>	<span style=color:#75715e>// This case allows for multiple types, therefore we cannot know which type to use
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>	<span style=color:#75715e>// `v` remains the original union value
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>	<span style=color:#a6e22e>#assert</span>(type_of(v) <span style=color:#f92672>==</span> Value)
</span></span><span style=display:flex><span><span style=color:#66d9ef>case</span><span style=color:#f92672>:</span>
</span></span><span style=display:flex><span>	<span style=color:#75715e>// Default case
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>	<span style=color:#75715e>// In this case, it is `nil`
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>}
</span></span></code></pre></div><h4 id=union-tags>Union tags <a class=text-decoration-none href=#union-tags>#</a></h4><p>Applying the <code>#no_nil</code> tag to a union type states it does not have a <code>nil</code> value. Unions with <code>#no_nil</code> must have at least two variants and the first variant is its default type:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span>Value <span style=color:#f92672>::</span> <span style=color:#66d9ef>union</span> <span style=color:#a6e22e>#no_nil</span> {<span style=color:#66d9ef>bool</span>, <span style=color:#66d9ef>string</span>}
</span></span><span style=display:flex><span>v<span style=color:#f92672>:</span> Value
</span></span><span style=display:flex><span>_, ok <span style=color:#f92672>:=</span> v.(<span style=color:#66d9ef>bool</span>)
</span></span><span style=display:flex><span>assert(ok)
</span></span></code></pre></div><p>The <code>#shared_nil</code> tag normalizes each variant&rsquo;s <code>nil</code> value into <code>nil</code> on assignment. If you assign <code>nil</code> or <a href=#zero-values>zero values</a> to a union with <code>#shared_nil</code> the union will be <code>nil</code>. Unions with <code>#shared_nil</code> require all variants to have a <code>nil</code> value.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span>Error <span style=color:#f92672>::</span> <span style=color:#66d9ef>union</span> <span style=color:#a6e22e>#shared_nil</span> {
</span></span><span style=display:flex><span>	File_Error,
</span></span><span style=display:flex><span>	Memory_Error,
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>File_Error <span style=color:#f92672>::</span> <span style=color:#66d9ef>enum</span> {
</span></span><span style=display:flex><span>	None <span style=color:#f92672>=</span> <span style=color:#a6e22e>0</span>,
</span></span><span style=display:flex><span>	File_Not_Found,
</span></span><span style=display:flex><span>	Cannot_Open_File,
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Memory_Error <span style=color:#f92672>::</span> <span style=color:#66d9ef>enum</span> {
</span></span><span style=display:flex><span>	None <span style=color:#f92672>=</span> <span style=color:#a6e22e>0</span>,
</span></span><span style=display:flex><span>	Allocation_Failed,
</span></span><span style=display:flex><span>	Resize_Failed,
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>shared_nil_example <span style=color:#f92672>::</span> <span style=color:#66d9ef>proc</span>() {
</span></span><span style=display:flex><span>	an_error<span style=color:#f92672>:</span> Error
</span></span><span style=display:flex><span>	an_error <span style=color:#f92672>=</span> File_Error.None
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	assert(an_error <span style=color:#f92672>==</span> <span style=color:#66d9ef>nil</span>)
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>Unions also have the <code>#align</code> tag, like structures:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span><span style=color:#66d9ef>union</span> <span style=color:#a6e22e>#align</span>(<span style=color:#a6e22e>4</span>) {...} <span style=color:#75715e>// align to 4 bytes
</span></span></span></code></pre></div><h3 id=maps>Maps <a class=text-decoration-none href=#maps>#</a></h3><p>A <code>map</code> maps keys to values. The zero value of a map is <code>nil</code>. A <code>nil</code> map has no keys. The built-in <a href=http://pkg.odin-lang.org/base/builtin/#make><code>make</code></a> proc returns an initialized map using the current <a href=#implicit-context-system>context</a>, and <a href=http://pkg.odin-lang.org/base/builtin/#delete><code>delete</code></a> can be used to delete a map.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span>m <span style=color:#f92672>:=</span> <span style=color:#66d9ef>make</span>(<span style=color:#66d9ef>map</span>[<span style=color:#66d9ef>string</span>]<span style=color:#66d9ef>int</span>)
</span></span><span style=display:flex><span><span style=color:#66d9ef>defer</span> <span style=color:#66d9ef>delete</span>(m)
</span></span><span style=display:flex><span>m[<span style=color:#e6db74>&#34;Bob&#34;</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>2</span>
</span></span><span style=display:flex><span>fmt.println(m[<span style=color:#e6db74>&#34;Bob&#34;</span>])
</span></span></code></pre></div><p>To insert or update an element of a map:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span>m[key] <span style=color:#f92672>=</span> elem
</span></span></code></pre></div><p>To retrieve an element:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span>elem <span style=color:#f92672>=</span> m[key]
</span></span></code></pre></div><p>To remove an element:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span>delete_key(<span style=color:#f92672>&amp;</span>m, key)
</span></span></code></pre></div><p>If an element of a key does not exist, the zero value of the element will be returned. Checking to see if an element exists can be done in two ways:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span>elem, ok <span style=color:#f92672>:=</span> m[key] <span style=color:#75715e>// `ok` is true if the element for that key exists
</span></span></span></code></pre></div><p>or</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span>ok <span style=color:#f92672>:=</span> key <span style=color:#66d9ef>in</span> m <span style=color:#75715e>// `ok` is true if the element for that key exists
</span></span></span></code></pre></div><p>The first approach is called the &ldquo;comma ok idiom&rdquo;.</p><p>You can also initialize maps with map literals:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span>m <span style=color:#f92672>:=</span> <span style=color:#66d9ef>map</span>[<span style=color:#66d9ef>string</span>]<span style=color:#66d9ef>int</span>{
</span></span><span style=display:flex><span>	<span style=color:#e6db74>&#34;Bob&#34;</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>2</span>,
</span></span><span style=display:flex><span>	<span style=color:#e6db74>&#34;Chloe&#34;</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>5</span>,
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p><strong>Note:</strong> To enable compound literals for <code>map</code>s, <code>#+feature dynamic-literals</code> must be enabled per file. This is because dynamic literals will use the current <code>context.allocator</code> and thus implicitly allocate. The opt-in feature is there in order for Odin to not implicitly allocate by default and not give the user any surprises.</p><p>Modifying existing map slots needs to be done in two steps. However assigning to a struct field is prohibited.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span>Test <span style=color:#f92672>::</span> <span style=color:#66d9ef>struct</span> {
</span></span><span style=display:flex><span>	x<span style=color:#f92672>:</span> <span style=color:#66d9ef>int</span>,
</span></span><span style=display:flex><span>	y<span style=color:#f92672>:</span> <span style=color:#66d9ef>int</span>,
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>m <span style=color:#f92672>:=</span> <span style=color:#66d9ef>map</span>[<span style=color:#66d9ef>string</span>]Test{
</span></span><span style=display:flex><span>	<span style=color:#e6db74>&#34;Bob&#34;</span> <span style=color:#f92672>=</span> { <span style=color:#a6e22e>0</span>, <span style=color:#a6e22e>0</span> },
</span></span><span style=display:flex><span>	<span style=color:#e6db74>&#34;Chloe&#34;</span> <span style=color:#f92672>=</span> { <span style=color:#a6e22e>1</span>, <span style=color:#a6e22e>1</span> },
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>value, ok <span style=color:#f92672>:=</span> <span style=color:#f92672>&amp;</span>m[<span style=color:#e6db74>&#34;Bob&#34;</span>]
</span></span><span style=display:flex><span><span style=color:#66d9ef>if</span> ok {
</span></span><span style=display:flex><span>	value<span style=color:#f92672>^</span> <span style=color:#f92672>=</span> { <span style=color:#a6e22e>2</span>, <span style=color:#a6e22e>2</span> }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>fmt.println(m[<span style=color:#e6db74>&#34;Bob&#34;</span>]) <span style=color:#75715e>// { 2, 2 }
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>m[<span style=color:#e6db74>&#34;Bob&#34;</span>] <span style=color:#f92672>=</span> { <span style=color:#a6e22e>3</span>, <span style=color:#a6e22e>3</span> }
</span></span><span style=display:flex><span>fmt.println(m[<span style=color:#e6db74>&#34;Bob&#34;</span>]) <span style=color:#75715e>// { 3, 3 }
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>m[<span style=color:#e6db74>&#34;Chloe&#34;</span>].x <span style=color:#f92672>=</span> <span style=color:#a6e22e>0</span> <span style=color:#75715e>// PROHIBITED
</span></span></span></code></pre></div><h4 id=map-container-calls>Map Container Calls <a class=text-decoration-none href=#map-container-calls>#</a></h4><p>The built-in map also supports all the standard container calls that can be found with the <a href=#dynamic-arrays>dynamic array</a>.</p><p>Short:</p><ul><li><code>len(some_map)</code> returns the amount of slots used up</li><li><code>cap(some_map)</code> returns the capacity of the map - the map will reallocate when exceeded</li><li><code>clear(&amp;some_map)</code> clears the entire map - dynamically allocated content needs to be freed manually</li><li><code>reserve(&amp;some_map, capacity)</code> reserves the requested element count</li><li><code>shrink(&amp;some_map)</code> shrink the capacity down to the current length</li></ul><h3 id=bit-fields>Bit Fields <a class=text-decoration-none href=#bit-fields>#</a></h3><p>A <code>bit_field</code> is a record type in Odin that is akin to a bit-packed struct. <strong>Note:</strong> <code>bit_field</code> is <strong>not</strong> equivalent to <code>bit_set</code> as it has different semantics and use cases. <code>bit_field</code> fields are accessed by using a dot:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span>Foo <span style=color:#f92672>::</span> bit_field <span style=color:#66d9ef>u16</span> { <span style=color:#75715e>// backing type must be an integer or array of integers
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    x<span style=color:#f92672>:</span> <span style=color:#66d9ef>i32</span>     <span style=color:#f92672>|</span> <span style=color:#a6e22e>3</span>, <span style=color:#75715e>// signed integers will be signed extended on use
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    y<span style=color:#f92672>:</span> <span style=color:#66d9ef>u16</span>     <span style=color:#f92672>|</span> <span style=color:#a6e22e>2</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>3</span>, <span style=color:#75715e>// general expressions
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    z<span style=color:#f92672>:</span> My_Enum <span style=color:#f92672>|</span> foo.SOME_CONSTANT, <span style=color:#75715e>// ability to define the bit-width elsewhere
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    w<span style=color:#f92672>:</span> <span style=color:#66d9ef>bool</span>    <span style=color:#f92672>|</span> <span style=color:#a6e22e>2</span> <span style=color:#66d9ef>when</span> foo.SOME_CONSTANT <span style=color:#f92672>&gt;</span> <span style=color:#a6e22e>10</span> <span style=color:#66d9ef>else</span> <span style=color:#a6e22e>1</span>,
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>v <span style=color:#f92672>:=</span> Foo{}
</span></span><span style=display:flex><span>v.x <span style=color:#f92672>=</span> <span style=color:#a6e22e>3</span> <span style=color:#75715e>// truncates the value to fit into 3 bits
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>fmt.println(v.x) <span style=color:#75715e>// accessing will convert `v.x` to an `i32` and do an appropriate sign extension
</span></span></span></code></pre></div><p>A <code>bit_field</code> is different from a <code>struct</code> in that you must specify the backing type. This backing type must be an integer or a fixed-length array of integers. This is useful if there needs to be a specific alignment or access pattern for the record.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span>Foo <span style=color:#f92672>::</span> bit_field <span style=color:#66d9ef>u32</span> {...}
</span></span><span style=display:flex><span>Foo <span style=color:#f92672>::</span> bit_field [<span style=color:#a6e22e>4</span>]<span style=color:#66d9ef>u8</span> {...}
</span></span></code></pre></div><p>Notes:</p><ul><li>If <em>all</em> of the fields in a <code>bit_field</code> are 1-bit in size and are a boolean, please consider using a <a href=#bit-sets><code>bit_set</code></a> instead.</li><li>Odin&rsquo;s <code>bit_field</code> and C&rsquo;s bit-fields might not be compatible<ul><li>Odin&rsquo;s <code>bit_field</code>s have a well defined layout (Least-Significant-Bit)</li><li>C&rsquo;s bit fields on <code>struct</code>s are undefined and are not portable across targets and compilers</li></ul></li></ul><h3 id=procedure-type>Procedure type <a class=text-decoration-none href=#procedure-type>#</a></h3><p>A procedure type is internally a pointer to a procedure in memory. <code>nil</code> is the zero value a procedure type.</p><p>Examples:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span><span style=color:#66d9ef>proc</span>(x<span style=color:#f92672>:</span> <span style=color:#66d9ef>int</span>) <span style=color:#f92672>-&gt;</span> <span style=color:#66d9ef>bool</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>proc</span>(c<span style=color:#f92672>:</span> <span style=color:#66d9ef>proc</span>(x<span style=color:#f92672>:</span> <span style=color:#66d9ef>int</span>) <span style=color:#f92672>-&gt;</span> <span style=color:#66d9ef>bool</span>) <span style=color:#f92672>-&gt;</span> (<span style=color:#66d9ef>i32</span>, <span style=color:#66d9ef>f32</span>)
</span></span></code></pre></div><p>Or you can assign them to a variable:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span>Callback <span style=color:#f92672>::</span> <span style=color:#66d9ef>proc</span>() <span style=color:#f92672>-&gt;</span> <span style=color:#66d9ef>int</span> 
</span></span><span style=display:flex><span>a<span style=color:#f92672>:</span> Callback <span style=color:#75715e>// nil 
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>assert(a <span style=color:#f92672>==</span> <span style=color:#66d9ef>nil</span>)
</span></span><span style=display:flex><span>a <span style=color:#f92672>=</span> <span style=color:#66d9ef>proc</span>() <span style=color:#f92672>-&gt;</span> <span style=color:#66d9ef>int</span> { <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>0</span> }
</span></span><span style=display:flex><span>fmt.println(a()) <span style=color:#75715e>// 0
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>a <span style=color:#f92672>=</span> <span style=color:#66d9ef>proc</span>() <span style=color:#f92672>-&gt;</span> <span style=color:#66d9ef>int</span> { <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>100</span> }
</span></span><span style=display:flex><span>fmt.println(a()) <span style=color:#75715e>// 100
</span></span></span></code></pre></div><h4 id=calling-conventions>Calling conventions <a class=text-decoration-none href=#calling-conventions>#</a></h4><p>Odin supports the following calling conventions:</p><ul><li><strong>odin</strong> - default convention used for an Odin <strong>proc</strong>. It is the same as <strong>cdecl</strong> but passes an implicit <code>context</code> pointer on each call. (<strong>Note:</strong> This is subject to change)</li><li><strong>contextless</strong> - This is the same as <strong>odin</strong> but without the implicit <code>context</code> pointer.</li><li><strong>stdcall</strong> or <strong>std</strong> &ndash; This is the stdcall convention as specified by Microsoft.</li><li><strong>cdecl</strong> or <strong>c</strong> &ndash; This is the default calling convention generated of a procedure in C.</li><li><strong>fastcall</strong> or <strong>fast</strong> - This is a compiler dependent calling convention.</li><li><strong>none</strong> - This is a compiler dependent calling convention which will do nothing to parameters.</li></ul><p>Most calling conventions exist only to interface with foreign Windows code.</p><p>The default calling convention is <strong>odin</strong>, unless it is within a <code>foreign</code> block, where it is then <strong>cdecl</strong>.</p><p>A procedure type with a different calling convention can be declared like the following:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span><span style=color:#66d9ef>proc</span> <span style=color:#e6db74>&#34;c&#34;</span> (n<span style=color:#f92672>:</span> <span style=color:#66d9ef>i32</span>, data<span style=color:#f92672>:</span> <span style=color:#66d9ef>rawptr</span>)
</span></span><span style=display:flex><span><span style=color:#66d9ef>proc</span> <span style=color:#e6db74>&#34;contextless&#34;</span> (s<span style=color:#f92672>:</span> []<span style=color:#66d9ef>int</span>)
</span></span></code></pre></div><p>Procedure types are only compatible with the procedures that have the same calling convention and parameter types.</p><p>When binding to C libraries you&rsquo;ll often end up using <code>proc "c"</code> and also set the current context. For this you&rsquo;ll need to <a href=#explicit-context-definition>explicitly set the context</a>.</p><h3 id=typeid-type><code>typeid</code> type <a class=text-decoration-none href=#typeid-type>#</a></h3><p>A <code>typeid</code> is a unique identifier for an Odin type. This construct is used by the <code>any</code> type to denote what the underlying data&rsquo;s type is.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span>a <span style=color:#f92672>:=</span> typeid_of(<span style=color:#66d9ef>bool</span>)
</span></span><span style=display:flex><span>i<span style=color:#f92672>:</span> <span style=color:#66d9ef>int</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>123</span>
</span></span><span style=display:flex><span>b <span style=color:#f92672>:=</span> typeid_of(type_of(i))
</span></span></code></pre></div><p>A <code>typeid</code> can be mapped to relevant type information which can be used in applications such as printing types and editing data:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span><span style=color:#f92672>import</span> <span style=color:#e6db74>&#34;base:runtime&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>main <span style=color:#f92672>::</span> <span style=color:#66d9ef>proc</span>() {
</span></span><span style=display:flex><span>	u <span style=color:#f92672>:=</span> <span style=color:#66d9ef>u8</span>(<span style=color:#a6e22e>123</span>)
</span></span><span style=display:flex><span>	id <span style=color:#f92672>:=</span> typeid_of(type_of(u))
</span></span><span style=display:flex><span>	info<span style=color:#f92672>:</span> <span style=color:#f92672>^</span>runtime.Type_Info
</span></span><span style=display:flex><span>	info <span style=color:#f92672>=</span> type_info_of(id)
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h3 id=any-type><code>any</code> Type <a class=text-decoration-none href=#any-type>#</a></h3><p>An <code>any</code> type can reference any data type. Internally it contains a pointer to the underlying data and its relevant <code>typeid</code>. This is a very useful construct in order to have a runtime type safe printing procedure.</p><p><strong>Note:</strong> The <code>any</code> value is only valid for as long as the underlying data is still valid. Passing a literal to an <code>any</code> will allocate the literal in the current stack frame.</p><p><strong>Note:</strong> It is highly recommended that you <strong>do not</strong> use this unless you know what you are doing. Its primary use is for printing procedures.</p><h3 id=multi-pointers>Multi Pointers <a class=text-decoration-none href=#multi-pointers>#</a></h3><p>Multi-Pointers in Odin are a way to describe <a href=#foreign-system><code>foreign</code></a> (C-like) pointers which act like arrays (pointers that map to multiple items). The type <code>[^]T</code> is a multi-pointer to T value(s). Its zero value is <code>nil</code>.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span>p<span style=color:#f92672>:</span> [<span style=color:#f92672>^</span>]<span style=color:#66d9ef>int</span>
</span></span></code></pre></div><p>What multi-pointers support:</p><ul><li>Index (without any bounds checking)</li><li>Slicing (bounds checking on if both the low and high operands are given)</li><li>Implicit conversions between <code>^T</code> and <code>[^]T</code></li><li>Implicit conversion to <code>rawptr</code> (like all pointers)</li></ul><p>What multi-pointers DO NOT SUPPORT:</p><ul><li>Dereferencing (which makes it closer to a slim-slice than a pointer)</li></ul><p>The main purpose of this type is to aid with <code>foreign</code> code and act as a way to auto-document functionality and allow for easier transition to Odin code, especially converting pointers into slices.</p><p>The following are the rules for indexing and slicing for multi-pointers, and what type they produce depending on the operands given:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span>x<span style=color:#f92672>:</span> [<span style=color:#f92672>^</span>]T <span style=color:#f92672>=</span> ...
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>x[i]   <span style=color:#f92672>-&gt;</span> T
</span></span><span style=display:flex><span>x[<span style=color:#f92672>:</span>]   <span style=color:#f92672>-&gt;</span> [<span style=color:#f92672>^</span>]T
</span></span><span style=display:flex><span>x[i<span style=color:#f92672>:</span>]  <span style=color:#f92672>-&gt;</span> [<span style=color:#f92672>^</span>]T
</span></span><span style=display:flex><span>x[<span style=color:#f92672>:</span>n]  <span style=color:#f92672>-&gt;</span> []T
</span></span><span style=display:flex><span>x[i<span style=color:#f92672>:</span>n] <span style=color:#f92672>-&gt;</span> []T
</span></span></code></pre></div><p>Interacting with Multi-Pointers is easiest using the builtin <code>raw_data()</code> call which can return a Multi-Pointer.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span>a<span style=color:#f92672>:</span> [<span style=color:#f92672>^</span>]<span style=color:#66d9ef>int</span>
</span></span><span style=display:flex><span>fmt.println(a) <span style=color:#75715e>// &lt;nil&gt;
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>b <span style=color:#f92672>:=</span> [<span style=color:#960050;background-color:#1e0010>?</span>]<span style=color:#66d9ef>int</span> { <span style=color:#a6e22e>10</span>, <span style=color:#a6e22e>20</span>, <span style=color:#a6e22e>30</span> }
</span></span><span style=display:flex><span>a <span style=color:#f92672>=</span> raw_data(b[<span style=color:#f92672>:</span>]) 
</span></span><span style=display:flex><span>fmt.println(a, a[<span style=color:#a6e22e>1</span>], b) <span style=color:#75715e>// 0x7FFCBE9FE688 20 [10, 20, 30]
</span></span></span></code></pre></div><p><strong>Note:</strong> The name of multi-pointers may be subject to change.</p><h3 id=soa-data-types>SOA Data Types <a class=text-decoration-none href=#soa-data-types>#</a></h3><p><em>Array of Structures (AoS)</em>, <em>Structure of Arrays (SoA)</em>, and <em>Array of Structures of Arrays (AoSoA)</em> refer to differing ways to arrange a sequence of data records in memory, with regard to interleaving. These are of interest in SIMD and SIMT programming.</p><h4 id=soa-struct-arrays>SOA Struct Arrays <a class=text-decoration-none href=#soa-struct-arrays>#</a></h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span>Vector3 <span style=color:#f92672>::</span> <span style=color:#66d9ef>struct</span> {x, y, z<span style=color:#f92672>:</span> <span style=color:#66d9ef>f32</span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>N <span style=color:#f92672>::</span> <span style=color:#a6e22e>2</span>
</span></span><span style=display:flex><span>v_aos<span style=color:#f92672>:</span> [N]Vector3
</span></span><span style=display:flex><span>v_aos[<span style=color:#a6e22e>0</span>].x <span style=color:#f92672>=</span> <span style=color:#a6e22e>1</span>
</span></span><span style=display:flex><span>v_aos[<span style=color:#a6e22e>0</span>].y <span style=color:#f92672>=</span> <span style=color:#a6e22e>4</span>
</span></span><span style=display:flex><span>v_aos[<span style=color:#a6e22e>0</span>].z <span style=color:#f92672>=</span> <span style=color:#a6e22e>9</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>fmt.println(<span style=color:#66d9ef>len</span>(v_aos))
</span></span><span style=display:flex><span>fmt.println(v_aos[<span style=color:#a6e22e>0</span>])
</span></span><span style=display:flex><span>fmt.println(v_aos[<span style=color:#a6e22e>0</span>].x)
</span></span><span style=display:flex><span>fmt.println(<span style=color:#f92672>&amp;</span>v_aos[<span style=color:#a6e22e>0</span>].x)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>v_aos[<span style=color:#a6e22e>1</span>] <span style=color:#f92672>=</span> {<span style=color:#a6e22e>0</span>, <span style=color:#a6e22e>3</span>, <span style=color:#a6e22e>4</span>}
</span></span><span style=display:flex><span>v_aos[<span style=color:#a6e22e>1</span>].x <span style=color:#f92672>=</span> <span style=color:#a6e22e>2</span>
</span></span><span style=display:flex><span>fmt.println(v_aos[<span style=color:#a6e22e>1</span>])
</span></span><span style=display:flex><span>fmt.println(v_aos)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>v_soa<span style=color:#f92672>:</span> <span style=color:#a6e22e>#soa</span>[N]Vector3
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>v_soa[<span style=color:#a6e22e>0</span>].x <span style=color:#f92672>=</span> <span style=color:#a6e22e>1</span>
</span></span><span style=display:flex><span>v_soa[<span style=color:#a6e22e>0</span>].y <span style=color:#f92672>=</span> <span style=color:#a6e22e>4</span>
</span></span><span style=display:flex><span>v_soa[<span style=color:#a6e22e>0</span>].z <span style=color:#f92672>=</span> <span style=color:#a6e22e>9</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Same syntax as AOS and treat as if it was an array
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>fmt.println(<span style=color:#66d9ef>len</span>(v_soa))
</span></span><span style=display:flex><span>fmt.println(v_soa[<span style=color:#a6e22e>0</span>])
</span></span><span style=display:flex><span>fmt.println(v_soa[<span style=color:#a6e22e>0</span>].x)
</span></span><span style=display:flex><span>fmt.println(<span style=color:#f92672>&amp;</span>v_soa[<span style=color:#a6e22e>0</span>].x)
</span></span><span style=display:flex><span>v_soa[<span style=color:#a6e22e>1</span>] <span style=color:#f92672>=</span> {<span style=color:#a6e22e>0</span>, <span style=color:#a6e22e>3</span>, <span style=color:#a6e22e>4</span>}
</span></span><span style=display:flex><span>v_soa[<span style=color:#a6e22e>1</span>].x <span style=color:#f92672>=</span> <span style=color:#a6e22e>2</span>
</span></span><span style=display:flex><span>fmt.println(v_soa[<span style=color:#a6e22e>1</span>])
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Can use SOA syntax if necessary
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>v_soa.x[<span style=color:#a6e22e>0</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>1</span>
</span></span><span style=display:flex><span>v_soa.y[<span style=color:#a6e22e>0</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>4</span>
</span></span><span style=display:flex><span>v_soa.z[<span style=color:#a6e22e>0</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>9</span>
</span></span><span style=display:flex><span>fmt.println(v_soa.x[<span style=color:#a6e22e>0</span>])
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Same pointer addresses with both syntaxes
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>assert(<span style=color:#f92672>&amp;</span>v_soa[<span style=color:#a6e22e>0</span>].x <span style=color:#f92672>==</span> <span style=color:#f92672>&amp;</span>v_soa.x[<span style=color:#a6e22e>0</span>])
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Same fmt printing
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>fmt.println(v_aos)
</span></span><span style=display:flex><span>fmt.println(v_soa)
</span></span></code></pre></div><p>Works with arrays of length &lt;= 4 which have the implicit fields xyzw/rgba</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span>Vector3 <span style=color:#f92672>::</span> <span style=color:#66d9ef>distinct</span> [<span style=color:#a6e22e>3</span>]<span style=color:#66d9ef>f32</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>N <span style=color:#f92672>::</span> <span style=color:#a6e22e>2</span>
</span></span><span style=display:flex><span>v_aos<span style=color:#f92672>:</span> [N]Vector3
</span></span><span style=display:flex><span>v_aos[<span style=color:#a6e22e>0</span>].x <span style=color:#f92672>=</span> <span style=color:#a6e22e>1</span>
</span></span><span style=display:flex><span>v_aos[<span style=color:#a6e22e>0</span>].y <span style=color:#f92672>=</span> <span style=color:#a6e22e>4</span>
</span></span><span style=display:flex><span>v_aos[<span style=color:#a6e22e>0</span>].z <span style=color:#f92672>=</span> <span style=color:#a6e22e>9</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>v_soa<span style=color:#f92672>:</span> <span style=color:#a6e22e>#soa</span>[N]Vector3
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>v_soa[<span style=color:#a6e22e>0</span>].x <span style=color:#f92672>=</span> <span style=color:#a6e22e>1</span>
</span></span><span style=display:flex><span>v_soa[<span style=color:#a6e22e>0</span>].y <span style=color:#f92672>=</span> <span style=color:#a6e22e>4</span>
</span></span><span style=display:flex><span>v_soa[<span style=color:#a6e22e>0</span>].z <span style=color:#f92672>=</span> <span style=color:#a6e22e>9</span>
</span></span></code></pre></div><h4 id=soa-struct-slices-and-dynamic-arrays>SOA Struct Slices and Dynamic Arrays <a class=text-decoration-none href=#soa-struct-slices-and-dynamic-arrays>#</a></h4><p>Fixed-length SOA types can be sliced to produce SOA slices.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span>Vector3 <span style=color:#f92672>::</span> <span style=color:#66d9ef>struct</span> {x<span style=color:#f92672>:</span> <span style=color:#66d9ef>i8</span>, y<span style=color:#f92672>:</span> <span style=color:#66d9ef>i16</span>, z<span style=color:#f92672>:</span> <span style=color:#66d9ef>f32</span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>N <span style=color:#f92672>::</span> <span style=color:#a6e22e>3</span>
</span></span><span style=display:flex><span>v<span style=color:#f92672>:</span> <span style=color:#a6e22e>#soa</span>[N]Vector3
</span></span><span style=display:flex><span>v[<span style=color:#a6e22e>0</span>].x <span style=color:#f92672>=</span> <span style=color:#a6e22e>1</span>
</span></span><span style=display:flex><span>v[<span style=color:#a6e22e>0</span>].y <span style=color:#f92672>=</span> <span style=color:#a6e22e>4</span>
</span></span><span style=display:flex><span>v[<span style=color:#a6e22e>0</span>].z <span style=color:#f92672>=</span> <span style=color:#a6e22e>9</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>s<span style=color:#f92672>:</span> <span style=color:#a6e22e>#soa</span>[]Vector3
</span></span><span style=display:flex><span>s <span style=color:#f92672>=</span> v[<span style=color:#f92672>:</span>]
</span></span><span style=display:flex><span>assert(<span style=color:#66d9ef>len</span>(s) <span style=color:#f92672>==</span> N)
</span></span><span style=display:flex><span>fmt.println(s)
</span></span><span style=display:flex><span>fmt.println(s[<span style=color:#a6e22e>0</span>].x)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>a <span style=color:#f92672>:=</span> s[<span style=color:#a6e22e>1</span><span style=color:#f92672>:</span><span style=color:#a6e22e>2</span>]
</span></span><span style=display:flex><span>assert(<span style=color:#66d9ef>len</span>(a) <span style=color:#f92672>==</span> <span style=color:#a6e22e>1</span>)
</span></span><span style=display:flex><span>fmt.println(a)
</span></span></code></pre></div><p>To be complete with SOA slices, Odin also supports SOA dynamic arrays.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span>d<span style=color:#f92672>:</span> <span style=color:#a6e22e>#soa</span>[<span style=color:#66d9ef>dynamic</span>]Vector3
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>append_soa(<span style=color:#f92672>&amp;</span>d, Vector3{<span style=color:#a6e22e>1</span>, <span style=color:#a6e22e>2</span>, <span style=color:#a6e22e>3</span>}, Vector3{<span style=color:#a6e22e>4</span>, <span style=color:#a6e22e>5</span>, <span style=color:#a6e22e>9</span>}, Vector3{<span style=color:#f92672>-</span><span style=color:#a6e22e>4</span>, <span style=color:#f92672>-</span><span style=color:#a6e22e>4</span>, <span style=color:#a6e22e>3</span>})
</span></span><span style=display:flex><span>fmt.println(d)
</span></span><span style=display:flex><span>fmt.println(<span style=color:#66d9ef>len</span>(d))
</span></span><span style=display:flex><span>fmt.println(<span style=color:#66d9ef>cap</span>(d))
</span></span><span style=display:flex><span>fmt.println(d[<span style=color:#f92672>:</span>])
</span></span></code></pre></div><h4 id=soa_zip-and-soa_unzip><code>soa_zip</code> and <code>soa_unzip</code> <a class=text-decoration-none href=#soa_zip-and-soa_unzip>#</a></h4><p>SOA is not just useful for high performance scenarios but also for everyday tasks which are normally only achievable in higher level languages. <a href=http://pkg.odin-lang.org/base/builtin/#soa_zip><code>soa_zip</code></a> is a built-in procedure which allows the user to treat multiple slices as if they are part of the same data structures, utilizing the power of SOA.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span>x <span style=color:#f92672>:=</span> []<span style=color:#66d9ef>i32</span>{<span style=color:#a6e22e>1</span>, <span style=color:#a6e22e>3</span>, <span style=color:#a6e22e>9</span>}
</span></span><span style=display:flex><span>y <span style=color:#f92672>:=</span> []<span style=color:#66d9ef>f32</span>{<span style=color:#a6e22e>2</span>, <span style=color:#a6e22e>4</span>, <span style=color:#a6e22e>16</span>}
</span></span><span style=display:flex><span>z <span style=color:#f92672>:=</span> []<span style=color:#66d9ef>b32</span>{<span style=color:#66d9ef>true</span>, <span style=color:#66d9ef>false</span>, <span style=color:#66d9ef>true</span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// produce an #soa slice with the normal slices passed
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>s <span style=color:#f92672>:=</span> soa_zip(a<span style=color:#f92672>=</span>x, b<span style=color:#f92672>=</span>y, c<span style=color:#f92672>=</span>z)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// iterate over the #soa slice
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>for</span> v, i <span style=color:#66d9ef>in</span> s {
</span></span><span style=display:flex><span>	fmt.println(v, i) <span style=color:#75715e>// exactly the same as s[i]
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>	<span style=color:#75715e>// NOTE: `v` is NOT a temporary value but has a specialized addressing mode
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>	<span style=color:#75715e>// which means that when accessing v.a etc, it does the correct transformation
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>	<span style=color:#75715e>// internally:
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>	<span style=color:#75715e>//         s[i].a === s.a[i]
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>	fmt.println(v.a, v.b, v.c)
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p><a href=http://pkg.odin-lang.org/base/builtin/#soa_unzip><code>soa_unzip</code></a> is a built-in procedure which allows the user to recover the slices from an <code>#soa</code> slice.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span><span style=color:#75715e>// Recover the slices from the #soa slice
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>a, b, c <span style=color:#f92672>:=</span> soa_unzip(s)
</span></span><span style=display:flex><span>fmt.println(a, b, c)
</span></span></code></pre></div><h3 id=matrix-type><code>matrix</code> type <a class=text-decoration-none href=#matrix-type>#</a></h3><p>A <code>matrix</code> is a <a href=https://wikipedia.org/wiki/Matrix_(mathematics)>mathematical type</a> built into Odin. It is a regular array of numbers, arranged in rows and columns.</p><p>The following represents a matrix that has 2 rows and 3 columns:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span>m<span style=color:#f92672>:</span> matrix[<span style=color:#a6e22e>2</span>, <span style=color:#a6e22e>3</span>]<span style=color:#66d9ef>f32</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>m <span style=color:#f92672>=</span> matrix[<span style=color:#a6e22e>2</span>, <span style=color:#a6e22e>3</span>]<span style=color:#66d9ef>f32</span>{
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>1</span>, <span style=color:#a6e22e>9</span>, <span style=color:#f92672>-</span><span style=color:#a6e22e>13</span>,
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>20</span>, <span style=color:#a6e22e>5</span>, <span style=color:#f92672>-</span><span style=color:#a6e22e>6</span>,
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>Element types of integers, float, and complex numbers are supported by matrices. There is no support for booleans, quaternions, or any compound type.</p><p>Indexing a matrix can be used with the matrix indexing syntax. This mirrors other type usages: type on the left, usage on the right.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span>elem <span style=color:#f92672>:=</span> m[<span style=color:#a6e22e>1</span>, <span style=color:#a6e22e>2</span>] <span style=color:#75715e>// row 1, column 2
</span></span></span></code></pre></div><p>Scalars act as if they are scaled identity matrices and can be assigned to matrices as them</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span>b <span style=color:#f92672>:=</span> matrix[<span style=color:#a6e22e>2</span>, <span style=color:#a6e22e>2</span>]<span style=color:#66d9ef>f32</span>{}
</span></span><span style=display:flex><span>f <span style=color:#f92672>:=</span> <span style=color:#66d9ef>f32</span>(<span style=color:#a6e22e>3</span>)
</span></span><span style=display:flex><span>b <span style=color:#f92672>=</span> f
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>fmt.println(<span style=color:#e6db74>&#34;b&#34;</span>, b)
</span></span><span style=display:flex><span>fmt.println(<span style=color:#e6db74>&#34;b == f&#34;</span>, b <span style=color:#f92672>==</span> f)
</span></span></code></pre></div><p>Matrices support multiplication between matrices:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span>a <span style=color:#f92672>:=</span> matrix[<span style=color:#a6e22e>2</span>, <span style=color:#a6e22e>3</span>]<span style=color:#66d9ef>f32</span>{
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>2</span>, <span style=color:#a6e22e>3</span>, <span style=color:#a6e22e>1</span>,
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>4</span>, <span style=color:#a6e22e>5</span>, <span style=color:#a6e22e>0</span>,
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>b <span style=color:#f92672>:=</span> matrix[<span style=color:#a6e22e>3</span>, <span style=color:#a6e22e>2</span>]<span style=color:#66d9ef>f32</span>{
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>1</span>, <span style=color:#a6e22e>2</span>,
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>3</span>, <span style=color:#a6e22e>4</span>,
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>5</span>, <span style=color:#a6e22e>6</span>,
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>fmt.println(<span style=color:#e6db74>&#34;a&#34;</span>, a)
</span></span><span style=display:flex><span>fmt.println(<span style=color:#e6db74>&#34;b&#34;</span>, b)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>c <span style=color:#f92672>:=</span> a <span style=color:#f92672>*</span> b
</span></span><span style=display:flex><span><span style=color:#a6e22e>#assert</span>(type_of(c) <span style=color:#f92672>==</span> matrix[<span style=color:#a6e22e>2</span>, <span style=color:#a6e22e>2</span>]<span style=color:#66d9ef>f32</span>)
</span></span><span style=display:flex><span>fmt.tprintln(<span style=color:#e6db74>&#34;c = a * b&#34;</span>, c)		
</span></span></code></pre></div><p>Matrices support multiplication between matrices and arrays:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span>m <span style=color:#f92672>:=</span> matrix[<span style=color:#a6e22e>4</span>, <span style=color:#a6e22e>4</span>]<span style=color:#66d9ef>f32</span>{
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>1</span>, <span style=color:#a6e22e>2</span>, <span style=color:#a6e22e>3</span>, <span style=color:#a6e22e>4</span>, 
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>5</span>, <span style=color:#a6e22e>5</span>, <span style=color:#a6e22e>4</span>, <span style=color:#a6e22e>2</span>, 
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>0</span>, <span style=color:#a6e22e>1</span>, <span style=color:#a6e22e>3</span>, <span style=color:#a6e22e>0</span>, 
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>0</span>, <span style=color:#a6e22e>1</span>, <span style=color:#a6e22e>4</span>, <span style=color:#a6e22e>1</span>,
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>v <span style=color:#f92672>:=</span> [<span style=color:#a6e22e>4</span>]<span style=color:#66d9ef>f32</span>{<span style=color:#a6e22e>1</span>, <span style=color:#a6e22e>5</span>, <span style=color:#a6e22e>4</span>, <span style=color:#a6e22e>3</span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// treating `v` as a column vector
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>fmt.println(<span style=color:#e6db74>&#34;m * v&#34;</span>, m <span style=color:#f92672>*</span> v)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// treating `v` as a row vector
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>fmt.println(<span style=color:#e6db74>&#34;v * m&#34;</span>, v <span style=color:#f92672>*</span> m)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Support with non-square matrices
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>s <span style=color:#f92672>:=</span> matrix[<span style=color:#a6e22e>2</span>, <span style=color:#a6e22e>4</span>]<span style=color:#66d9ef>f32</span>{ <span style=color:#75715e>// [4][2]f32 default layout
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>	<span style=color:#a6e22e>2</span>, <span style=color:#a6e22e>4</span>, <span style=color:#a6e22e>3</span>, <span style=color:#a6e22e>1</span>, 
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>7</span>, <span style=color:#a6e22e>8</span>, <span style=color:#a6e22e>6</span>, <span style=color:#a6e22e>5</span>, 
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>w <span style=color:#f92672>:=</span> [<span style=color:#a6e22e>2</span>]<span style=color:#66d9ef>f32</span>{<span style=color:#a6e22e>1</span>, <span style=color:#a6e22e>2</span>}
</span></span><span style=display:flex><span>r<span style=color:#f92672>:</span> [<span style=color:#a6e22e>4</span>]<span style=color:#66d9ef>f32</span> <span style=color:#f92672>=</span> w <span style=color:#f92672>*</span> s
</span></span><span style=display:flex><span>fmt.println(<span style=color:#e6db74>&#34;r&#34;</span>, r)
</span></span></code></pre></div><p>Component-wise operations:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span><span style=color:#75715e>// if the element type supports it
</span></span></span><span style=display:flex><span><span style=color:#75715e>// Not support for &#39;/&#39;, &#39;%&#39;, or &#39;%%&#39; operations
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>a <span style=color:#f92672>:=</span> matrix[<span style=color:#a6e22e>2</span>, <span style=color:#a6e22e>2</span>]<span style=color:#66d9ef>i32</span>{
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>1</span>, <span style=color:#a6e22e>2</span>,
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>3</span>, <span style=color:#a6e22e>4</span>,
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>b <span style=color:#f92672>:=</span> matrix[<span style=color:#a6e22e>2</span>, <span style=color:#a6e22e>2</span>]<span style=color:#66d9ef>i32</span>{
</span></span><span style=display:flex><span>	<span style=color:#f92672>-</span><span style=color:#a6e22e>5</span>,  <span style=color:#a6e22e>1</span>,
</span></span><span style=display:flex><span>	 <span style=color:#a6e22e>9</span>, <span style=color:#f92672>-</span><span style=color:#a6e22e>7</span>,
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>c0 <span style=color:#f92672>:=</span> a <span style=color:#f92672>+</span> b
</span></span><span style=display:flex><span>c1 <span style=color:#f92672>:=</span> a <span style=color:#f92672>-</span> b
</span></span><span style=display:flex><span>c2 <span style=color:#f92672>:=</span> a <span style=color:#f92672>&amp;</span> b
</span></span><span style=display:flex><span>c3 <span style=color:#f92672>:=</span> a <span style=color:#f92672>|</span> b
</span></span><span style=display:flex><span>c4 <span style=color:#f92672>:=</span> a <span style=color:#960050;background-color:#1e0010>~</span> b
</span></span><span style=display:flex><span>c5 <span style=color:#f92672>:=</span> a <span style=color:#f92672>&amp;</span><span style=color:#960050;background-color:#1e0010>~</span> b
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// component-wise multiplication
</span></span></span><span style=display:flex><span><span style=color:#75715e>// since a * b would be a standard matrix multiplication
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>c6 <span style=color:#f92672>:=</span> hadamard_product(a, b) 
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>fmt.println(<span style=color:#e6db74>&#34;a + b&#34;</span>,  c0)
</span></span><span style=display:flex><span>fmt.println(<span style=color:#e6db74>&#34;a - b&#34;</span>,  c1)
</span></span><span style=display:flex><span>fmt.println(<span style=color:#e6db74>&#34;a &amp; b&#34;</span>,  c2)
</span></span><span style=display:flex><span>fmt.println(<span style=color:#e6db74>&#34;a | b&#34;</span>,  c3)
</span></span><span style=display:flex><span>fmt.println(<span style=color:#e6db74>&#34;a ~ b&#34;</span>,  c4)
</span></span><span style=display:flex><span>fmt.println(<span style=color:#e6db74>&#34;a &amp;~ b&#34;</span>, c5)
</span></span><span style=display:flex><span>fmt.println(<span style=color:#e6db74>&#34;hadamard_product(a, b)&#34;</span>, c6)
</span></span></code></pre></div><h4 id=submatrix-casting>Submatrix Casting <a class=text-decoration-none href=#submatrix-casting>#</a></h4><h5 id=submatrix-casting-square-matrices>Submatrix casting square matrices <a class=text-decoration-none href=#submatrix-casting-square-matrices>#</a></h5><p>Casting a square matrix to another square matrix with same element type is supported.</p><ul><li>If the cast is to a smaller matrix type, the top-left submatrix is taken.</li><li>If the cast is to a larger matrix type, the matrix is extended with zeros everywhere and ones in the diagonal for the unfilled elements of the extended matrix.</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span>mat2 <span style=color:#f92672>::</span> <span style=color:#66d9ef>distinct</span> matrix[<span style=color:#a6e22e>2</span>, <span style=color:#a6e22e>2</span>]<span style=color:#66d9ef>f32</span>
</span></span><span style=display:flex><span>mat4 <span style=color:#f92672>::</span> <span style=color:#66d9ef>distinct</span> matrix[<span style=color:#a6e22e>4</span>, <span style=color:#a6e22e>4</span>]<span style=color:#66d9ef>f32</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>m2 <span style=color:#f92672>:=</span> mat2{
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>1</span>, <span style=color:#a6e22e>3</span>,
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>2</span>, <span style=color:#a6e22e>4</span>,
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>m4 <span style=color:#f92672>:=</span> mat4(m2)
</span></span><span style=display:flex><span>assert(m4[<span style=color:#a6e22e>2</span>, <span style=color:#a6e22e>2</span>] <span style=color:#f92672>==</span> <span style=color:#a6e22e>1</span>)
</span></span><span style=display:flex><span>assert(m4[<span style=color:#a6e22e>3</span>, <span style=color:#a6e22e>3</span>] <span style=color:#f92672>==</span> <span style=color:#a6e22e>1</span>)
</span></span><span style=display:flex><span>fmt.printf(<span style=color:#e6db74>&#34;m2 %#v\n&#34;</span>, m2)
</span></span><span style=display:flex><span>fmt.println(<span style=color:#e6db74>&#34;m4&#34;</span>, m4)
</span></span><span style=display:flex><span>fmt.println(<span style=color:#e6db74>&#34;mat2(m4)&#34;</span>, mat2(m4))
</span></span><span style=display:flex><span>assert(mat2(m4) <span style=color:#f92672>==</span> m2)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>b4 <span style=color:#f92672>:=</span> mat4{
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>1</span>, <span style=color:#a6e22e>2</span>, <span style=color:#a6e22e>0</span>, <span style=color:#a6e22e>0</span>,
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>3</span>, <span style=color:#a6e22e>4</span>, <span style=color:#a6e22e>0</span>, <span style=color:#a6e22e>0</span>,
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>5</span>, <span style=color:#a6e22e>0</span>, <span style=color:#a6e22e>6</span>, <span style=color:#a6e22e>0</span>,
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>0</span>, <span style=color:#a6e22e>7</span>, <span style=color:#a6e22e>0</span>, <span style=color:#a6e22e>8</span>,
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>fmt.println(<span style=color:#e6db74>&#34;b4&#34;</span>, matrix_flatten(b4))
</span></span></code></pre></div><h5 id=casting-non-square-matrices>Casting non-square matrices <a class=text-decoration-none href=#casting-non-square-matrices>#</a></h5><p>Casting a matrix to another matrix is allowed as long as they share the same element type and the number of elements (rows*columns). Matrices in Odin are stored in column-major order, which means the casts will preserve this element order.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span>mat2x4 <span style=color:#f92672>::</span> <span style=color:#66d9ef>distinct</span> matrix[<span style=color:#a6e22e>2</span>, <span style=color:#a6e22e>4</span>]<span style=color:#66d9ef>f32</span>
</span></span><span style=display:flex><span>mat4x2 <span style=color:#f92672>::</span> <span style=color:#66d9ef>distinct</span> matrix[<span style=color:#a6e22e>4</span>, <span style=color:#a6e22e>2</span>]<span style=color:#66d9ef>f32</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>x <span style=color:#f92672>:=</span> mat2x4{
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>1</span>, <span style=color:#a6e22e>3</span>, <span style=color:#a6e22e>5</span>, <span style=color:#a6e22e>7</span>, 
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>2</span>, <span style=color:#a6e22e>4</span>, <span style=color:#a6e22e>6</span>, <span style=color:#a6e22e>8</span>,
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>y <span style=color:#f92672>:=</span> mat4x2(x)
</span></span><span style=display:flex><span>fmt.println(<span style=color:#e6db74>&#34;x&#34;</span>, x)
</span></span><span style=display:flex><span>fmt.println(<span style=color:#e6db74>&#34;y&#34;</span>, y)
</span></span></code></pre></div><h4 id=technical-information-of-matrix-types>Technical Information of <code>matrix</code> Types <a class=text-decoration-none href=#technical-information-of-matrix-types>#</a></h4><p>The default internal representation of a matrix in Odin is stored in column-major format
e.g. <code>matrix[2, 3]f32</code> is internally <code>[3][2]f32</code> (with a different alignment requirement).</p><p>Column-major is used in order to utilize (SIMD) vector instructions effectively on modern hardware, if possible.</p><p>If a row-major storage format is required, the <code>#row_major</code> directive can be used.
e.g. <code>#row_major matrix[2, 3]f32</code> is internally <code>[2][3]f32</code> (with a different alignment requirement).</p><p>Unlike normal arrays, matrices try to maximize alignment to allow for the (SIMD) vectorization properties whilst keeping zero padding (either between columns (assuming default layout) or at the end of the type).</p><p>Zero padding is a compromise for use with third-party libraries, instead of optimizing for performance. Padding between columns (assuming default layout) was not taken even if that would have allowed each column to be loaded individually into a SIMD register with the correct alignment properties.</p><p>Currently, matrices are limited to a maximum of 16 elements (rows*columns), and a minimum of 1 element. This is because matrices are stored as values (not a reference type), and thus operations on them will be stored on the stack. Restricting the maximum element count minimizes the possibility of stack overflows.</p><p>Built-in Procedures (Compiler Level) in <code>base:intrinsics</code> and <code>core:math/linalg</code>:</p><ul><li><code>transpose(m)</code>
transposes a matrix</li><li><code>outer_product(a, b)</code>
takes two array-like data types and returns the outer product
of the values in a matrix</li><li><code>hadamard_product(a, b)</code>
component-wise multiplication of two matrices of the same type</li><li><code>matrix_flatten(m)</code><ul><li>converts the matrix into a flatten array of elements in column-major order.</li></ul></li><li><code>conj(x)</code><ul><li>conjugates the elements of a matrix for complex element types only</li></ul></li></ul><p>Procedures (Runtime Level) (all square matrix procedures) in <code>core:math/linalg</code>:</p><ul><li><code>determinant(m)</code></li><li><code>adjugate(m)</code></li><li><code>inverse(m)</code></li><li><code>inverse_transpose(m)</code></li><li><code>hermitian_adjoint(m)</code></li><li><code>matrix_trace(m)</code></li><li><code>matrix_minor(m)</code></li></ul><h2 id=raw_data-procedure><code>raw_data</code> procedure <a class=text-decoration-none href=#raw_data-procedure>#</a></h2><p><a href=https://pkg.odin-lang.org/base/builtin/#raw_data>raw_data</a> is a built-in procedure which returns the underlying data of a built-in data type as a <a href=#multi-pointers>Multi-Pointer</a>.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span>raw_data([]<span style=color:#960050;background-color:#1e0010>$</span>E)         <span style=color:#f92672>-&gt;</span> [<span style=color:#f92672>^</span>]E    <span style=color:#75715e>// slices
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>raw_data([<span style=color:#66d9ef>dynamic</span>]<span style=color:#960050;background-color:#1e0010>$</span>E)  <span style=color:#f92672>-&gt;</span> [<span style=color:#f92672>^</span>]E    <span style=color:#75715e>// dynamic arrays
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>raw_data(<span style=color:#f92672>^</span>[<span style=color:#960050;background-color:#1e0010>$</span>N]<span style=color:#960050;background-color:#1e0010>$</span>E)      <span style=color:#f92672>-&gt;</span> [<span style=color:#f92672>^</span>]E    <span style=color:#75715e>// fixed array and enumerated arrays 
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>raw_data(<span style=color:#f92672>^</span><span style=color:#a6e22e>#simd</span>[<span style=color:#960050;background-color:#1e0010>$</span>N]<span style=color:#960050;background-color:#1e0010>$</span>E) <span style=color:#f92672>-&gt;</span> [<span style=color:#f92672>^</span>]E    <span style=color:#75715e>// simd vectors 
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>raw_data(<span style=color:#66d9ef>string</span>)       <span style=color:#f92672>-&gt;</span> [<span style=color:#f92672>^</span>]<span style=color:#66d9ef>byte</span> <span style=color:#75715e>// 	
</span></span></span></code></pre></div><h2 id=using-statement><code>using</code> statement <a class=text-decoration-none href=#using-statement>#</a></h2><p><code>using</code> can be used to bring entities declared in a scope/namespace into the current scope. This can be applied to import names, struct fields, procedure fields, and struct values.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span><span style=color:#f92672>import</span> <span style=color:#e6db74>&#34;foo&#34;</span>
</span></span><span style=display:flex><span>bar <span style=color:#f92672>::</span> <span style=color:#66d9ef>proc</span>() {
</span></span><span style=display:flex><span>	<span style=color:#75715e>// imports all the exported entities from the `foo` package into this scope
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>	<span style=color:#66d9ef>using</span> foo
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h3 id=using-statement-with-structs>Using statement with structs <a class=text-decoration-none href=#using-statement-with-structs>#</a></h3><p>Let&rsquo;s take a very simple entity struct:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span>Vector3 <span style=color:#f92672>::</span> <span style=color:#66d9ef>struct</span>{x, y, z<span style=color:#f92672>:</span> <span style=color:#66d9ef>f32</span>}
</span></span><span style=display:flex><span>Entity <span style=color:#f92672>::</span> <span style=color:#66d9ef>struct</span> {
</span></span><span style=display:flex><span>	position<span style=color:#f92672>:</span> Vector3,
</span></span><span style=display:flex><span>	orientation<span style=color:#f92672>:</span> <span style=color:#66d9ef>quaternion128</span>,
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>It can be used like this:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span>foo <span style=color:#f92672>::</span> <span style=color:#66d9ef>proc</span>(entity<span style=color:#f92672>:</span> <span style=color:#f92672>^</span>Entity) {
</span></span><span style=display:flex><span>	fmt.println(entity.position.x, entity.position.y, entity.position.z)
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>The entity members can be brought into the procedure scope by <code>using</code> it:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span>foo <span style=color:#f92672>::</span> <span style=color:#66d9ef>proc</span>(entity<span style=color:#f92672>:</span> <span style=color:#f92672>^</span>Entity) {
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>using</span> entity
</span></span><span style=display:flex><span>	fmt.println(position.x, position.y, position.z)
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>The <code>using</code> can be applied to the parameter directly:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span>foo <span style=color:#f92672>::</span> <span style=color:#66d9ef>proc</span>(<span style=color:#66d9ef>using</span> entity<span style=color:#f92672>:</span> <span style=color:#f92672>^</span>Entity) {
</span></span><span style=display:flex><span>	fmt.println(position.x, position.y, position.z)
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>It can also be applied to sub-fields:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span>foo <span style=color:#f92672>::</span> <span style=color:#66d9ef>proc</span>(entity<span style=color:#f92672>:</span> <span style=color:#f92672>^</span>Entity) {
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>using</span> entity.position
</span></span><span style=display:flex><span>	fmt.println(x, y, z)
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>We can also apply the <code>using</code> statement to the struct fields directly, making all the fields of <code>position</code> appear as if they are on <code>Entity</code> itself:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span>Entity <span style=color:#f92672>::</span> <span style=color:#66d9ef>struct</span> {
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>using</span> position<span style=color:#f92672>:</span> Vector3,
</span></span><span style=display:flex><span>	orientation<span style=color:#f92672>:</span> <span style=color:#66d9ef>quaternion128</span>,
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>foo <span style=color:#f92672>::</span> <span style=color:#66d9ef>proc</span>(entity<span style=color:#f92672>:</span> <span style=color:#f92672>^</span>Entity) {
</span></span><span style=display:flex><span>	fmt.println(entity.x, entity.y, entity.z)
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h3 id=subtype-polymorphism>Subtype polymorphism <a class=text-decoration-none href=#subtype-polymorphism>#</a></h3><p>It is possible to get subtype polymorphism, similar to inheritance-like functionality in C++, but without the requirement of vtables or unknown struct layout:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span>foo <span style=color:#f92672>::</span> <span style=color:#66d9ef>proc</span>(entity<span style=color:#f92672>:</span> Entity) {
</span></span><span style=display:flex><span>	fmt.println(entity.x, entity.y, entity.z)
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Frog <span style=color:#f92672>::</span> <span style=color:#66d9ef>struct</span> {
</span></span><span style=display:flex><span>	ribbit_volume<span style=color:#f92672>:</span> <span style=color:#66d9ef>f32</span>,
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>using</span> entity<span style=color:#f92672>:</span> Entity,
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>frog<span style=color:#f92672>:</span> Frog
</span></span><span style=display:flex><span><span style=color:#75715e>// Both work
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>frog.x <span style=color:#f92672>=</span> <span style=color:#a6e22e>123</span>
</span></span><span style=display:flex><span>foo(frog)
</span></span></code></pre></div><p><strong>Note:</strong> <code>using</code> can be applied to arbitrarily many things, which allows the ability to have multiple subtype polymorphism (but also its issues).</p><p><strong>Note:</strong> <code>using</code>&rsquo;d fields can still be referred by name.</p><h2 id=or_else-expression><code>or_else</code> expression <a class=text-decoration-none href=#or_else-expression>#</a></h2><p><code>or_else</code> is an infix binary operator that allows the user to define default values for certain expressions with optional-ok semantics.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span>m<span style=color:#f92672>:</span> <span style=color:#66d9ef>map</span>[<span style=color:#66d9ef>string</span>]<span style=color:#66d9ef>int</span>
</span></span><span style=display:flex><span>i<span style=color:#f92672>:</span> <span style=color:#66d9ef>int</span>
</span></span><span style=display:flex><span>ok<span style=color:#f92672>:</span> <span style=color:#66d9ef>bool</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>if</span> i, ok <span style=color:#f92672>=</span> m[<span style=color:#e6db74>&#34;hellope&#34;</span>]; <span style=color:#960050;background-color:#1e0010>!</span>ok {
</span></span><span style=display:flex><span>	i <span style=color:#f92672>=</span> <span style=color:#a6e22e>123</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span><span style=color:#75715e>// The above can be mapped to `or_else`
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>i <span style=color:#f92672>=</span> m[<span style=color:#e6db74>&#34;hellope&#34;</span>] <span style=color:#66d9ef>or_else</span> <span style=color:#a6e22e>123</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>assert(i <span style=color:#f92672>==</span> <span style=color:#a6e22e>123</span>)
</span></span></code></pre></div><p><code>or_else</code> can be used with type assertions too, as they have optional-ok semantics.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span>v<span style=color:#f92672>:</span> <span style=color:#66d9ef>union</span>{<span style=color:#66d9ef>int</span>, <span style=color:#66d9ef>f64</span>}
</span></span><span style=display:flex><span>i<span style=color:#f92672>:</span> <span style=color:#66d9ef>int</span>
</span></span><span style=display:flex><span>i <span style=color:#f92672>=</span> v.(<span style=color:#66d9ef>int</span>) <span style=color:#66d9ef>or_else</span> <span style=color:#a6e22e>123</span>
</span></span><span style=display:flex><span>i <span style=color:#f92672>=</span> v.<span style=color:#960050;background-color:#1e0010>?</span> <span style=color:#66d9ef>or_else</span> <span style=color:#a6e22e>123</span> <span style=color:#75715e>// Type inference magic
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>assert(i <span style=color:#f92672>==</span> <span style=color:#a6e22e>123</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>m<span style=color:#f92672>:</span> Maybe(<span style=color:#66d9ef>int</span>)
</span></span><span style=display:flex><span>i <span style=color:#f92672>=</span> m.<span style=color:#960050;background-color:#1e0010>?</span> <span style=color:#66d9ef>or_else</span> <span style=color:#a6e22e>456</span>
</span></span><span style=display:flex><span>assert(i <span style=color:#f92672>==</span> <span style=color:#a6e22e>456</span>)
</span></span></code></pre></div><h2 id=or_return-operator><code>or_return</code> operator <a class=text-decoration-none href=#or_return-operator>#</a></h2><p>The concept of <code>or_return</code> will work by popping off the end value in a multiple valued expression and checking whether it was not <code>nil</code> or was <code>false</code>, and if so, set the end return value to value if possible. If the procedure only has one return value, it will do a simple return. If the procedure had multiple return values, <code>or_return</code> will require that all parameters be named so that the end value could be assigned to by name and then an empty return could be called.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span>Error <span style=color:#f92672>::</span> <span style=color:#66d9ef>enum</span> {
</span></span><span style=display:flex><span>	None,
</span></span><span style=display:flex><span>	Something_Bad,
</span></span><span style=display:flex><span>	Something_Worse,
</span></span><span style=display:flex><span>	The_Worst,
</span></span><span style=display:flex><span>	Your_Mum,
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>caller_1 <span style=color:#f92672>::</span> <span style=color:#66d9ef>proc</span>() <span style=color:#f92672>-&gt;</span> Error {
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>return</span> .None
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>caller_2 <span style=color:#f92672>::</span> <span style=color:#66d9ef>proc</span>() <span style=color:#f92672>-&gt;</span> (<span style=color:#66d9ef>int</span>, Error) {
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>return</span> <span style=color:#a6e22e>123</span>, .None
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>caller_3 <span style=color:#f92672>::</span> <span style=color:#66d9ef>proc</span>() <span style=color:#f92672>-&gt;</span> (<span style=color:#66d9ef>int</span>, <span style=color:#66d9ef>int</span>, Error) {
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>return</span> <span style=color:#a6e22e>123</span>, <span style=color:#a6e22e>345</span>, .None
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>foo_1 <span style=color:#f92672>::</span> <span style=color:#66d9ef>proc</span>() <span style=color:#f92672>-&gt;</span> Error {
</span></span><span style=display:flex><span>	<span style=color:#75715e>// This can be a common idiom in many code bases
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>	n0, err <span style=color:#f92672>:=</span> caller_2()
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>if</span> err <span style=color:#f92672>!=</span> <span style=color:#66d9ef>nil</span> {
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>return</span> err
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#75715e>// The above idiom can be transformed into the following
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>	n1 <span style=color:#f92672>:=</span> caller_2() <span style=color:#66d9ef>or_return</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#75715e>// And if the expression is 1-valued, it can be used like this
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>	caller_1() <span style=color:#66d9ef>or_return</span>
</span></span><span style=display:flex><span>	<span style=color:#75715e>// which is functionally equivalent to
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>	<span style=color:#66d9ef>if</span> err1 <span style=color:#f92672>:=</span> caller_1(); err1 <span style=color:#f92672>!=</span> <span style=color:#66d9ef>nil</span> {
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>return</span> err1
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#75715e>// Multiple return values still work with `or_return` as it only
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>	<span style=color:#75715e>// pops off the end value in the multi-valued expression
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>	n0, n1 <span style=color:#f92672>=</span> caller_3() <span style=color:#66d9ef>or_return</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>return</span> .None
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>foo_2 <span style=color:#f92672>::</span> <span style=color:#66d9ef>proc</span>() <span style=color:#f92672>-&gt;</span> (n<span style=color:#f92672>:</span> <span style=color:#66d9ef>int</span>, err<span style=color:#f92672>:</span> Error) {
</span></span><span style=display:flex><span>	<span style=color:#75715e>// It is more common that your procedure returns multiple values
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>	<span style=color:#75715e>// If `or_return` is used within a procedure that returns multiple 
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>	<span style=color:#75715e>// values (2+), then all the returned values must be named 
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>	<span style=color:#75715e>// so that a bare `return` statement can be used
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>	<span style=color:#75715e>// This can be a common idiom in many code bases
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>	x<span style=color:#f92672>:</span> <span style=color:#66d9ef>int</span>
</span></span><span style=display:flex><span>	x, err <span style=color:#f92672>=</span> caller_2()
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>if</span> err <span style=color:#f92672>!=</span> <span style=color:#66d9ef>nil</span> {
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>return</span>
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#75715e>// The above idiom can be transformed into the following
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>	y <span style=color:#f92672>:=</span> caller_2() <span style=color:#66d9ef>or_return</span>
</span></span><span style=display:flex><span>	_ <span style=color:#f92672>=</span> y
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#75715e>// And if the expression is 1-valued, it can be used like this
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>	caller_1() <span style=color:#66d9ef>or_return</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#75715e>// which is functionally equivalent to
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>	<span style=color:#66d9ef>if</span> err1 <span style=color:#f92672>:=</span> caller_1(); err1 <span style=color:#f92672>!=</span> <span style=color:#66d9ef>nil</span> {
</span></span><span style=display:flex><span>		err <span style=color:#f92672>=</span> err1
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>return</span>
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#75715e>// If using a non-bare `return` statement is required, setting the return values
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>	<span style=color:#75715e>// using the normal idiom is a better choice and clearer to read
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>	<span style=color:#66d9ef>if</span> z, zerr <span style=color:#f92672>:=</span> caller_2(); zerr <span style=color:#f92672>!=</span> <span style=color:#66d9ef>nil</span> {
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>return</span> <span style=color:#f92672>-</span><span style=color:#a6e22e>345</span> <span style=color:#f92672>*</span> z, zerr
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	n <span style=color:#f92672>=</span> <span style=color:#a6e22e>123</span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>return</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>caller_4 <span style=color:#f92672>::</span> <span style=color:#66d9ef>proc</span>() <span style=color:#f92672>-&gt;</span> (n<span style=color:#f92672>:</span> <span style=color:#66d9ef>int</span>, ok<span style=color:#f92672>:</span> <span style=color:#66d9ef>bool</span>) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>3</span>, <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>foo_3 <span style=color:#f92672>::</span> <span style=color:#66d9ef>proc</span>() <span style=color:#f92672>-&gt;</span> (ok<span style=color:#f92672>:</span> <span style=color:#66d9ef>bool</span>) {
</span></span><span style=display:flex><span>    <span style=color:#75715e>// `or_return` also supports the ok semantics common in Odin code.
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#75715e>// Note an error is indicated by `ok` being `false`
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    x <span style=color:#f92672>:=</span> caller_4() <span style=color:#66d9ef>or_return</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (x <span style=color:#f92672>&lt;</span> <span style=color:#a6e22e>5</span>) {
</span></span><span style=display:flex><span>        ok <span style=color:#f92672>=</span> <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h2 id=or_continue-operator><code>or_continue</code> operator <a class=text-decoration-none href=#or_continue-operator>#</a></h2><p><code>or_continue</code> is an operator that allows for simplified control flow in a loop. It functions much like a combination of <code>or_return</code> and <code>continue</code> in that it checks if the last value in a multiple-valued expression is <code>false</code> or not <code>nil</code>, and if so, behaves like a <code>continue</code> statement.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span><span style=color:#f92672>import</span> <span style=color:#e6db74>&#34;core:fmt&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Job <span style=color:#f92672>::</span> <span style=color:#66d9ef>struct</span> {
</span></span><span style=display:flex><span>	id<span style=color:#f92672>:</span>         <span style=color:#66d9ef>int</span>,
</span></span><span style=display:flex><span>	tasks_left<span style=color:#f92672>:</span> <span style=color:#66d9ef>int</span>,
</span></span><span style=display:flex><span>	result<span style=color:#f92672>:</span>     <span style=color:#66d9ef>int</span>,
</span></span><span style=display:flex><span>	error_has_occurred<span style=color:#f92672>:</span> <span style=color:#66d9ef>bool</span>,
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Returns true if it completed its last task.
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>do_work_until_done <span style=color:#f92672>::</span> <span style=color:#66d9ef>proc</span>(job<span style=color:#f92672>:</span> <span style=color:#f92672>^</span>Job) <span style=color:#f92672>-&gt;</span> <span style=color:#66d9ef>bool</span> {
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>if</span> job.tasks_left <span style=color:#f92672>==</span> <span style=color:#a6e22e>0</span> {
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>return</span> <span style=color:#66d9ef>false</span>
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	job.result <span style=color:#f92672>*=</span> <span style=color:#a6e22e>3</span>
</span></span><span style=display:flex><span>	job.tasks_left <span style=color:#f92672>-=</span> <span style=color:#a6e22e>1</span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>return</span> job.tasks_left <span style=color:#f92672>==</span> <span style=color:#a6e22e>0</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Returns a result and true if everything worked out.
</span></span></span><span style=display:flex><span><span style=color:#75715e>// Otherwise, returns zero and false.
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>tally <span style=color:#f92672>::</span> <span style=color:#66d9ef>proc</span>(job<span style=color:#f92672>:</span> <span style=color:#f92672>^</span>Job) <span style=color:#f92672>-&gt;</span> (<span style=color:#66d9ef>int</span>, <span style=color:#66d9ef>bool</span>) {
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>if</span> job.error_has_occurred {
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>return</span> <span style=color:#a6e22e>0</span>, <span style=color:#66d9ef>false</span>
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>return</span> job.result, <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>main <span style=color:#f92672>::</span> <span style=color:#66d9ef>proc</span>() {
</span></span><span style=display:flex><span>	jobs<span style=color:#f92672>:</span> [<span style=color:#66d9ef>dynamic</span>]Job
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>append</span>(<span style=color:#f92672>&amp;</span>jobs, Job{ id <span style=color:#f92672>=</span> <span style=color:#a6e22e>1</span>, })
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>append</span>(<span style=color:#f92672>&amp;</span>jobs, Job{ id <span style=color:#f92672>=</span> <span style=color:#a6e22e>3</span>, tasks_left <span style=color:#f92672>=</span> <span style=color:#a6e22e>2</span>, result <span style=color:#f92672>=</span> <span style=color:#a6e22e>7</span> })
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>append</span>(<span style=color:#f92672>&amp;</span>jobs, Job{ id <span style=color:#f92672>=</span> <span style=color:#a6e22e>5</span>, tasks_left <span style=color:#f92672>=</span> <span style=color:#a6e22e>1</span>, result <span style=color:#f92672>=</span> <span style=color:#a6e22e>5</span> })
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>append</span>(<span style=color:#f92672>&amp;</span>jobs, Job{ id <span style=color:#f92672>=</span> <span style=color:#a6e22e>7</span>, tasks_left <span style=color:#f92672>=</span> <span style=color:#a6e22e>1</span>, result <span style=color:#f92672>=</span> <span style=color:#a6e22e>5</span>, error_has_occurred <span style=color:#f92672>=</span> <span style=color:#66d9ef>true</span> })
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	job_loop<span style=color:#f92672>:</span> <span style=color:#66d9ef>for</span> <span style=color:#f92672>&amp;</span>job <span style=color:#66d9ef>in</span> jobs {
</span></span><span style=display:flex><span>		do_work_until_done(<span style=color:#f92672>&amp;</span>job) or_continue job_loop
</span></span><span style=display:flex><span>		result <span style=color:#f92672>:=</span> tally(<span style=color:#f92672>&amp;</span>job)    or_continue job_loop
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>		fmt.printfln(<span style=color:#e6db74>&#34;Job #%i has completed its work. Result is: %i&#34;</span>, job.id, result)
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>The example above will print the following:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-txt data-lang=txt><span style=display:flex><span>Job #5 has completed its work. Result is: 15
</span></span></code></pre></div><p>Only job #5 completes, because it has only 1 task left and its <code>error_has_occurred</code> is the default value, which is <code>false</code> in this case, as every variable in Odin is implicitly zeroed out unless made explicit.</p><p>Without <code>or_continue</code>, the above loop would look more like this:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span><span style=color:#75715e>// [...]
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>	job_loop<span style=color:#f92672>:</span> <span style=color:#66d9ef>for</span> <span style=color:#f92672>&amp;</span>job <span style=color:#66d9ef>in</span> jobs {
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>if</span> <span style=color:#960050;background-color:#1e0010>!</span>do_work_until_done(<span style=color:#f92672>&amp;</span>job) {
</span></span><span style=display:flex><span>			<span style=color:#66d9ef>continue</span> job_loop
</span></span><span style=display:flex><span>		}
</span></span><span style=display:flex><span>		result, ok <span style=color:#f92672>:=</span> tally(<span style=color:#f92672>&amp;</span>job)
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>if</span> <span style=color:#960050;background-color:#1e0010>!</span>ok {
</span></span><span style=display:flex><span>			<span style=color:#66d9ef>continue</span> job_loop
</span></span><span style=display:flex><span>		}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>		fmt.printfln(<span style=color:#e6db74>&#34;Job #%i has completed its work. Result is: %i&#34;</span>, job.id, result)
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span><span style=color:#75715e>// [...]
</span></span></span></code></pre></div><p>The underlying operation is the same, but the code is more verbose where it doesn&rsquo;t need to be.
As shown in the example, <code>or_continue</code> also works with labels, just like <code>continue</code>.</p><h2 id=or_break-operator><code>or_break</code> operator <a class=text-decoration-none href=#or_break-operator>#</a></h2><p><code>or_break</code> follows the same mechanics as <code>or_continue</code>, except that it performs a <code>break</code> operation on its containing loop instead of a <code>continue</code>.</p><h2 id=conditional-compilation>Conditional compilation <a class=text-decoration-none href=#conditional-compilation>#</a></h2><p>A couple of ways are provided for doing this, and each of them have their uses.</p><h3 id=file-suffixes>File suffixes <a class=text-decoration-none href=#file-suffixes>#</a></h3><p>Often, you want to separate multiple implementations of a package based on the OS or the architecture.</p><p>Your .odin files can have a magic suffix that will cause the compiler to either include or exclude them based on the target platform or architecture, or both.</p><p>For example, <code>foobar_windows.odin</code> would only be compiled on Windows, <code>foobar_linux.odin</code> only on Linux, and <code>foobar_windows_amd64.odin</code> only on Windows AMD64.</p><p>Another reserved suffix is <code>_test</code>, which includes a file only when testing. Assume a package with <code>foobar.odin</code> and <code>foobar_test.odin</code>. Anything in <code>foobar_test.odin</code> will be hidden from <code>foobar.odin</code>, unless the <code>odin test</code> command is used.<br>Note that the entry point procedure <code>main</code> must not be located in a file with the <code>_test</code> suffix.</p><p>Please see the procedure attribute <a href=https://odin-lang.org/docs/overview/#test><code>@(test)</code></a> for more information.</p><h3 id=when-statements><code>when</code> statements <a class=text-decoration-none href=#when-statements>#</a></h3><p>Sometimes you only want to compile a block of code if a certain compile-time expression evaluates to <code>true</code>. This can be done using the <a href=#when-statement>when statements</a>:</p><pre tabindex=0><code>when ODIN_OS == .Linux {
	// Do Linux stuff
}
</code></pre><p>The compiler provides a set of builtin constants which are available in all files in a compilation, and which can be used in a <code>when</code> condition. Here is a comprehensive list of them:</p><table><thead><tr><th>Name</th><th>Description</th></tr></thead><tbody><tr><td><code>ODIN_ARCH</code></td><td>An enum value indicating what the CPU architecture of the target is. (<code>.amd64</code>, <code>.i386</code>, <code>.arm32</code>, <code>.arm64</code>, <code>.wasm32</code>, <code>.wasm64p32</code>, <code>.riscv64</code>)</td></tr><tr><td><code>ODIN_ARCH_STRING</code></td><td>A string indicating what the CPU architecture of the target is. (<code>"amd64"</code>, <code>"i386"</code>, <code>"arm32"</code>, <code>"arm64"</code>, <code>"wasm32"</code>, <code>"wasm64p32"</code>, <code>"riscv64"</code>)</td></tr><tr><td><code>ODIN_BUILD_MODE</code></td><td>An enum value indicating what type of compiled output the user desires. (<code>.Executable</code>, <code>.Dynamic</code>, <code>.Static</code>, <code>.Object</code>, <code>.Assembly</code>, or <code>.LLVM_IR</code>)</td></tr><tr><td><code>ODIN_BUILD_PROJECT_NAME</code></td><td>Name of the folder that contains the entry point.</td></tr><tr><td><code>ODIN_COMPILE_TIMESTAMP</code></td><td>An i64 containing the time at which the executable was compiled, in nanoseconds. This is compatible with the <code>time.Time</code> type, i.e. <code>time.Time{_nsec=ODIN_COMPILE_TIMESTAMP}</code></td></tr><tr><td><code>ODIN_DEBUG</code></td><td><code>true</code> if the <code>-debug</code> command line switch is passed, which enables debug info generation.</td></tr><tr><td><code>ODIN_DEFAULT_TO_NIL_ALLOCATOR</code></td><td><code>true</code> if the <code>-default-to-nil-allocator</code> command line switch is passed, which sets the initial allocator to an allocator that does nothing.</td></tr><tr><td><code>ODIN_DEFAULT_TO_PANIC_ALLOCATOR</code></td><td><code>true</code> if the <code>-default-to-panic-allocator</code> command line switch is passed, which sets the initial allocator to an allocator that panics if allocated from.</td></tr><tr><td><code>ODIN_DISABLE_ASSERT</code></td><td><code>true</code> if the <code>-disable-assert</code> command line switch is passed, which removes all calls to <code>assert</code> from the compilation.</td></tr><tr><td><code>ODIN_ENDIAN</code></td><td>An enum value indicating the endianness of the target. (<code>.Little</code>, <code>.Big</code>)</td></tr><tr><td><code>ODIN_ENDIAN_STRING</code></td><td>A string indicating the endianness of the target. (<code>"little"</code>, <code>"big"</code>)</td></tr><tr><td><code>ODIN_ERROR_POS_STYLE</code></td><td>An enum value set using the <code>-error-pos-style</code> switch, indicating the source location style used for compile errors and warnings. (<code>.Default</code> (Odin), <code>.Unix</code>)</td></tr><tr><td><code>ODIN_FOREIGN_ERROR_PROCEDURES</code></td><td><code>true</code> if the <code>-foreign-error-procedures</code> command line switch is passed, which inhibits generation of runtime error procedures, so that they can be in a separate compilation unit.</td></tr><tr><td><code>ODIN_MICROARCH_STRING</code></td><td>A string describing the microarchitecture used for code generation. Can be set using the <code>-microarch</code> command line switch. E.g. <code>"sandybridge"</code>.</td></tr><tr><td><code>ODIN_MINIMUM_OS_VERSION</code></td><td>An integer value representing the minimum OS version set using <code>-minimum-os-version</code>. Calculated as <code>major * 10_000 + minor * 100 + revision</code>, and defaults to <code>0</code> if not specified.</td></tr><tr><td><code>ODIN_NO_BOUNDS_CHECK</code></td><td><code>true</code> if the <code>-no-bounds-check</code> command line switch is passed, which disables bounds checking at runtime.</td></tr><tr><td><code>ODIN_NO_CRT</code></td><td><code>true</code> if the <code>-no-crt</code> command line switch is passed, which inhibits linking with the C Runtime Library, a.k.a. LibC.</td></tr><tr><td><code>ODIN_NO_ENTRY_POINT</code></td><td><code>true</code> if the <code>-no-entry-point</code> command line switch is passed, which makes the declaration of a <code>main</code> procedure optional.</td></tr><tr><td><code>ODIN_NO_RTTI</code></td><td><code>true</code> if the <code>-no-rtti</code> command line switch is passed, which inhibits generation of full Runtime Type Information.</td></tr><tr><td><code>ODIN_NO_TYPE_ASSERT</code></td><td><code>true</code> if the <code>-no-type-assert</code> command line switch is passed, which disables type assertion checking program wide.</td></tr><tr><td><code>ODIN_OPTIMIZATION_MODE</code></td><td>An enum value indicating the optimization level selected using the <code>-o</code> command line switch. (<code>.None</code>, <code>.Minimal</code>, <code>.Size</code>, <code>.Speed</code>, <code>.Aggressive</code>)</td></tr><tr><td><code>ODIN_OS</code></td><td>An enum value indicating what the target operating system is.</td></tr><tr><td><code>ODIN_OS_STRING</code></td><td>A string indicating what the target operating system is.</td></tr><tr><td><code>ODIN_PLATFORM_SUBTARGET</code></td><td>An enum value indicating the platform subtarget, chosen using the <code>-subtarget</code> switch. (<code>.Default</code>, <code>.iOS</code>, <code>.Android</code>)</td></tr><tr><td><code>ODIN_ROOT</code></td><td>Path to the folder containing the Odin compiler executable.</td></tr><tr><td><code>ODIN_SANITIZER_FLAGS</code></td><td>A bit_set indicating the sanitizer flags set using the <code>-sanitize</code> command line switch. (<code>.Address</code>, <code>.Memory</code>, and <code>.Thread</code>).</td></tr><tr><td><code>ODIN_TEST</code></td><td><code>true</code> if the code is being compiled via an invocation of <code>odin test</code>.</td></tr><tr><td><code>ODIN_USE_SEPARATE_MODULES</code></td><td><code>true</code> by default, false if the <code>-use-single-module</code> command line switch is passed to force a unity build. By default each package is compiled into an object file, then linked together.</td></tr><tr><td><code>ODIN_VALGRIND_SUPPORT</code></td><td><code>true</code> if Valgrind integration is supported on the target.</td></tr><tr><td><code>ODIN_VENDOR</code></td><td>String which identifies the compiler being used. The official compiler sets this to <code>"odin"</code>.</td></tr><tr><td><code>ODIN_VERSION</code></td><td>A string that represents the Odin compiler version being used. (e.g: <code>dev-2023-04</code>)</td></tr><tr><td><code>ODIN_VERSION_HASH</code></td><td>A string containing the Git hash part of the Odin version. Empty if <code>.git</code> could not be detected at the time the compiler was built.</td></tr><tr><td><code>ODIN_WINDOWS_SUBSYSTEM</code></td><td>An enum value indicating the desired Windows PE subsystem, chosen using the <code>-subsystem</code> switch. (<code>.Console</code> (default), <code>.Windows</code>, or <code>.Unknown</code> on non-Windows platforms.</td></tr><tr><td><code>ODIN_WINDOWS_SUBSYSTEM_STRING</code></td><td>A string indicating the desired Windows PE subsystem, chosen using the <code>-subsystem</code> switch. (<code>"CONSOLE"</code> (default), <code>"WINDOWS"</code>, or <code>""</code> on non-Windows platforms.</td></tr><tr><td><code>__ODIN_LLVM_F16_SUPPORTED</code></td><td><code>true</code> if LLVM supports the <code>f16</code> type.</td></tr></tbody></table><p>See the <a href=#tracking-allocator>tracking allocator</a> for an example of something that uses the <code>ODIN_DEBUG</code> constant in a <code>when</code> statement.</p><h3 id=command-line-defines>Command-line defines <a class=text-decoration-none href=#command-line-defines>#</a></h3><p>Sometimes you want to do something conditionally based on some compile-time parameters of some sort, but globally, across the entire project.
This is how you define those.</p><p>You may define a constant using the <code>-define</code> command line switch. e.g: <code>-define:FOO=true</code>.
You can then fetch its value as a constant in your code like this:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span>FOO <span style=color:#f92672>::</span> <span style=color:#a6e22e>#config</span>(FOO, <span style=color:#66d9ef>false</span>) <span style=color:#75715e>// defines `FOO` as a constant with the default value of false
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>BAR <span style=color:#f92672>::</span> <span style=color:#a6e22e>#config</span>(BAR_DEBUG, <span style=color:#66d9ef>true</span>) <span style=color:#75715e>// name can be different compared to the constant 
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>when</span> FOO {
</span></span><span style=display:flex><span>	<span style=color:#75715e>// only evaluated when `FOO` is true
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>} <span style=color:#66d9ef>else</span> {
</span></span><span style=display:flex><span>	<span style=color:#75715e>// only evaluate when `FOO` is false
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>}
</span></span></code></pre></div><p>The value for a command line define may be an integer, boolean, or string. Currently, no other types are supported.</p><p>You can read up further on <a href=#configidentifier-default>Built-in procedures</a> here.</p><h3 id=build-tags>Build tags <a class=text-decoration-none href=#build-tags>#</a></h3><p>This feature allows you to cover more edge-case situations where you want some code to be compiled on several platforms.</p><p>However, overly-liberal use of this feature can make it hard to reason about what code is included or not, based on the target platform or architecture.
<a href=#file-suffixes>File Suffixes</a> are typically a nicer approach if they cover what you need.</p><p>For the sake of demonstration, let&rsquo;s take POSIX: You could use <code>foobar_unix.odin</code>, which has no special meaning to the compiler at all, and use a tag in the file itself.</p><p>Here&rsquo;s an example of a file that will only be included on Linux or Darwin:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>#</span><span style=color:#f92672>+</span>build linux, darwin
</span></span><span style=display:flex><span><span style=color:#f92672>package</span> foobar
</span></span></code></pre></div><p>The opposite, excluding the file on both Linux and Darwin, is achieved like this:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>#</span><span style=color:#f92672>+</span>build <span style=color:#960050;background-color:#1e0010>!</span>linux
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>#</span><span style=color:#f92672>+</span>build <span style=color:#960050;background-color:#1e0010>!</span>darwin
</span></span><span style=display:flex><span><span style=color:#f92672>package</span> foobar
</span></span></code></pre></div><h4 id=advanced-build-tags>Advanced Build Tags <a class=text-decoration-none href=#advanced-build-tags>#</a></h4><h5 id=vet><code>#+vet</code> <a class=text-decoration-none href=#vet>#</a></h5><p>Can be used to enable or disable vetting options on a per-file basis.</p><p>Possible Options:</p><ul><li><code>unused</code></li><li><code>unused-variables</code></li><li><code>unused-imports</code></li><li><code>shadowing</code></li><li><code>using-stmt</code></li><li><code>using-param</code></li><li><code>style</code></li><li><code>semicolon</code></li><li><code>deprecated</code></li><li><code>cast</code></li><li><code>tabs</code></li><li><code>unused-procedures</code></li><li><code>explicit-allocators</code></li></ul><h5 id=test><code>#+test</code> <a class=text-decoration-none href=#test>#</a></h5><p>The file is completely ignored from parsing and type checking <em>EXCEPT</em> during <code>odin test</code>.</p><h5 id=ignore><code>#+ignore</code> <a class=text-decoration-none href=#ignore>#</a></h5><p>The file is completely ignored from parsing and type checking.</p><h5 id=private><code>#+private</code> <a class=text-decoration-none href=#private>#</a></h5><p>Using <code>#+private</code> before the package declaration will automatically add <code>@(private)</code> to everything in that file:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>#</span><span style=color:#f92672>+</span>private
</span></span><span style=display:flex><span><span style=color:#f92672>package</span> foo
</span></span></code></pre></div><p>And <code>#+private file</code> will be equivalent to automatically adding <code>@(private="file")</code> to each declaration. This means that to remove the private-to-file association, you must apply a private-to-package attribute <code>@(private)</code> to the declaration.</p><h5 id=feature><code>#+feature</code> <a class=text-decoration-none href=#feature>#</a></h5><p>Enables a specific feature or changes the behaviour of a specific aspect of the language</p><ul><li><code>#+feature dynamic-literals</code><ul><li>Enables dynamic-literals for types <code>map</code> and <code>[dynamic]T</code></li></ul></li><li><code>#+feature integer-divsion-by-zero:&lt;option></code><ul><li>Makes all integer division within this file operation a specific way</li><li><code>#+feature integer-divsion-by-zero:trap</code> &ndash; Trap on division/modulo/remainder by zero</li><li><code>#+feature integer-divsion-by-zero:zero</code> &ndash; <code>x/0 == 0</code> and <code>x%0 == x</code> and <code>x%%0 == x</code></li><li><code>#+feature integer-divsion-by-zero:self</code> &ndash; <code>x/0 == x</code> and <code>x%0 == 0</code> and <code>x%%0 == 0</code></li><li><code>#+feature integer-divsion-by-zero:all-bits</code> &ndash; <code>x/0 == ~T(0)</code> and <code>x%0 == x</code> and <code>x%%0 == x</code></li></ul></li><li><code>#+feature global-context</code><ul><li>Enable the use of globals that require the <code>context</code> to be defined in the global scope</li><li>The <code>context</code> by default does not exist in the global scope</li></ul></li></ul><h5 id=no-instrumentation><code>#+no-instrumentation</code> <a class=text-decoration-none href=#no-instrumentation>#</a></h5><p>Disables instrumentation within the entire file</p><h2 id=implicit-context-system>Implicit context system <a class=text-decoration-none href=#implicit-context-system>#</a></h2><p>In each scope, there is an implicit value named <code>context</code>. This <code>context</code> variable is local to each scope and is implicitly passed by pointer to any procedure call in that scope (if the procedure has the Odin calling convention).</p><p>The main purpose of the implicit <code>context</code> system is for the ability to intercept third-party code and libraries and modify their functionality. One such case is modifying how a library allocates something or logs something. In C, this was usually achieved with the library defining macros which could be overridden so that the user could define what they wanted. However, not many libraries supported this in many languages by default which meant intercepting third-party code to see what it does and to change how it does it was not possible.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span>main <span style=color:#f92672>::</span> <span style=color:#66d9ef>proc</span>() {
</span></span><span style=display:flex><span>	c <span style=color:#f92672>:=</span> <span style=color:#66d9ef>context</span> <span style=color:#75715e>// copy the current scope&#39;s context
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>context</span>.user_index <span style=color:#f92672>=</span> <span style=color:#a6e22e>456</span>
</span></span><span style=display:flex><span>	{
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>context</span>.allocator <span style=color:#f92672>=</span> my_custom_allocator()
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>context</span>.user_index <span style=color:#f92672>=</span> <span style=color:#a6e22e>123</span>
</span></span><span style=display:flex><span>		supertramp() <span style=color:#75715e>// the `context` for this scope is implicitly passed to `supertramp`
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>	}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#75715e>// `context` value is local to the scope it is in
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>	assert(<span style=color:#66d9ef>context</span>.user_index <span style=color:#f92672>==</span> <span style=color:#a6e22e>456</span>)
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>supertramp <span style=color:#f92672>::</span> <span style=color:#66d9ef>proc</span>() {
</span></span><span style=display:flex><span>	c <span style=color:#f92672>:=</span> <span style=color:#66d9ef>context</span> <span style=color:#75715e>// this `context` is the same as the parent procedure that it was called from
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>	<span style=color:#75715e>// From this example, context.user_index == 123
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>	<span style=color:#75715e>// A context.allocator is assigned to the return value of `my_custom_allocator()`
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>	<span style=color:#75715e>// The memory management procedure uses the `context.allocator` by default unless explicitly specified otherwise
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>	ptr <span style=color:#f92672>:=</span> <span style=color:#66d9ef>new</span>(<span style=color:#66d9ef>int</span>)
</span></span><span style=display:flex><span>	free(ptr)
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>By default, the <code>context</code> value has default values for its parameters which is decided in the package runtime. These defaults are compiler specific.</p><p>To see what the implicit <code>context</code> value contains, please see the definition of the <code>Context</code> struct in <a href=https://github.com/odin-lang/Odin/blob/master/base/runtime/core.odin>package runtime</a>.</p><h3 id=allocators>Allocators <a class=text-decoration-none href=#allocators>#</a></h3><p>Odin is a manual memory management based language. This means that Odin programmers must manage their own memory, allocations, and tracking. To aid with memory management, Odin has huge support for custom allocators, especially through the implicit <code>context</code> system.</p><p>The built-in types of dynamic arrays and <code>map</code> both contain a custom allocator. This allocator can be either manually set or the allocator from the current <code>context</code> will be assigned to the data type.</p><p>All allocations in Odin are preferably done through allocators. The core library of Odin takes advantage of allocators through the implicit <code>context</code> system. The following call:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span>ptr <span style=color:#f92672>:=</span> <span style=color:#66d9ef>new</span>(<span style=color:#66d9ef>int</span>)
</span></span></code></pre></div><p>is equivalent to this:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span>ptr <span style=color:#f92672>:=</span> <span style=color:#66d9ef>new</span>(<span style=color:#66d9ef>int</span>, <span style=color:#66d9ef>context</span>.allocator)
</span></span></code></pre></div><p>The allocator from the <code>context</code> is implicitly assigned as a default parameter to the built-in procedure <a href=http://pkg.odin-lang.org/base/builtin/#new><code>new</code></a>.</p><p>The implicit <code>context</code> stores two different forms of allocators: <code>context.allocator</code> and <code>context.temp_allocator</code>. Both can be reassigned to any kind of allocator. However, these allocators are to be treated slightly differently.</p><ul><li><code>context.allocator</code> is for &ldquo;general&rdquo; allocations, for the subsystem it is used within.</li><li><code>context.temp_allocator</code> is for temporary and short lived allocations, which are to be freed once per cycle/frame/etc.</li></ul><p>By default, the <code>context.allocator</code> is an OS heap allocator and the <code>context.temp_allocator</code> is assigned to a scratch allocator (a growing arena based allocator). <code>free_all(context.temp_allocator)</code> must be called to clear the contents of the temporary allocator&rsquo;s internal arena.</p><p>The following procedures are built-in (and also available in <code>package mem</code> with enforced allocator errors) and are encouraged for managing memory:</p><ul><li><a href=http://pkg.odin-lang.org/base/builtin/#new><code>new</code></a> - allocates a value of the type given. The result value is a pointer to the type given.</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span>ptr <span style=color:#f92672>:=</span> <span style=color:#66d9ef>new</span>(<span style=color:#66d9ef>int</span>)
</span></span><span style=display:flex><span>ptr<span style=color:#f92672>^</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>123</span>
</span></span><span style=display:flex><span>x<span style=color:#f92672>:</span> <span style=color:#66d9ef>int</span> <span style=color:#f92672>=</span> ptr<span style=color:#f92672>^</span>
</span></span></code></pre></div><ul><li><a href=http://pkg.odin-lang.org/base/builtin/#new><code>new_clone</code></a> - allocates a clone of the value passed to it. The resulting value of the type will be a pointer to the type of the value passed.</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span>x<span style=color:#f92672>:</span> <span style=color:#66d9ef>int</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>123</span>
</span></span><span style=display:flex><span>ptr<span style=color:#f92672>:</span> <span style=color:#f92672>^</span><span style=color:#66d9ef>int</span>
</span></span><span style=display:flex><span>ptr <span style=color:#f92672>=</span> new_clone(x)
</span></span><span style=display:flex><span>assert(ptr<span style=color:#f92672>^</span> <span style=color:#f92672>==</span> <span style=color:#a6e22e>123</span>)
</span></span></code></pre></div><ul><li><a href=http://pkg.odin-lang.org/base/builtin/#make><code>make</code></a> - allocates memory for a backing data structure of either a <a href=#slices>slice</a>, <a href=#dynamic-arrays>dynamic array</a>, or <a href=#maps>map</a>.</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span>slice <span style=color:#f92672>:=</span> <span style=color:#66d9ef>make</span>([]<span style=color:#66d9ef>int</span>, <span style=color:#a6e22e>65</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>dynamic_array_zero_length <span style=color:#f92672>:=</span> <span style=color:#66d9ef>make</span>([<span style=color:#66d9ef>dynamic</span>]<span style=color:#66d9ef>int</span>)
</span></span><span style=display:flex><span>dynamic_array_with_length <span style=color:#f92672>:=</span> <span style=color:#66d9ef>make</span>([<span style=color:#66d9ef>dynamic</span>]<span style=color:#66d9ef>int</span>, <span style=color:#a6e22e>32</span>)
</span></span><span style=display:flex><span>dynamic_array_with_length_and_capacity <span style=color:#f92672>:=</span> <span style=color:#66d9ef>make</span>([<span style=color:#66d9ef>dynamic</span>]<span style=color:#66d9ef>int</span>, <span style=color:#a6e22e>16</span>, <span style=color:#a6e22e>64</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>made_map <span style=color:#f92672>:=</span> <span style=color:#66d9ef>make</span>(<span style=color:#66d9ef>map</span>[<span style=color:#66d9ef>string</span>]<span style=color:#66d9ef>int</span>)
</span></span><span style=display:flex><span>made_map_with_reservation <span style=color:#f92672>:=</span> <span style=color:#66d9ef>make</span>(<span style=color:#66d9ef>map</span>[<span style=color:#66d9ef>string</span>]<span style=color:#66d9ef>int</span>, <span style=color:#a6e22e>64</span>)
</span></span></code></pre></div><ul><li><a href=http://pkg.odin-lang.org/base/builtin/#free><code>free</code></a> - frees the memory at the pointer given. <strong>Note:</strong> only free memory with the allocator it was allocated with.</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span>ptr <span style=color:#f92672>:=</span> <span style=color:#66d9ef>new</span>(<span style=color:#66d9ef>int</span>)
</span></span><span style=display:flex><span>free(ptr)
</span></span></code></pre></div><ul><li><a href=http://pkg.odin-lang.org/base/builtin/#free_all><code>free_all</code></a> - frees all the memory of the context&rsquo;s allocator (or given allocator). <strong>Note:</strong> not all allocators support this procedure.</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span>free_all()
</span></span><span style=display:flex><span>free_all(<span style=color:#66d9ef>context</span>.temp_allocator)
</span></span><span style=display:flex><span>free_all(my_allocator)
</span></span></code></pre></div><ul><li><a href=http://pkg.odin-lang.org/base/builtin/#delete><code>delete</code></a> - deletes the backing memory of a value allocated with make or a string that was allocated through an allocator.</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span><span style=color:#66d9ef>delete</span>(my_slice)
</span></span><span style=display:flex><span><span style=color:#66d9ef>delete</span>(my_dynamic_array)
</span></span><span style=display:flex><span><span style=color:#66d9ef>delete</span>(my_map)
</span></span><span style=display:flex><span><span style=color:#66d9ef>delete</span>(my_string)
</span></span><span style=display:flex><span><span style=color:#66d9ef>delete</span>(my_cstring)
</span></span></code></pre></div><p>To see more uses of allocators and allocation-related procedures, please see <a href=https://github.com/odin-lang/Odin/tree/master/core/mem><code>package mem</code></a> in the core library.</p><p>For more information regarding memory allocation strategies in general, please see <a href=https://www.gingerbill.org/series/memory-allocation-strategies/>Ginger Bill&rsquo;s Memory Allocation Strategy</a> series.</p><h4 id=tracking-allocator>Tracking allocator <a class=text-decoration-none href=#tracking-allocator>#</a></h4><p>In the core collection you&rsquo;ll find a tracking allocator that warns you if your program is leaking memory or if it does bad frees. Here&rsquo;s how to set it up:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span><span style=color:#f92672>package</span> main
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> <span style=color:#e6db74>&#34;core:fmt&#34;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> <span style=color:#e6db74>&#34;core:mem&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>main <span style=color:#f92672>::</span> <span style=color:#66d9ef>proc</span>() {
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>when</span> ODIN_DEBUG {
</span></span><span style=display:flex><span>		track<span style=color:#f92672>:</span> mem.Tracking_Allocator
</span></span><span style=display:flex><span>		mem.tracking_allocator_init(<span style=color:#f92672>&amp;</span>track, <span style=color:#66d9ef>context</span>.allocator)
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>context</span>.allocator <span style=color:#f92672>=</span> mem.tracking_allocator(<span style=color:#f92672>&amp;</span>track)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>defer</span> {
</span></span><span style=display:flex><span>			<span style=color:#66d9ef>if</span> <span style=color:#66d9ef>len</span>(track.allocation_map) <span style=color:#f92672>&gt;</span> <span style=color:#a6e22e>0</span> {
</span></span><span style=display:flex><span>				fmt.eprintf(<span style=color:#e6db74>&#34;=== %v allocations not freed: ===\n&#34;</span>, <span style=color:#66d9ef>len</span>(track.allocation_map))
</span></span><span style=display:flex><span>				<span style=color:#66d9ef>for</span> _, entry <span style=color:#66d9ef>in</span> track.allocation_map {
</span></span><span style=display:flex><span>					fmt.eprintf(<span style=color:#e6db74>&#34;- %v bytes @ %v\n&#34;</span>, entry.size, entry.location)
</span></span><span style=display:flex><span>				}
</span></span><span style=display:flex><span>			}
</span></span><span style=display:flex><span>			mem.tracking_allocator_destroy(<span style=color:#f92672>&amp;</span>track)
</span></span><span style=display:flex><span>		}
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>	
</span></span><span style=display:flex><span>	do_stuff()
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>This uses a <a href=#when-statements>when statement</a> to only enable the tracking allocator when the <code>-debug</code> compilation flag is set. Since it sets the tracking allocator on the context in the beginning of <code>main</code>, the rest of the program will use this tracking allocator.</p><p>Note that <code>when</code> blocks do not have a real scope, the curly braces <code>{}</code> are just there to group code. Any changes to the <code>context</code> within a <code>when</code> block are valid after the <code>when</code> block ends.</p><p>By default, the tracking allocator will panic if a bad free occurs. It will print a message that informs you where that bad free happened. You can override that behavior by overriding <code>track.bad_free_callback</code>:</p><pre tabindex=0><code>// This will add the bad frees to `track.bad_free_array`,
// you must manually check the contents of that array.
track.bad_free_callback = mem.tracking_allocator_bad_free_callback_add_to_array
</code></pre><h4 id=explicit-context-definition>Explicit <code>context</code> Definition <a class=text-decoration-none href=#explicit-context-definition>#</a></h4><p>Procedures which do not use the <code>"odin"</code> calling convention must explicitly assign the <code>context</code> if something within its body requires it.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span>explicit_context_definition <span style=color:#f92672>::</span> <span style=color:#66d9ef>proc</span> <span style=color:#e6db74>&#34;c&#34;</span> () {
</span></span><span style=display:flex><span>	<span style=color:#75715e>// Try commenting the following statement out below
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>	<span style=color:#66d9ef>context</span> <span style=color:#f92672>=</span> runtime.default_context()
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	fmt.println(<span style=color:#e6db74>&#34;\n#explicit context definition&#34;</span>)
</span></span><span style=display:flex><span>	dummy_procedure()
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>dummy_procedure <span style=color:#f92672>::</span> <span style=color:#66d9ef>proc</span>() {
</span></span><span style=display:flex><span>	fmt.println(<span style=color:#e6db74>&#34;dummy_procedure&#34;</span>)
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>Here is another example of setting an error callback for <code>vendor:glfw</code>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span>error_callback <span style=color:#f92672>::</span> <span style=color:#66d9ef>proc</span> <span style=color:#e6db74>&#34;c&#34;</span> (code<span style=color:#f92672>:</span> <span style=color:#66d9ef>i32</span>, desc<span style=color:#f92672>:</span> <span style=color:#66d9ef>cstring</span>) {
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>context</span> <span style=color:#f92672>=</span> runtime.default_context() <span style=color:#75715e>// set the current context
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>	fmt.println(desc, code) <span style=color:#75715e>// fmt.* calls use the odin calling convention
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>}
</span></span><span style=display:flex><span>glfw.SetErrorCallback(error_callback)
</span></span></code></pre></div><h3 id=logging-system>Logging System <a class=text-decoration-none href=#logging-system>#</a></h3><p>As part of the implicit <code>context</code> system, there is a built-in logging system.</p><p>To see more uses of loggers, please see <a href=https://github.com/odin-lang/Odin/tree/master/core/log><code>package log</code></a> in the core library.</p><h2 id=foreign-system>Foreign system <a class=text-decoration-none href=#foreign-system>#</a></h2><p>It is sometimes necessary to interface with foreign code, such as a C library. In Odin, this is achieved through the <code>foreign</code> system. You can &ldquo;import&rdquo; a library into the code using the same semantics as a normal import declaration:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span><span style=color:#66d9ef>foreign</span> <span style=color:#f92672>import</span> kernel32 <span style=color:#e6db74>&#34;system:kernel32.lib&#34;</span>
</span></span></code></pre></div><p>This <code>foreign import</code> declaration will create a &ldquo;foreign import name&rdquo; which can then be used to associate entities within a foreign block.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span><span style=color:#66d9ef>foreign</span> <span style=color:#f92672>import</span> kernel32 <span style=color:#e6db74>&#34;system:kernel32.lib&#34;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>foreign</span> kernel32 {
</span></span><span style=display:flex><span>	ExitProcess <span style=color:#f92672>::</span> <span style=color:#66d9ef>proc</span> <span style=color:#e6db74>&#34;stdcall&#34;</span> (exit_code<span style=color:#f92672>:</span>  <span style=color:#66d9ef>u32</span>) <span style=color:#f92672>---</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>The Odin compiler can also automatically build and link imported assembly files.
Depending on the host system, <a href=https://clang.llvm.org/><code>clang</code></a>, <a href=https://www.gnu.org/software/binutils><code>as</code></a>, or <a href=https://nasm.us/><code>nasm</code></a> may be used to compile the assembly.
Recognized file extensions for assembly files are: <code>asm</code>, <code>s</code>, and <code>S</code>.</p><p>For examples of how Odin uses this feature, see <code>base/runtime/entry_*.asm</code>.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span><span style=color:#66d9ef>foreign</span> <span style=color:#f92672>import</span> lowlevel <span style=color:#e6db74>&#34;lowlevel.asm&#34;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>foreign</span> lowlevel {
</span></span><span style=display:flex><span>    __get_flags <span style=color:#f92672>::</span> <span style=color:#66d9ef>proc</span> <span style=color:#e6db74>&#34;c&#34;</span> () <span style=color:#f92672>-&gt;</span> <span style=color:#66d9ef>u64</span> <span style=color:#f92672>---</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><pre tabindex=0><code class=language-x86asm data-lang=x86asm>bits 64

global __get_flags

section .text
__get_flags:
	pushfq
	pop rax
	ret
</code></pre><p>If a library exports global variables, you can import those into Odin as well.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span><span style=color:#66d9ef>foreign</span> lib {
</span></span><span style=display:flex><span>	x<span style=color:#f92672>:</span> <span style=color:#66d9ef>i32</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>Foreign procedure declarations have the <strong>cdecl</strong>/<strong>c</strong> calling convention by default unless specified otherwise. Due to foreign procedures not having a body declared within this code, you need to append the <code>---</code> symbol to the end to distinguish it as a procedure literal without a body and not a procedure type.</p><p>The attributes system can be used to change specific properties of entities declared within a block:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span><span style=color:#a6e22e>@(default_calling_convention = &#34;std&#34;)</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>foreign</span> kernel32 {
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>@(link_name=&#34;GetLastError&#34;) get_last_error :: proc()</span> <span style=color:#f92672>-&gt;</span> <span style=color:#66d9ef>i32</span> <span style=color:#f92672>---</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>Available attributes for foreign blocks:</p><ul><li><code>default_calling_convention=&lt;string></code> - The default calling convention for procedures declared within this foreign block.</li><li><code>link_prefix=&lt;string></code> - This prefix is prepended to the linkage names of the entities except where the link name has been explicitly overridden.</li><li><code>link_suffix=&lt;string></code> - This suffix is appended to the linkage names of the entities except where the link name has been explicitly overridden.</li><li><code>private=&lt;string></code> - The default private level for all entities. Defaults to <code>"package"</code> if not set but may be set to <code>"file"</code>.</li><li><code>require_results</code> - All procedures declared within this foreign block must have their return values used.</li></ul><h2 id=using-a-vendor-library>Using a <code>vendor</code> library <a class=text-decoration-none href=#using-a-vendor-library>#</a></h2><p>As described in the <a href=#foreign-system>Foreign System</a> we often want to use existing <code>C</code> libraries. Odin has a wide collection of maintained <a href=https://github.com/odin-lang/Odin/tree/master/vendor>bindings and ports</a>.</p><p><strong>Note:</strong> Case notation should remain the same as the original authors intended, to make porting code easier.</p><p>Let&rsquo;s run through how we could use the <code>vendor:glfw</code> library. The code will be based on their <a href=https://www.glfw.org/docs/latest/quick_guide.html>Quick Guide</a> but we will simplify it to only show using <code>glfw</code>.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span><span style=color:#f92672>package</span> main
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> <span style=color:#e6db74>&#34;base:runtime&#34;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> <span style=color:#e6db74>&#34;core:fmt&#34;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> <span style=color:#e6db74>&#34;vendor:glfw&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>error_callback <span style=color:#f92672>::</span> <span style=color:#66d9ef>proc</span> <span style=color:#e6db74>&#34;c&#34;</span> (code<span style=color:#f92672>:</span> <span style=color:#66d9ef>i32</span>, desc<span style=color:#f92672>:</span> <span style=color:#66d9ef>cstring</span>) {
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>context</span> <span style=color:#f92672>=</span> runtime.default_context()
</span></span><span style=display:flex><span>	fmt.println(desc, code)
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>key_callback <span style=color:#f92672>::</span> <span style=color:#66d9ef>proc</span> <span style=color:#e6db74>&#34;c&#34;</span> (window<span style=color:#f92672>:</span> glfw.WindowHandle, key, scancode, action, mods<span style=color:#f92672>:</span> <span style=color:#66d9ef>i32</span>) {
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>if</span> key <span style=color:#f92672>==</span> glfw.KEY_ESCAPE <span style=color:#f92672>&amp;&amp;</span> action <span style=color:#f92672>==</span> glfw.PRESS {
</span></span><span style=display:flex><span>		glfw.SetWindowShouldClose(window, glfw.TRUE)
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>main <span style=color:#f92672>::</span> <span style=color:#66d9ef>proc</span>() {
</span></span><span style=display:flex><span>	glfw.SetErrorCallback(error_callback)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>if</span> <span style=color:#960050;background-color:#1e0010>!</span>glfw.Init() {
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>panic</span>(<span style=color:#e6db74>&#34;EXIT_FAILURE&#34;</span>)
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>defer</span> glfw.Terminate()
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	glfw.WindowHint(glfw.CONTEXT_VERSION_MAJOR, <span style=color:#a6e22e>2</span>)
</span></span><span style=display:flex><span>	glfw.WindowHint(glfw.CONTEXT_VERSION_MINOR, <span style=color:#a6e22e>0</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	window <span style=color:#f92672>:=</span> glfw.CreateWindow(<span style=color:#a6e22e>640</span>, <span style=color:#a6e22e>480</span>, <span style=color:#e6db74>&#34;Simple example&#34;</span>, <span style=color:#66d9ef>nil</span>, <span style=color:#66d9ef>nil</span>)
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>if</span> window <span style=color:#f92672>==</span> <span style=color:#66d9ef>nil</span> {
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>panic</span>(<span style=color:#e6db74>&#34;EXIT_FAILURE&#34;</span>)
</span></span><span style=display:flex><span>	}	
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>defer</span> glfw.DestroyWindow(window)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	glfw.SetKeyCallback(window, key_callback)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	glfw.MakeContextCurrent(window)
</span></span><span style=display:flex><span>	<span style=color:#75715e>// ...
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>	glfw.SwapInterval(<span style=color:#a6e22e>1</span>)
</span></span><span style=display:flex><span>	<span style=color:#75715e>// ...
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>for</span> <span style=color:#960050;background-color:#1e0010>!</span>glfw.WindowShouldClose(window) {
</span></span><span style=display:flex><span>		<span style=color:#75715e>// ...
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>		glfw.SwapBuffers(window)
</span></span><span style=display:flex><span>		glfw.PollEvents()
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>As we can see there is little difference to how someone would use <code>vendor:glfw</code> in this case. It&rsquo;s not always perfect but often good enough to port existing code quickly.</p><h2 id=parametric-polymorphism>Parametric polymorphism <a class=text-decoration-none href=#parametric-polymorphism>#</a></h2><p>Parametric polymorphism, commonly referred to as &ldquo;generics&rdquo;, allow the user to create a procedure or data that can be written <em>generically</em> so it can handle values in the same manner.</p><p><strong>Note:</strong> Within the Odin code base and documentation, the nickname &ldquo;parapoly&rdquo; is usually used.</p><h3 id=explicit-parametric-polymorphism>Explicit parametric polymorphism <a class=text-decoration-none href=#explicit-parametric-polymorphism>#</a></h3><p>Explicit parametric polymorphism means that the types of the parameters of a <code>proc</code> or of the data fields of a <code>struct</code> (when intended to potentially be used with multiple possible types) must be explicitly provided. This is similar to how C++ allows the use of <code>template</code>s to fill out the body of a procedure or data structure with the types that are given at compile-time as input to the <code>template</code> parameters, but in Odin explicit parametric polymorphism is safer and cleaner to work with.</p><h4 id=procedures-using-explicit-parametric-polymorphism-parapoly>Procedures using explicit parametric polymorphism (parapoly) <a class=text-decoration-none href=#procedures-using-explicit-parametric-polymorphism-parapoly>#</a></h4><p>As a reminder, all parameters passed into a function are immutable in the sense that they can&rsquo;t have their value changed using <code>=</code> directly. A useful idiom is <code>var := var</code>, which expresses a variable shadowing itself. When used at the top of a procedure the compiler understands the use case of enabling local modification of the otherwise immutable parameter variable, and won&rsquo;t complain about the shadowing when you compile with <code>-vet</code>.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span>sin_tau <span style=color:#f92672>::</span> <span style=color:#66d9ef>proc</span>(angle_in_cycles<span style=color:#f92672>:</span> <span style=color:#66d9ef>f64</span>) <span style=color:#f92672>-&gt;</span> <span style=color:#66d9ef>f64</span> {
</span></span><span style=display:flex><span>    angle_in_cycles <span style=color:#f92672>:=</span> angle_in_cycles   <span style=color:#75715e>// Allows `angle_in_cycles` to have its value changed
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    
</span></span><span style=display:flex><span>    TAU <span style=color:#f92672>::</span> <span style=color:#a6e22e>2</span> <span style=color:#f92672>*</span> math.PI
</span></span><span style=display:flex><span>    angle_in_cycles <span style=color:#f92672>*=</span> TAU
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> math.sin(angle_in_cycles)
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>assert(math.abs(sin_tau(<span style=color:#a6e22e>0</span><span style=color:#ae81ff>.25</span>) <span style=color:#f92672>-</span> <span style=color:#a6e22e>1</span>) <span style=color:#f92672>&lt;=</span> <span style=color:#a6e22e>0</span><span style=color:#ae81ff>.001</span>)   <span style=color:#75715e>// sin_tau(0.25) is approximately 1
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>assert(math.abs(sin_tau(<span style=color:#a6e22e>0</span><span style=color:#ae81ff>.75</span>) <span style=color:#f92672>-</span> <span style=color:#f92672>-</span><span style=color:#a6e22e>1</span>) <span style=color:#f92672>&lt;=</span> <span style=color:#a6e22e>0</span><span style=color:#ae81ff>.001</span>)  <span style=color:#75715e>// sin_tau(0.75) is approximately -1
</span></span></span></code></pre></div><p>However, to specify that a parameter must be a <strong>compile-time</strong> constant, which is not the same thing as an immutable parameter, and may sometimes be necessary (e.g. for parapoly) or desirable (e.g. to enforce compile-time computation), the parameter&rsquo;s name must be prefixed with a dollar sign <code>$</code>. The following example takes two compile-time constant parameters and then uses them to initialize an array of known length:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span>make_f32_array <span style=color:#f92672>::</span> <span style=color:#a6e22e>#force_inline</span> <span style=color:#66d9ef>proc</span>(<span style=color:#960050;background-color:#1e0010>$</span>N<span style=color:#f92672>:</span> <span style=color:#66d9ef>int</span>, <span style=color:#960050;background-color:#1e0010>$</span>val<span style=color:#f92672>:</span> <span style=color:#66d9ef>f32</span>) <span style=color:#f92672>-&gt;</span> (res<span style=color:#f92672>:</span> [N]<span style=color:#66d9ef>f32</span>) {
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>for</span> _, i <span style=color:#66d9ef>in</span> res {
</span></span><span style=display:flex><span>		res[i] <span style=color:#f92672>=</span> val<span style=color:#f92672>*</span>val
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>return</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>array <span style=color:#f92672>:=</span> make_f32_array(<span style=color:#a6e22e>3</span>, <span style=color:#a6e22e>2</span>)
</span></span></code></pre></div><p>Types can also be explicitly passed by specifying that the <code>typeid</code> parameter is constant:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span>my_new <span style=color:#f92672>::</span> <span style=color:#66d9ef>proc</span>(<span style=color:#960050;background-color:#1e0010>$</span>T<span style=color:#f92672>:</span> <span style=color:#66d9ef>typeid</span>) <span style=color:#f92672>-&gt;</span> <span style=color:#f92672>^</span>T {
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>return</span> (<span style=color:#f92672>^</span>T)(alloc(size_of(T), align_of(T)))
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>ptr <span style=color:#f92672>:=</span> my_new(<span style=color:#66d9ef>int</span>)
</span></span></code></pre></div><h4 id=data-types-using-explicit-parametric-polymorphism-parapoly>Data types using explicit parametric polymorphism (parapoly) <a class=text-decoration-none href=#data-types-using-explicit-parametric-polymorphism-parapoly>#</a></h4><p>Structures and unions may have polymorphic parameters and the syntax for doing so is similar to procedure call syntax.
<strong>Parapoly struct:</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span>Table_Slot <span style=color:#f92672>::</span> <span style=color:#66d9ef>struct</span>(<span style=color:#960050;background-color:#1e0010>$</span>Key, <span style=color:#960050;background-color:#1e0010>$</span>Value<span style=color:#f92672>:</span> <span style=color:#66d9ef>typeid</span>) {
</span></span><span style=display:flex><span>	occupied<span style=color:#f92672>:</span> <span style=color:#66d9ef>bool</span>,
</span></span><span style=display:flex><span>	hash<span style=color:#f92672>:</span>    <span style=color:#66d9ef>u32</span>,
</span></span><span style=display:flex><span>	key<span style=color:#f92672>:</span>     Key,
</span></span><span style=display:flex><span>	value<span style=color:#f92672>:</span>   Value,
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>slot<span style=color:#f92672>:</span> Table_Slot(<span style=color:#66d9ef>string</span>, <span style=color:#66d9ef>int</span>)
</span></span></code></pre></div><p><strong>Parapoly union:</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span>Error <span style=color:#f92672>::</span> <span style=color:#66d9ef>enum</span> {Foo0, Foo1, Foo2}
</span></span><span style=display:flex><span>Param_Union <span style=color:#f92672>::</span> <span style=color:#66d9ef>union</span>(<span style=color:#960050;background-color:#1e0010>$</span>T<span style=color:#f92672>:</span> <span style=color:#66d9ef>typeid</span>) <span style=color:#a6e22e>#no_nil</span> {T, Error}
</span></span><span style=display:flex><span>r<span style=color:#f92672>:</span> Param_Union(<span style=color:#66d9ef>int</span>)
</span></span><span style=display:flex><span>r <span style=color:#f92672>=</span> <span style=color:#a6e22e>123</span>
</span></span><span style=display:flex><span>r <span style=color:#f92672>=</span> Error.Foo0
</span></span></code></pre></div><p>The <code>$</code> prefix is optional for record data types as all parameters must be &ldquo;constant&rdquo;.</p><h3 id=implicit-parametric-polymorphism>Implicit parametric polymorphism <a class=text-decoration-none href=#implicit-parametric-polymorphism>#</a></h3><p>Implicit implies that the type of a parameter is inferred from its input. In this case, the dollar sign <code>$</code> can be placed on the type.</p><p><strong>Note:</strong> Within the Odin code base and documentation, the name &ldquo;polymorphic name&rdquo; is usually used.</p><h4 id=procedures-using-implicit-parametric-polymorphism-parapoly>Procedures using implicit parametric polymorphism (parapoly) <a class=text-decoration-none href=#procedures-using-implicit-parametric-polymorphism-parapoly>#</a></h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span>foo <span style=color:#f92672>::</span> <span style=color:#66d9ef>proc</span>(<span style=color:#960050;background-color:#1e0010>$</span>N<span style=color:#f92672>:</span> <span style=color:#960050;background-color:#1e0010>$</span>I, <span style=color:#960050;background-color:#1e0010>$</span>T<span style=color:#f92672>:</span> <span style=color:#66d9ef>typeid</span>) <span style=color:#f92672>-&gt;</span> (res<span style=color:#f92672>:</span> [N]T) {
</span></span><span style=display:flex><span>	<span style=color:#75715e>// `N` is the constant value passed
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>	<span style=color:#75715e>// `I` is the type of `N`
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>	<span style=color:#75715e>// `T` is the type passed
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>	fmt.printf(<span style=color:#e6db74>&#34;Generating an array of type %v from the value %v of type %v\n&#34;</span>,
</span></span><span style=display:flex><span>			   typeid_of(type_of(res)), N, typeid_of(I))
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>for</span> i <span style=color:#66d9ef>in</span> <span style=color:#a6e22e>0</span><span style=color:#f92672>..&lt;</span>N {
</span></span><span style=display:flex><span>		res[i] <span style=color:#f92672>=</span> i<span style=color:#f92672>*</span>i
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>return</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>T <span style=color:#f92672>::</span> <span style=color:#66d9ef>int</span>
</span></span><span style=display:flex><span>array <span style=color:#f92672>:=</span> foo(<span style=color:#a6e22e>4</span>, T)
</span></span><span style=display:flex><span><span style=color:#66d9ef>for</span> v, i <span style=color:#66d9ef>in</span> array {
</span></span><span style=display:flex><span>	assert(v <span style=color:#f92672>==</span> T(i<span style=color:#f92672>*</span>i))
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h4 id=specialization>Specialization <a class=text-decoration-none href=#specialization>#</a></h4><p>In some cases, you may want to specify that a type must be a specialization of a certain type.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span><span style=color:#75715e>// Only allow types that are specializations of a (polymorphic) slice
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>make_slice <span style=color:#f92672>::</span> <span style=color:#66d9ef>proc</span>(<span style=color:#960050;background-color:#1e0010>$</span>T<span style=color:#f92672>:</span> <span style=color:#66d9ef>typeid</span><span style=color:#f92672>/</span>[]<span style=color:#960050;background-color:#1e0010>$</span>E, <span style=color:#66d9ef>len</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>int</span>) <span style=color:#f92672>-&gt;</span> T {
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>return</span> <span style=color:#66d9ef>make</span>(T, <span style=color:#66d9ef>len</span>)
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span>Table_Slot <span style=color:#f92672>::</span> <span style=color:#66d9ef>struct</span>(<span style=color:#960050;background-color:#1e0010>$</span>Key, <span style=color:#960050;background-color:#1e0010>$</span>Value<span style=color:#f92672>:</span> <span style=color:#66d9ef>typeid</span>) {
</span></span><span style=display:flex><span>	occupied<span style=color:#f92672>:</span> <span style=color:#66d9ef>bool</span>,
</span></span><span style=display:flex><span>	hash<span style=color:#f92672>:</span>     <span style=color:#66d9ef>u32</span>,
</span></span><span style=display:flex><span>	key<span style=color:#f92672>:</span>      Key,
</span></span><span style=display:flex><span>	value<span style=color:#f92672>:</span>    Value,
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>Table <span style=color:#f92672>::</span> <span style=color:#66d9ef>struct</span>(<span style=color:#960050;background-color:#1e0010>$</span>Key, <span style=color:#960050;background-color:#1e0010>$</span>Value<span style=color:#f92672>:</span> <span style=color:#66d9ef>typeid</span>) {
</span></span><span style=display:flex><span>	count<span style=color:#f92672>:</span>     <span style=color:#66d9ef>int</span>,
</span></span><span style=display:flex><span>	allocator<span style=color:#f92672>:</span> mem.Allocator,
</span></span><span style=display:flex><span>	slots<span style=color:#f92672>:</span>     []Table_Slot(Key, Value),
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Only allow types that are specializations of `Table`
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>allocate <span style=color:#f92672>::</span> <span style=color:#66d9ef>proc</span>(table<span style=color:#f92672>:</span> <span style=color:#f92672>^</span><span style=color:#960050;background-color:#1e0010>$</span>T<span style=color:#f92672>/</span>Table, capacity<span style=color:#f92672>:</span> <span style=color:#66d9ef>int</span>) {
</span></span><span style=display:flex><span>	...
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// find :: proc(table: ^$T/Table, key: T.Key) -&gt; (T.Value, bool) {
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>find <span style=color:#f92672>::</span> <span style=color:#66d9ef>proc</span>(table<span style=color:#f92672>:</span> <span style=color:#f92672>^</span>Table(<span style=color:#960050;background-color:#1e0010>$</span>Key, <span style=color:#960050;background-color:#1e0010>$</span>Value), key<span style=color:#f92672>:</span> Key) <span style=color:#f92672>-&gt;</span> (Value, <span style=color:#66d9ef>bool</span>) {
</span></span><span style=display:flex><span>	...
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h3 id=where-clauses><code>where</code> clauses <a class=text-decoration-none href=#where-clauses>#</a></h3><p>A bound on polymorphic parameters to a procedure or record can be expressed using a <code>where</code> clause immediately before opening <code>{</code>, rather than at the type&rsquo;s or constant&rsquo;s first mention. Additionally, <code>where</code> clauses can apply bounds to arbitrary types, rather than just polymorphic type parameters.</p><p>Some cases that a <code>where</code> clause may be useful:</p><ul><li>Sanity checks for parameters:</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span>simple_sanity_check <span style=color:#f92672>::</span> <span style=color:#66d9ef>proc</span>(x<span style=color:#f92672>:</span> [<span style=color:#a6e22e>2</span>]<span style=color:#66d9ef>int</span>)
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>where</span> <span style=color:#66d9ef>len</span>(x) <span style=color:#f92672>&gt;</span> <span style=color:#a6e22e>1</span>,
</span></span><span style=display:flex><span>		  type_of(x) <span style=color:#f92672>==</span> [<span style=color:#a6e22e>2</span>]<span style=color:#66d9ef>int</span> {
</span></span><span style=display:flex><span>	fmt.println(x)
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><ul><li>Parameter polymorphism checks for procedures:</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span>cross_2d <span style=color:#f92672>::</span> <span style=color:#66d9ef>proc</span>(a, b<span style=color:#f92672>:</span> <span style=color:#960050;background-color:#1e0010>$</span>T<span style=color:#f92672>/</span>[<span style=color:#a6e22e>2</span>]<span style=color:#960050;background-color:#1e0010>$</span>E) <span style=color:#f92672>-&gt;</span> E
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>where</span> intrinsics.type_is_numeric(E) {
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>return</span> a.x<span style=color:#f92672>*</span>b.y <span style=color:#f92672>-</span> a.y<span style=color:#f92672>*</span>b.x
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>cross_3d <span style=color:#f92672>::</span> <span style=color:#66d9ef>proc</span>(a, b<span style=color:#f92672>:</span> <span style=color:#960050;background-color:#1e0010>$</span>T<span style=color:#f92672>/</span>[<span style=color:#a6e22e>3</span>]<span style=color:#960050;background-color:#1e0010>$</span>E) <span style=color:#f92672>-&gt;</span> T
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>where</span> intrinsics.type_is_numeric(E) {
</span></span><span style=display:flex><span>	x <span style=color:#f92672>:=</span> a.y<span style=color:#f92672>*</span>b.z <span style=color:#f92672>-</span> a.z<span style=color:#f92672>*</span>b.y
</span></span><span style=display:flex><span>	y <span style=color:#f92672>:=</span> a.z<span style=color:#f92672>*</span>b.x <span style=color:#f92672>-</span> a.x<span style=color:#f92672>*</span>b.z
</span></span><span style=display:flex><span>	z <span style=color:#f92672>:=</span> a.x<span style=color:#f92672>*</span>b.y <span style=color:#f92672>-</span> a.y<span style=color:#f92672>*</span>b.x
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>return</span> T{x, y, z}
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>a <span style=color:#f92672>:=</span> [<span style=color:#a6e22e>2</span>]<span style=color:#66d9ef>int</span>{<span style=color:#a6e22e>1</span>, <span style=color:#a6e22e>2</span>}
</span></span><span style=display:flex><span>b <span style=color:#f92672>:=</span> [<span style=color:#a6e22e>2</span>]<span style=color:#66d9ef>int</span>{<span style=color:#a6e22e>5</span>, <span style=color:#f92672>-</span><span style=color:#a6e22e>3</span>}
</span></span><span style=display:flex><span>fmt.println(cross_2d(a, b))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>x <span style=color:#f92672>:=</span> [<span style=color:#a6e22e>3</span>]<span style=color:#66d9ef>f32</span>{<span style=color:#a6e22e>1</span>, <span style=color:#a6e22e>4</span>, <span style=color:#a6e22e>9</span>}
</span></span><span style=display:flex><span>y <span style=color:#f92672>:=</span> [<span style=color:#a6e22e>3</span>]<span style=color:#66d9ef>f32</span>{<span style=color:#f92672>-</span><span style=color:#a6e22e>5</span>, <span style=color:#a6e22e>0</span>, <span style=color:#a6e22e>3</span>}
</span></span><span style=display:flex><span>fmt.println(cross_3d(x, y))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Failure case
</span></span></span><span style=display:flex><span><span style=color:#75715e>// i := [2]bool{true, false}
</span></span></span><span style=display:flex><span><span style=color:#75715e>// j := [2]bool{false, true}
</span></span></span><span style=display:flex><span><span style=color:#75715e>// fmt.println(cross_2d(i, j))
</span></span></span></code></pre></div><ul><li>Solving disambiguations with polymorphic procedures in a procedure grouping:</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span>foo <span style=color:#f92672>::</span> <span style=color:#66d9ef>proc</span>(x<span style=color:#f92672>:</span> [<span style=color:#960050;background-color:#1e0010>$</span>N]<span style=color:#66d9ef>int</span>) <span style=color:#f92672>-&gt;</span> <span style=color:#66d9ef>bool</span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>where</span> N <span style=color:#f92672>&gt;</span> <span style=color:#a6e22e>2</span> {
</span></span><span style=display:flex><span>	fmt.println(<span style=color:#a6e22e>#procedure</span>, <span style=color:#e6db74>&#34;was called with the parameter&#34;</span>, x)
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>return</span> <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>bar <span style=color:#f92672>::</span> <span style=color:#66d9ef>proc</span>(x<span style=color:#f92672>:</span> [<span style=color:#960050;background-color:#1e0010>$</span>N]<span style=color:#66d9ef>int</span>) <span style=color:#f92672>-&gt;</span> <span style=color:#66d9ef>bool</span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>where</span> <span style=color:#a6e22e>0</span> <span style=color:#f92672>&lt;</span> N,
</span></span><span style=display:flex><span>		  N <span style=color:#f92672>&lt;=</span> <span style=color:#a6e22e>2</span> {
</span></span><span style=display:flex><span>	fmt.println(<span style=color:#a6e22e>#procedure</span>, <span style=color:#e6db74>&#34;was called with the parameter&#34;</span>, x)
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>return</span> <span style=color:#66d9ef>false</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>baz <span style=color:#f92672>::</span> <span style=color:#66d9ef>proc</span>{foo, bar}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>x <span style=color:#f92672>:=</span> [<span style=color:#a6e22e>3</span>]<span style=color:#66d9ef>int</span>{<span style=color:#a6e22e>1</span>, <span style=color:#a6e22e>2</span>, <span style=color:#a6e22e>3</span>}
</span></span><span style=display:flex><span>y <span style=color:#f92672>:=</span> [<span style=color:#a6e22e>2</span>]<span style=color:#66d9ef>int</span>{<span style=color:#a6e22e>4</span>, <span style=color:#a6e22e>9</span>}
</span></span><span style=display:flex><span>ok_x <span style=color:#f92672>:=</span> baz(x)
</span></span><span style=display:flex><span>ok_y <span style=color:#f92672>:=</span> baz(y)
</span></span><span style=display:flex><span>assert(ok_x <span style=color:#f92672>==</span> <span style=color:#66d9ef>true</span>)
</span></span><span style=display:flex><span>assert(ok_y <span style=color:#f92672>==</span> <span style=color:#66d9ef>false</span>)
</span></span></code></pre></div><ul><li>Restrictions on parametric polymorphic parameters for record types:</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span>Foo <span style=color:#f92672>::</span> <span style=color:#66d9ef>struct</span>(<span style=color:#960050;background-color:#1e0010>$</span>T<span style=color:#f92672>:</span> <span style=color:#66d9ef>typeid</span>, <span style=color:#960050;background-color:#1e0010>$</span>N<span style=color:#f92672>:</span> <span style=color:#66d9ef>int</span>)
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>where</span> intrinsics.type_is_integer(T),
</span></span><span style=display:flex><span>	      N <span style=color:#f92672>&gt;</span> <span style=color:#a6e22e>2</span> {
</span></span><span style=display:flex><span>	x<span style=color:#f92672>:</span> [N]T,
</span></span><span style=display:flex><span>	y<span style=color:#f92672>:</span> [N<span style=color:#f92672>-</span><span style=color:#a6e22e>2</span>]T,
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>T <span style=color:#f92672>::</span> <span style=color:#66d9ef>i32</span>
</span></span><span style=display:flex><span>N <span style=color:#f92672>::</span> <span style=color:#a6e22e>5</span>
</span></span><span style=display:flex><span>f<span style=color:#f92672>:</span> Foo(T, N)
</span></span><span style=display:flex><span><span style=color:#a6e22e>#assert</span>(size_of(f) <span style=color:#f92672>==</span> (N<span style=color:#f92672>+</span>N<span style=color:#f92672>-</span><span style=color:#a6e22e>2</span>)<span style=color:#f92672>*</span>size_of(T))
</span></span></code></pre></div><h2 id=--operator-selector-call-expressions><code>-></code> operator (selector call expressions) <a class=text-decoration-none href=#--operator-selector-call-expressions>#</a></h2><p>The <code>-></code> operator is called the selector call expression operator and is extremely useful for call procedures stored in vtables. <a href=https://docs.microsoft.com/en-us/windows/win32/com/component-object-model--com--portal>Component Objective Model (COM)</a> APIs is a great example of where this kind of thing is extremely useful (such as the <a href=https://pkg.odin-lang.org/vendor/directx/d3d11/>Direct3D11 package</a>).</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span>x<span style=color:#f92672>-&gt;</span>y(<span style=color:#a6e22e>123</span>)
</span></span><span style=display:flex><span><span style=color:#75715e>// is equivalent to
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>x.y(x, <span style=color:#a6e22e>123</span>)
</span></span></code></pre></div><p>As the <code>-></code> operator is effectively syntactic sugar, all of the same semantics still apply, meaning subtyping through <code>using</code> will still work as expected to allow for the emulation of type hierarchies.</p><h2 id=attributes>Attributes <a class=text-decoration-none href=#attributes>#</a></h2><p>Attributes modify the compilation details or behaviour of declarations.</p><h3 id=general-attributes>General attributes <a class=text-decoration-none href=#general-attributes>#</a></h3><h4 id=private-1><code>@(private)</code> <a class=text-decoration-none href=#private-1>#</a></h4><p>Prevents a top level element from being exported with the package.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span><span style=color:#a6e22e>@(private)</span>
</span></span><span style=display:flex><span>my_variable<span style=color:#f92672>:</span> <span style=color:#66d9ef>int</span> <span style=color:#75715e>// cannot be accessed outside this package
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#a6e22e>@private</span> <span style=color:#75715e>// parenthesis can be dropped on no arguments  
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>my_other_variable<span style=color:#f92672>:</span> <span style=color:#66d9ef>int</span>
</span></span></code></pre></div><p>You may also make an entity private to <em>the file</em> instead of the package.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span><span style=color:#a6e22e>@(private=&#34;file&#34;)</span>
</span></span><span style=display:flex><span>my_variable<span style=color:#f92672>:</span> <span style=color:#66d9ef>int</span> <span style=color:#75715e>// cannot be accessed outside this file
</span></span></span></code></pre></div><p><code>@(private)</code> is equivalent to <code>@(private="package")</code>.</p><p>Using <code>#+private</code> before the package declaration will automatically add <code>@(private)</code> to everything in that file:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>#</span><span style=color:#f92672>+</span>private
</span></span><span style=display:flex><span><span style=color:#f92672>package</span> foo
</span></span></code></pre></div><p>And <code>#+private file</code> will be equivalent to automatically adding <code>@(private="file")</code> to each declaration. This means that to remove the private-to-file association, you must apply a private-to-package attribute <code>@(private)</code> to the declaration.</p><h4 id=require><code>@(require)</code> <a class=text-decoration-none href=#require>#</a></h4><p>Requires that the declaration is added to the final compilation and not optimized out.</p><h3 id=linking-and-foreign-attributes>Linking and foreign attributes <a class=text-decoration-none href=#linking-and-foreign-attributes>#</a></h3><h4 id=link_namestring><code>@(link_name=&lt;string>)</code> <a class=text-decoration-none href=#link_namestring>#</a></h4><p>This attribute can be attached to variable and procedure declarations, either when exporting or inside a <code>foreign</code> block. This specifies what the variable/proc is called in the library.
Example:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span><span style=color:#66d9ef>foreign</span> foo {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@(link_name = &#34;bar&#34;)</span>
</span></span><span style=display:flex><span>    testbar <span style=color:#f92672>::</span> <span style=color:#66d9ef>proc</span>(baz<span style=color:#f92672>:</span> <span style=color:#66d9ef>int</span>) <span style=color:#f92672>---</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>@(export, link_name=&#34;lib_foo&#34;)</span>
</span></span><span style=display:flex><span>foo <span style=color:#f92672>::</span> <span style=color:#66d9ef>proc</span> <span style=color:#e6db74>&#34;c&#34;</span> () <span style=color:#f92672>-&gt;</span> <span style=color:#66d9ef>int</span> {
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>return</span> <span style=color:#a6e22e>42</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h4 id=link_prefixstring><code>@(link_prefix=&lt;string>)</code> <a class=text-decoration-none href=#link_prefixstring>#</a></h4><p>This attribute can be attached to variable and procedure declarations, either when exporting or inside a <code>foreign</code> block. So if functions are prefixed with <code>ltb_</code> in the library, you can attach this and not specify that on the procedure on the Odin side; conversely, non-Odin procedures must match the exported procedure&rsquo;s name with its link prefix. Example:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span><span style=color:#a6e22e>@(link_prefix = &#34;ltb_&#34;)</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>foreign</span> foo {
</span></span><span style=display:flex><span>    testbar <span style=color:#f92672>::</span> <span style=color:#66d9ef>proc</span>(baz<span style=color:#f92672>:</span> <span style=color:#66d9ef>int</span>) <span style=color:#f92672>---</span> <span style=color:#75715e>// This now refers to ltb_testbar
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>@(export, link_prefix=&#34;ltb_&#34;)</span>
</span></span><span style=display:flex><span>foo <span style=color:#f92672>::</span> <span style=color:#66d9ef>proc</span> <span style=color:#e6db74>&#34;c&#34;</span> () <span style=color:#f92672>-&gt;</span> <span style=color:#66d9ef>int</span> {
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>return</span> <span style=color:#a6e22e>42</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h4 id=link_suffixstring><code>@(link_suffix=&lt;string>)</code> <a class=text-decoration-none href=#link_suffixstring>#</a></h4><p>This attribute can be attached to variable and procedure declarations, either when exporting or inside a <code>foreign</code> block. This is similar to <code>link_prefix</code>, except that it appends to the end of the link name instead of prepending to the start.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span><span style=color:#a6e22e>@(link_suffix = &#34;_x86&#34;)</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>foreign</span> foo {
</span></span><span style=display:flex><span>	testbar <span style=color:#f92672>::</span> <span style=color:#66d9ef>proc</span>(baz<span style=color:#f92672>:</span> <span style=color:#66d9ef>int</span>) <span style=color:#f92672>---</span> <span style=color:#75715e>// This now refers to testbar_x86
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>@(export, link_suffix=&#34;_x86&#34;)</span>
</span></span><span style=display:flex><span>foo <span style=color:#f92672>::</span> <span style=color:#66d9ef>proc</span> <span style=color:#e6db74>&#34;c&#34;</span> () <span style=color:#f92672>-&gt;</span> <span style=color:#66d9ef>int</span> {
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>return</span> <span style=color:#a6e22e>42</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h4 id=export-or-exporttruefalse><code>@export</code> or <code>@(export=true/false)</code> <a class=text-decoration-none href=#export-or-exporttruefalse>#</a></h4><p>Exports a variable or procedure symbol, useful for producing DLLs.</p><h4 id=linkagestring><code>@(linkage=&lt;string>)</code> <a class=text-decoration-none href=#linkagestring>#</a></h4><p>Allows the ability to specify the specific linkage of a declaration. Allow linkage kinds: <code>"internal"</code>, <code>"strong"</code>, <code>"weak"</code>, and <code>"link_once"</code>.</p><h4 id=default_calling_conventionstring><code>@(default_calling_convention=&lt;string>)</code> <a class=text-decoration-none href=#default_calling_conventionstring>#</a></h4><p>This attribute can be attached to a <code>foreign</code> block to specify the default calling convention for all procedures in the block. Example:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span><span style=color:#a6e22e>@(default_calling_convention = &#34;std&#34;)</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>foreign</span> kernel32 {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@(link_name=&#34;LoadLibraryA&#34;) load_library_a  :: proc(c_str: ^u8)</span> <span style=color:#f92672>-&gt;</span> Hmodule <span style=color:#f92672>---</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h4 id=link_sectionstring><code>@(link_section=&lt;string>)</code> <a class=text-decoration-none href=#link_sectionstring>#</a></h4><p>Specify the link section for a global variable.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span><span style=color:#a6e22e>@(link_section=&#34;.foo&#34;)</span>
</span></span><span style=display:flex><span>my_global<span style=color:#f92672>:</span> <span style=color:#66d9ef>i32</span>
</span></span></code></pre></div><h4 id=extra_linker_flagsstring><code>@(extra_linker_flags=&lt;string>)</code> <a class=text-decoration-none href=#extra_linker_flagsstring>#</a></h4><p>Provide additional linker flags to a <code>foreign import</code> declaration.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span><span style=color:#a6e22e>@(extra_linker_flags=&#34;/NODEFAULTLIB:libcmt&#34;)</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>foreign</span> <span style=color:#f92672>import</span> lib {
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;windows/raylib.lib&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;system:Winmm.lib&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;system:Gdi32.lib&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;system:User32.lib&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;system:Shell32.lib&#34;</span>,
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h3 id=procedure-attributes>Procedure attributes <a class=text-decoration-none href=#procedure-attributes>#</a></h3><h4 id=deferred_proc><code>@(deferred_*=&lt;proc>)</code> <a class=text-decoration-none href=#deferred_proc>#</a></h4><ul><li><code>@(deferred_in=&lt;proc>)</code></li><li><code>@(deferred_out=&lt;proc>)</code></li><li><code>@(deferred_in_out=&lt;proc>)</code></li><li><code>@(deferred_none=&lt;proc>)</code></li></ul><p>These attributes can be attached to a procedure <code>X</code> which will be called at the end of the calling scope for <code>X</code>s caller.
<code>deferred_in</code> will receive the same parameters as the called proc. <code>deferred_out</code> will receive the result of the called proc. <code>deferred_in_out</code> will receive both. <code>deferred_none</code> will receive no parameters.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span>baz <span style=color:#f92672>::</span> <span style=color:#66d9ef>proc</span>() {
</span></span><span style=display:flex><span>    fmt.println(<span style=color:#e6db74>&#34;In baz&#34;</span>)
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>@(deferred_none=baz)</span>
</span></span><span style=display:flex><span>bar <span style=color:#f92672>::</span> <span style=color:#66d9ef>proc</span>() {
</span></span><span style=display:flex><span>    fmt.println(<span style=color:#e6db74>&#34;In bar&#34;</span>)
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>foo <span style=color:#f92672>::</span> <span style=color:#66d9ef>proc</span>() {
</span></span><span style=display:flex><span>    fmt.println(<span style=color:#e6db74>&#34;Entered foo&#34;</span>)
</span></span><span style=display:flex><span>    bar()
</span></span><span style=display:flex><span>    fmt.println(<span style=color:#e6db74>&#34;Leaving foo&#34;</span>)
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span><span style=color:#75715e>// Prints:
</span></span></span><span style=display:flex><span><span style=color:#75715e>// Entered foo
</span></span></span><span style=display:flex><span><span style=color:#75715e>// In bar
</span></span></span><span style=display:flex><span><span style=color:#75715e>// Leaving foo
</span></span></span><span style=display:flex><span><span style=color:#75715e>// In baz
</span></span></span></code></pre></div><h4 id=deprecatedstring><code>@(deprecated=&lt;string>)</code> <a class=text-decoration-none href=#deprecatedstring>#</a></h4><p>Mark a procedure as deprecated. Running <code>odin build/run/check</code> will print out the message for each usage of the deprecated proc.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span><span style=color:#a6e22e>@(deprecated=&#34;&#39;foo&#39; deprecated, use &#39;bar&#39; instead&#34;)</span>
</span></span><span style=display:flex><span>foo <span style=color:#f92672>::</span> <span style=color:#66d9ef>proc</span>() {
</span></span><span style=display:flex><span>    ...
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h4 id=require_results><code>@(require_results)</code> <a class=text-decoration-none href=#require_results>#</a></h4><p>Ensures procedure return values are acknowledged, meaning that in any scope where a procedure <code>p</code> having procedure attribute <code>@(require_results)</code> is called, the scope must explicitly handle the return values of procedure <code>p</code> in some way, such as by storing the return values of <code>p</code> in variables or explicitly dropping the values by setting <code>_</code> equal them.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span><span style=color:#a6e22e>@(require_results)</span>
</span></span><span style=display:flex><span>foo <span style=color:#f92672>::</span> <span style=color:#66d9ef>proc</span>() <span style=color:#f92672>-&gt;</span> <span style=color:#66d9ef>bool</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>main <span style=color:#f92672>::</span> <span style=color:#66d9ef>proc</span>() {
</span></span><span style=display:flex><span>    foo() <span style=color:#75715e>// won&#39;t compile
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    _ <span style=color:#f92672>=</span> foo() <span style=color:#75715e>// Ok
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>}
</span></span></code></pre></div><h4 id=disabledboolean><code>@(disabled=&lt;boolean>)</code> <a class=text-decoration-none href=#disabledboolean>#</a></h4><p>If the provided boolean is set, the procedure will not be used when called.</p><h4 id=init><code>@(init)</code> <a class=text-decoration-none href=#init>#</a></h4><p>This attribute may be applied to any procedure that neither takes any parameters nor returns any values. All suitable procedures marked in this way by <code>@(init)</code> will then be called at the start of the program before <code>main</code> is called. The exact order in which all such intialization functions are called is deterministic and hence reliable. The order is determined by a topological sort of the import graph and then in alphabetical file order within the package and then top down within the file.</p><h4 id=fini><code>@(fini)</code> <a class=text-decoration-none href=#fini>#</a></h4><p>Like <code>@(init)</code> but run at after the <code>main</code> procedure finishes.</p><h4 id=cold><code>@(cold)</code> <a class=text-decoration-none href=#cold>#</a></h4><p>A hint to the compiler that this procedure is rarely called, and thus &ldquo;cold&rdquo;.</p><h4 id=optimization_modestring><code>@(optimization_mode=&lt;string>)</code> <a class=text-decoration-none href=#optimization_modestring>#</a></h4><p>Set the optimization mode of a procedure. Valid modes are <code>"none"</code> and <code>"favor_size"</code>.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span><span style=color:#a6e22e>@(optimization_mode=&#34;favor_size&#34;)</span>
</span></span><span style=display:flex><span>skip_whitespace <span style=color:#f92672>::</span> <span style=color:#66d9ef>proc</span>(t<span style=color:#f92672>:</span> <span style=color:#f92672>^</span>Tokenizer) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span> {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>switch</span> t.ch {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>case</span> <span style=color:#e6db74>&#39; &#39;</span>, <span style=color:#e6db74>&#39;\t&#39;</span>, <span style=color:#e6db74>&#39;\r&#39;</span>, <span style=color:#e6db74>&#39;\n&#39;</span><span style=color:#f92672>:</span>
</span></span><span style=display:flex><span>            advance_rune(t)
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>case</span><span style=color:#f92672>:</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>return</span>
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h4 id=test-1><code>@(test)</code> <a class=text-decoration-none href=#test-1>#</a></h4><p>Allows procedures with the attribute <code>@(test)</code> to be run with the command <code>odin test</code> directly.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span><span style=color:#f92672>import</span> <span style=color:#e6db74>&#34;core:testing&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>@(test)</span>
</span></span><span style=display:flex><span>foo <span style=color:#f92672>::</span> <span style=color:#66d9ef>proc</span>(_<span style=color:#f92672>:</span> <span style=color:#f92672>^</span>testing.T) {
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h4 id=no_sanitize_address><code>@(no_sanitize_address)</code> <a class=text-decoration-none href=#no_sanitize_address>#</a></h4><p>If set, the procedure will not be instrumented by <a href=https://clang.llvm.org/docs/AddressSanitizer.html>AddressSanitizer</a> when using the <code>-sanitize:address</code> build flag, which permits the procedure and all called procedures to read and write to any memory that may be marked as invalid by the sanitizer.</p><p>This attribute will typically be used in the procedures that make up a memory allocator.</p><h3 id=variable-attributes>Variable attributes <a class=text-decoration-none href=#variable-attributes>#</a></h3><h4 id=static><code>@(static)</code> <a class=text-decoration-none href=#static>#</a></h4><p>This attribute can be applied to a variable to have it keep its state even when going out of scope.
This is the same behavior as a <code>static</code> local variable in C.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span>test <span style=color:#f92672>::</span> <span style=color:#66d9ef>proc</span>() <span style=color:#f92672>-&gt;</span> <span style=color:#66d9ef>int</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@(static)</span> foo <span style=color:#f92672>:=</span> <span style=color:#a6e22e>0</span>
</span></span><span style=display:flex><span>    foo <span style=color:#f92672>+=</span> <span style=color:#a6e22e>1</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> foo
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>main <span style=color:#f92672>::</span> <span style=color:#66d9ef>proc</span>() {
</span></span><span style=display:flex><span>    fmt.println(test()) <span style=color:#75715e>// prints 1
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    fmt.println(test()) <span style=color:#75715e>// prints 2
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    fmt.println(test()) <span style=color:#75715e>// prints 3
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>}
</span></span></code></pre></div><h4 id=rodata><code>@(rodata)</code> <a class=text-decoration-none href=#rodata>#</a></h4><p>A global or static variable with the <code>@(rodata)</code> attribute will live in the read-only data block of the program. This means that the value cannot be changed.</p><p>In most cases, using a constant is a better idea. One example where <code>@(rodata)</code> is useful is this case:</p><pre tabindex=0><code>@(rodata)
numbers := []int {
	7,
	42,
	628,
}

main :: proc() {
	index := 1
	n := numbers[index]
	fmt.println(n)
}
</code></pre><p>If you instead used a constant <code>numbers</code> array (<code>NUMBERS :: []int {}</code>), then it would not be possible to index <code>numbers</code> using a variable, because constants only exist at compile time.</p><h4 id=thread_local><code>@(thread_local)</code> <a class=text-decoration-none href=#thread_local>#</a></h4><p>Can be applied to a variable at file scope</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span><span style=color:#a6e22e>@(thread_local)</span> foo<span style=color:#f92672>:</span> <span style=color:#66d9ef>int</span>
</span></span></code></pre></div><h3 id=specialized-attributes>Specialized attributes <a class=text-decoration-none href=#specialized-attributes>#</a></h3><ul><li><p><strong>@(builtin)</strong>
Marks builtin procs in Odin&rsquo;s &ldquo;base:runtime&rdquo; package. Cannot be used in user code.</p></li><li><p><strong>@(objc_name=&lt;string>)</strong></p></li><li><p><strong>@(objc_type=&lt;type>)</strong></p></li><li><p><strong>@(objc_is_class_method=&lt;boolean>)</strong></p></li><li><p><strong>@(require_target_feature=&lt;string>)</strong></p></li><li><p><strong>@(enable_target_feature=&lt;string>)</strong></p></li></ul><h2 id=directives>Directives <a class=text-decoration-none href=#directives>#</a></h2><p>Directives are a way of extending the core behaviour of the Odin programming language. They have the form <code>#directive_name</code>.</p><h3 id=record-memory-layout>Record memory layout <a class=text-decoration-none href=#record-memory-layout>#</a></h3><h4 id=packed><code>#packed</code> <a class=text-decoration-none href=#packed>#</a></h4><p>This tag can be applied to a struct. Removes padding between fields that&rsquo;s normally inserted to ensure all fields meet their type&rsquo;s alignment requirements. Fields remain in source order.</p><p>This is useful where the structure is unlikely to be correctly aligned (the insertion rules for padding assume it <strong><em>is</em></strong>), or if the space-savings are more important or useful than the access speed of the fields.</p><p>Accessing a field in a packed struct may require copying the field out of the struct into a temporary location, or using a machine instruction that doesn&rsquo;t assume the pointer address is correctly aligned, in order to be performant or avoid crashing on some systems. (See <code>intrinsics.unaligned_load</code>.)</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span><span style=color:#66d9ef>struct</span> <span style=color:#a6e22e>#packed</span> {x<span style=color:#f92672>:</span> <span style=color:#66d9ef>u8</span>, y<span style=color:#f92672>:</span> <span style=color:#66d9ef>i32</span>, z<span style=color:#f92672>:</span> <span style=color:#66d9ef>u16</span>, w<span style=color:#f92672>:</span> <span style=color:#66d9ef>u8</span>}
</span></span></code></pre></div><h4 id=raw_union><code>#raw_union</code> <a class=text-decoration-none href=#raw_union>#</a></h4><p>This tag can be applied to a struct. Struct&rsquo;s fields will share the same memory space which serves the same functionality as <code>union</code>s in C language. Useful when writing bindings especially.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span><span style=color:#66d9ef>struct</span> <span style=color:#a6e22e>#raw_union</span> {u<span style=color:#f92672>:</span> <span style=color:#66d9ef>u32</span>, i<span style=color:#f92672>:</span> <span style=color:#66d9ef>i32</span>, f<span style=color:#f92672>:</span> <span style=color:#66d9ef>f32</span>}
</span></span></code></pre></div><h4 id=align><code>#align</code> <a class=text-decoration-none href=#align>#</a></h4><p>This tag can be applied to a <code>struct</code> or <code>union</code>. When <code>#align</code> is passed an integer <code>N</code> (as in <code>#align N</code>), it specifies that the <code>struct</code> will be aligned to <code>N</code> bytes. The <code>struct</code>&rsquo;s fields will remain in source-order.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span>Foo <span style=color:#f92672>::</span> <span style=color:#66d9ef>struct</span> <span style=color:#a6e22e>#align</span>(<span style=color:#a6e22e>4</span>) {
</span></span><span style=display:flex><span>    b<span style=color:#f92672>:</span> <span style=color:#66d9ef>bool</span>,
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>Bar <span style=color:#f92672>::</span> <span style=color:#66d9ef>union</span> <span style=color:#a6e22e>#align</span>(<span style=color:#a6e22e>4</span>) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>i32</span>,
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>u8</span>,
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h4 id=no_nil><code>#no_nil</code> <a class=text-decoration-none href=#no_nil>#</a></h4><p>This tag can be applied to a union to not allow nil values.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span>A <span style=color:#f92672>::</span> <span style=color:#66d9ef>union</span> {<span style=color:#66d9ef>int</span>, <span style=color:#66d9ef>bool</span>}
</span></span><span style=display:flex><span>B <span style=color:#f92672>::</span> <span style=color:#66d9ef>union</span> <span style=color:#a6e22e>#no_nil</span> {<span style=color:#66d9ef>int</span>, <span style=color:#66d9ef>bool</span>}
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span><span style=color:#75715e>// Possible states of A:
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>{} <span style=color:#75715e>// nil
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>{<span style=color:#66d9ef>int</span>}
</span></span><span style=display:flex><span>{<span style=color:#66d9ef>bool</span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Possible states of B:
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>{<span style=color:#66d9ef>int</span>} <span style=color:#75715e>// default state
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>{<span style=color:#66d9ef>bool</span>}
</span></span></code></pre></div><h4 id=no_copy><code>#no_copy</code> <a class=text-decoration-none href=#no_copy>#</a></h4><p>This tag can be applied to a <code>struct</code> to forbid copies being made.
The initialization of a <code>#no_copy</code> type must be either implicitly zero, a constant literal, or a return value from a call expression.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span>Mutex <span style=color:#f92672>::</span> <span style=color:#66d9ef>struct</span> <span style=color:#a6e22e>#no_copy</span> {
</span></span><span style=display:flex><span>	state<span style=color:#f92672>:</span> <span style=color:#66d9ef>uintptr</span>,
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>main <span style=color:#f92672>::</span> <span style=color:#66d9ef>proc</span>() {
</span></span><span style=display:flex><span>	m<span style=color:#f92672>:</span> Mutex
</span></span><span style=display:flex><span>	v1 <span style=color:#f92672>:=</span> m  <span style=color:#75715e>// This line will raise an error.
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>	p  <span style=color:#f92672>:=</span> <span style=color:#f92672>&amp;</span>m
</span></span><span style=display:flex><span>	v2 <span style=color:#f92672>:=</span> p<span style=color:#f92672>^</span> <span style=color:#75715e>// So will this line.
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>}
</span></span></code></pre></div><h3 id=control-statements>Control statements <a class=text-decoration-none href=#control-statements>#</a></h3><h4 id=partial><code>#partial</code> <a class=text-decoration-none href=#partial>#</a></h4><p>By default all <code>case</code>s of an <code>enum</code> or union have to be covered in a <code>switch</code> statement. The reason for this requirement is because it makes accidental bugs less likely. However, the <code>#partial</code> tag allows you to not have to write out <code>case</code>s that you don&rsquo;t need to handle:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span>Foo <span style=color:#f92672>::</span> <span style=color:#66d9ef>enum</span> {
</span></span><span style=display:flex><span>    A,
</span></span><span style=display:flex><span>    B,
</span></span><span style=display:flex><span>    C,
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>test <span style=color:#f92672>::</span> <span style=color:#66d9ef>proc</span>() {
</span></span><span style=display:flex><span>    bar <span style=color:#f92672>:=</span> Foo.A
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// All cases required, removing any would result in an error
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>switch</span> bar {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>case</span> .A<span style=color:#f92672>:</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>case</span> .B<span style=color:#f92672>:</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>case</span> .C<span style=color:#f92672>:</span>
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// Partially state wanted cases
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#a6e22e>#partial</span> <span style=color:#66d9ef>switch</span> bar {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>case</span> .A<span style=color:#f92672>:</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>case</span> .B<span style=color:#f92672>:</span>
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>The <code>#partial</code> directive can also be used to initialize an <a href=#enumerated-array>enumerated array</a>.</p><h3 id=procedure-parameters>Procedure parameters <a class=text-decoration-none href=#procedure-parameters>#</a></h3><h4 id=no_alias><code>#no_alias</code> <a class=text-decoration-none href=#no_alias>#</a></h4><p>This tag can be applied to a procedure parameter that is a pointer. This is a hint to the compiler that this parameter will not alias other parameters. This is equivalent to C&rsquo;s <code>__restrict</code>.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span>foo <span style=color:#f92672>::</span> <span style=color:#66d9ef>proc</span>(<span style=color:#a6e22e>#no_alias</span> a, b<span style=color:#f92672>:</span> <span style=color:#f92672>^</span><span style=color:#66d9ef>int</span>) {}
</span></span></code></pre></div><h4 id=any_int><code>#any_int</code> <a class=text-decoration-none href=#any_int>#</a></h4><p><code>#any_int</code> enables implicit casts to a procedure&rsquo;s integer type at the call site. A parameter with <code>#any_int</code> must be an integer.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span>foo <span style=color:#f92672>::</span> <span style=color:#66d9ef>proc</span>(<span style=color:#a6e22e>#any_int</span> a<span style=color:#f92672>:</span> <span style=color:#66d9ef>int</span>) {}
</span></span><span style=display:flex><span>x <span style=color:#f92672>:</span> <span style=color:#66d9ef>i32</span>
</span></span><span style=display:flex><span>foo(x) <span style=color:#75715e>// This is now allowed without an explicit cast
</span></span></span></code></pre></div><h4 id=caller_location><code>#caller_location</code> <a class=text-decoration-none href=#caller_location>#</a></h4><p><code>#caller_location</code> sets a parameter&rsquo;s default value to the location of the code calling the procedure. The location value has the type <a href=https://pkg.odin-lang.org/base/runtime/#Source_Code_Location><code>Source_Code_Location</code></a>. <code>#caller_location</code> may only be used as a default value for procedure parameters.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span><span style=color:#f92672>package</span> example_caller_location
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> <span style=color:#e6db74>&#34;core:fmt&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>print_caller_location <span style=color:#f92672>::</span> <span style=color:#66d9ef>proc</span>(loc <span style=color:#f92672>:=</span> <span style=color:#a6e22e>#caller_location</span>) {
</span></span><span style=display:flex><span>	fmt.println(loc)
</span></span><span style=display:flex><span>	fmt.println(<span style=color:#a6e22e>#procedure</span>, <span style=color:#e6db74>&#34;called by&#34;</span>, loc.procedure)
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>main <span style=color:#f92672>::</span> <span style=color:#66d9ef>proc</span>() {
</span></span><span style=display:flex><span>	print_caller_location()
</span></span><span style=display:flex><span>	<span style=color:#75715e>// C:/some/dir/example_caller_location.odin(11:2)
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>	<span style=color:#75715e>// print_caller_location called by main
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>}
</span></span></code></pre></div><h4 id=caller_expression-or-caller_expressionparam><code>#caller_expression</code> or <code>#caller_expression(&lt;param>)</code> <a class=text-decoration-none href=#caller_expression-or-caller_expressionparam>#</a></h4><p><code>#caller_expression</code> gives a procedure the entire call expression or the expression used to create a parameter. <code>#caller_expression</code> may only be used as a default value for procedure parameters.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span><span style=color:#f92672>package</span> example_caller_expression
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> <span style=color:#e6db74>&#34;core:fmt&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>entire_expression <span style=color:#f92672>::</span> <span style=color:#66d9ef>proc</span>(greeting<span style=color:#f92672>:</span> <span style=color:#66d9ef>string</span>, count<span style=color:#f92672>:</span> <span style=color:#66d9ef>int</span>, expr <span style=color:#f92672>:=</span> <span style=color:#a6e22e>#caller_expression</span>) {
</span></span><span style=display:flex><span>    fmt.println(expr)
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>param_expression <span style=color:#f92672>::</span> <span style=color:#66d9ef>proc</span>(greeting<span style=color:#f92672>:</span> <span style=color:#66d9ef>string</span>, count<span style=color:#f92672>:</span> <span style=color:#66d9ef>int</span>, count_expr <span style=color:#f92672>:=</span> <span style=color:#a6e22e>#caller_expression</span>(count)) {
</span></span><span style=display:flex><span>    fmt.println(count_expr)
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>main <span style=color:#f92672>::</span> <span style=color:#66d9ef>proc</span>() {
</span></span><span style=display:flex><span>	entire_expression(<span style=color:#e6db74>&#34;Hellope!&#34;</span>, <span style=color:#a6e22e>1</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>1</span>)
</span></span><span style=display:flex><span>	<span style=color:#75715e>// entire_expression(&#34;Hellope!&#34;, 1 + 1)
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>	param_expression(<span style=color:#e6db74>&#34;Yo&#34;</span>, <span style=color:#a6e22e>2</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>2</span>)
</span></span><span style=display:flex><span>	<span style=color:#75715e>// 2 + 2
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>}
</span></span></code></pre></div><h4 id=c_vararg><code>#c_vararg</code> <a class=text-decoration-none href=#c_vararg>#</a></h4><p>Used to interface with vararg functions in foreign procedures.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span><span style=color:#66d9ef>foreign</span> foo {
</span></span><span style=display:flex><span>    bar <span style=color:#f92672>::</span> <span style=color:#66d9ef>proc</span>(n<span style=color:#f92672>:</span> <span style=color:#66d9ef>int</span>, <span style=color:#a6e22e>#c_vararg</span> args<span style=color:#f92672>:</span> ..<span style=color:#66d9ef>any</span>) <span style=color:#f92672>---</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h4 id=by_ptr><code>#by_ptr</code> <a class=text-decoration-none href=#by_ptr>#</a></h4><p>Used to interface with const reference parameters in foreign procedures.
The parameter is passed by pointer internally.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span><span style=color:#66d9ef>foreign</span> foo {
</span></span><span style=display:flex><span>    bar <span style=color:#f92672>::</span> <span style=color:#66d9ef>proc</span>(<span style=color:#a6e22e>#by_ptr</span> p<span style=color:#f92672>:</span> T) <span style=color:#f92672>---</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>to represent</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c><span style=display:flex><span><span style=color:#66d9ef>void</span> <span style=color:#a6e22e>bar</span>(<span style=color:#66d9ef>const</span> T<span style=color:#f92672>*</span>)
</span></span></code></pre></div><h4 id=optional_ok><code>#optional_ok</code> <a class=text-decoration-none href=#optional_ok>#</a></h4><p>Allows skipping the last return parameter, which needs to be a <code>bool</code></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span><span style=color:#f92672>import</span> <span style=color:#e6db74>&#34;core:fmt&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>foo <span style=color:#f92672>::</span> <span style=color:#66d9ef>proc</span>(x<span style=color:#f92672>:</span> <span style=color:#66d9ef>int</span>) <span style=color:#f92672>-&gt;</span> (value<span style=color:#f92672>:</span> <span style=color:#66d9ef>int</span>, ok<span style=color:#f92672>:</span> <span style=color:#66d9ef>bool</span>) <span style=color:#a6e22e>#optional_ok</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> x <span style=color:#f92672>+</span> <span style=color:#a6e22e>1</span>, <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>main <span style=color:#f92672>::</span> <span style=color:#66d9ef>proc</span>() {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span> x <span style=color:#f92672>:=</span> <span style=color:#a6e22e>0</span>; x <span style=color:#f92672>&lt;</span> <span style=color:#a6e22e>11</span>; x <span style=color:#f92672>=</span> foo(x) {
</span></span><span style=display:flex><span>        fmt.printf(<span style=color:#e6db74>&#34;v: %v\n&#34;</span>, x)
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h4 id=optional_allocator_error><code>#optional_allocator_error</code> <a class=text-decoration-none href=#optional_allocator_error>#</a></h4><p>Allows skipping the last return parameter, which needs to be a <code>runtime.Allocator_Error</code></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span><span style=color:#f92672>import</span> <span style=color:#e6db74>&#34;base:runtime&#34;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> <span style=color:#e6db74>&#34;core:strings&#34;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> <span style=color:#e6db74>&#34;core:fmt&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>add_greetings <span style=color:#f92672>::</span> <span style=color:#66d9ef>proc</span>(name<span style=color:#f92672>:</span> <span style=color:#66d9ef>string</span>) <span style=color:#f92672>-&gt;</span> (<span style=color:#66d9ef>string</span>, runtime.Allocator_Error) <span style=color:#a6e22e>#optional_allocator_error</span> {
</span></span><span style=display:flex><span>	result, err <span style=color:#f92672>:=</span> strings.join({<span style=color:#e6db74>&#34;Hello&#34;</span>, name}, <span style=color:#e6db74>&#34;, &#34;</span>)
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>return</span> result, err
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>main <span style=color:#f92672>::</span> <span style=color:#66d9ef>proc</span>() {
</span></span><span style=display:flex><span>	msg <span style=color:#f92672>:=</span> add_greetings(<span style=color:#e6db74>&#34;Bill&#34;</span>)
</span></span><span style=display:flex><span>	fmt.println(msg)
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h3 id=expressions>Expressions <a class=text-decoration-none href=#expressions>#</a></h3><h4 id=type><code>#type</code> <a class=text-decoration-none href=#type>#</a></h4><p>This tag doesn&rsquo;t serve a functional purpose in the compiler, this is for telling someone reading the code that the expression is a type. The main case is for showing that a procedure signature without a body is a type and not just missing its body, for example:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span>foo <span style=color:#f92672>::</span> <span style=color:#a6e22e>#type</span> <span style=color:#66d9ef>proc</span>(foo<span style=color:#f92672>:</span> <span style=color:#66d9ef>string</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>bar <span style=color:#f92672>::</span> <span style=color:#66d9ef>struct</span> {
</span></span><span style=display:flex><span>    gin<span style=color:#f92672>:</span> foo,
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h4 id=sparse><code>#sparse</code> <a class=text-decoration-none href=#sparse>#</a></h4><p>This directive may be used to create a sparse <a href=#enumerated-array>enumerated array</a>.
This is necessary when the enumerated values are not contiguous.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span>Key <span style=color:#f92672>::</span> <span style=color:#66d9ef>enum</span> {
</span></span><span style=display:flex><span>	Bronze <span style=color:#f92672>=</span>  <span style=color:#a6e22e>1</span>,
</span></span><span style=display:flex><span>	Silver <span style=color:#f92672>=</span>  <span style=color:#a6e22e>5</span>,
</span></span><span style=display:flex><span>	Gold   <span style=color:#f92672>=</span> <span style=color:#a6e22e>10</span>,
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Key_Descriptions <span style=color:#f92672>::</span> <span style=color:#a6e22e>#sparse</span>[Key]<span style=color:#66d9ef>string</span> {
</span></span><span style=display:flex><span>	.Bronze <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;a blocky bronze key&#34;</span>,
</span></span><span style=display:flex><span>	.Silver <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;a shiny silver key&#34;</span>,
</span></span><span style=display:flex><span>	.Gold   <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;a glittering gold key&#34;</span>,
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h3 id=statements>Statements <a class=text-decoration-none href=#statements>#</a></h3><h4 id=bounds_check-and-no_bounds_check><code>#bounds_check</code> and <code>#no_bounds_check</code> <a class=text-decoration-none href=#bounds_check-and-no_bounds_check>#</a></h4><p>The <code>#bounds_check</code> and <code>#no_bounds_check</code> flags control Odin&rsquo;s built-in bounds checking of arrays and slices. Any statement, block, or function with one of these flags will have their bounds checking turned on or off, depending on the flag provided. Valid uses of these flags include:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span>proc_without_bounds_check <span style=color:#f92672>::</span> <span style=color:#66d9ef>proc</span>() <span style=color:#a6e22e>#no_bounds_check</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>#bounds_check</span> {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>#no_bounds_check</span> fmt.println(os.args[<span style=color:#a6e22e>1</span>])
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>By default, the Odin compiler has bounds checking enabled program-wide where applicable, and it may be turned off by passing the <code>-no-bounds-check</code> build flag.</p><h4 id=type_assert-and-no_type_assert><code>#type_assert</code> and <code>#no_type_assert</code> <a class=text-decoration-none href=#type_assert-and-no_type_assert>#</a></h4><p><code>#no_type_assert</code> will bypass the underlying call to <code>runtime.type_assertion_check</code> when placed at the head of a statement or block which would normally do a type assert, such as the resolution of a <code>union</code> or an <code>any</code> into its true type.
<code>#type_assert</code> will re-enable type assertions, if they were turned off in an outer scope.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span>Number <span style=color:#f92672>::</span> <span style=color:#66d9ef>union</span> {
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>int</span>,
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>f64</span>,
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>proc_without_type_assertions <span style=color:#f92672>::</span> <span style=color:#66d9ef>proc</span>(a<span style=color:#f92672>:</span> <span style=color:#66d9ef>any</span>, b<span style=color:#f92672>:</span> Number, m<span style=color:#f92672>:</span> Maybe(<span style=color:#66d9ef>int</span>)) <span style=color:#f92672>-&gt;</span> <span style=color:#66d9ef>int</span> <span style=color:#a6e22e>#no_type_assert</span> {
</span></span><span style=display:flex><span>	c <span style=color:#f92672>:=</span> <span style=color:#a6e22e>0</span>
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>#type_assert</span> {
</span></span><span style=display:flex><span>		<span style=color:#75715e>// These statements will assert that the assumptions about the types of
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>		<span style=color:#75715e>// the underlying values are correct, because we have overriden the
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>		<span style=color:#75715e>// outer scope&#39;s `#no_type_assert` status.
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>		c <span style=color:#f92672>+=</span> a.(<span style=color:#66d9ef>int</span>)
</span></span><span style=display:flex><span>		c <span style=color:#f92672>+=</span> m.(<span style=color:#66d9ef>int</span>) <span style=color:#75715e>// A `Maybe` can only be its type or the nil type.
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>	}
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>return</span> c <span style=color:#f92672>+</span> b.(<span style=color:#66d9ef>int</span>) <span style=color:#75715e>// This will not assert that `b` is an int.
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>}
</span></span></code></pre></div><p>By default, the Odin compiler has type assertions enabled program-wide where applicable, and they may be turned off by passing the <code>-no-type-assert</code> build flag.
Note that <code>-disable-assert</code> does not also turn off type assertions; <code>-no-type-assert</code> must be passed explicitly.</p><h3 id=built-in-directives>Built-in directives <a class=text-decoration-none href=#built-in-directives>#</a></h3><h4 id=assertboolean><code>#assert(&lt;boolean>)</code> <a class=text-decoration-none href=#assertboolean>#</a></h4><p>Unlike <code>assert</code>, <code>#assert</code> runs at compile-time. <code>#assert</code> breaks compilation if the given bool expression is false, and thus <code>#assert</code> is useful for catching bugs before they ever even reach run-time. It also has no run-time cost.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span><span style=color:#a6e22e>#assert</span>(SOME_CONST_CONDITION)
</span></span></code></pre></div><h4 id=panicstring><code>#panic(&lt;string>)</code> <a class=text-decoration-none href=#panicstring>#</a></h4><p>Panic runs at compile-time. It is functionally equivalent to an <code>#assert</code> with a <code>false</code> condition, but <code>#panic</code> has an error message string parameter.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span><span style=color:#a6e22e>#panic</span>(message)
</span></span></code></pre></div><h4 id=configidentifier-default><code>#config(&lt;identifier>, default)</code> <a class=text-decoration-none href=#configidentifier-default>#</a></h4><p>Checks if an identifier is defined through the command line, or gives a default value instead.</p><p>Values can be set with the <code>-define:NAME=VALUE</code> command line flag.</p><h4 id=defined><code>#defined</code> <a class=text-decoration-none href=#defined>#</a></h4><p>Checks if an identifier is defined. This may only be used within a procedure&rsquo;s body.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span>n<span style=color:#f92672>:</span> <span style=color:#66d9ef>int</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>when</span> <span style=color:#a6e22e>#defined</span>(n) { fmt.println(<span style=color:#e6db74>&#34;true&#34;</span>) }
</span></span><span style=display:flex><span><span style=color:#66d9ef>if</span> <span style=color:#a6e22e>#defined</span>(<span style=color:#66d9ef>int</span>) { fmt.println(<span style=color:#e6db74>&#34;true&#34;</span>) }
</span></span><span style=display:flex><span><span style=color:#66d9ef>when</span> <span style=color:#a6e22e>#defined</span>(nonexistent_proc) <span style=color:#f92672>==</span> <span style=color:#66d9ef>false</span> { fmt.println(<span style=color:#e6db74>&#34;proc was not defined&#34;</span>) }
</span></span></code></pre></div><h4 id=file-directory-line-procedure><code>#file</code>, <code>#directory</code>, <code>#line</code>, <code>#procedure</code> <a class=text-decoration-none href=#file-directory-line-procedure>#</a></h4><p>Return the current file path, directory, line number, or procedure name, respectively. Used like a constant value. <code>file_name :: #file</code></p><h4 id=existsstring-path><code>#exists(&lt;string-path>)</code> <a class=text-decoration-none href=#existsstring-path>#</a></h4><p>Returns <code>true</code> or <code>false</code> if the file at the given path exists. If the path is relative, it is accessed relative to the Odin source file that references it.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span>config_exists <span style=color:#f92672>::</span> <span style=color:#a6e22e>#exists</span>(<span style=color:#e6db74>&#34;config.ini&#34;</span>)
</span></span></code></pre></div><h4 id=branch_location><code>#branch_location</code> <a class=text-decoration-none href=#branch_location>#</a></h4><p>When used within a <a href=#defer-statement><code>defer</code></a> statement, this directive returns a <a href=https://pkg.odin-lang.org/base/runtime/#Source_Code_Location><code>runtime.Source_Code_Location</code></a> of the point at which the control flow triggered execution of the <code>defer</code>. This may be a <code>return</code> statement or the end of a scope.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span><span style=color:#f92672>package</span> main
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> <span style=color:#e6db74>&#34;base:runtime&#34;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> <span style=color:#e6db74>&#34;core:fmt&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>find_exit <span style=color:#f92672>::</span> <span style=color:#66d9ef>proc</span>(v<span style=color:#f92672>:</span> <span style=color:#66d9ef>bool</span>, exit<span style=color:#f92672>:</span> <span style=color:#f92672>^</span>runtime.Source_Code_Location) {
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>defer</span> {
</span></span><span style=display:flex><span>		exit <span style=color:#f92672>^=</span> <span style=color:#a6e22e>#branch_location</span>
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>if</span> v <span style=color:#f92672>==</span> <span style=color:#66d9ef>true</span> {
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>return</span>
</span></span><span style=display:flex><span>	} <span style=color:#66d9ef>else</span> {
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>return</span>
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>main <span style=color:#f92672>::</span> <span style=color:#66d9ef>proc</span>() {
</span></span><span style=display:flex><span>	result_true<span style=color:#f92672>:</span>  runtime.Source_Code_Location
</span></span><span style=display:flex><span>	result_false<span style=color:#f92672>:</span> runtime.Source_Code_Location
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	find_exit(<span style=color:#66d9ef>true</span>,  <span style=color:#f92672>&amp;</span>result_true)
</span></span><span style=display:flex><span>	find_exit(<span style=color:#66d9ef>false</span>, <span style=color:#f92672>&amp;</span>result_false)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	fmt.println(result_true)  <span style=color:#75715e>// prints line 11
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>	fmt.println(result_false) <span style=color:#75715e>// prints line 13
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>}
</span></span></code></pre></div><h4 id=location-or-locationentity><code>#location()</code> or <code>#location(&lt;entity>)</code> <a class=text-decoration-none href=#location-or-locationentity>#</a></h4><p>Returns a <a href=https://pkg.odin-lang.org/base/runtime/#Source_Code_Location><code>runtime.Source_Code_Location</code></a>. Can be called with no parameters for current location, or with a parameter for the location of the variable/proc declaration.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span>foo <span style=color:#f92672>::</span> <span style=color:#66d9ef>proc</span>() {}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>main <span style=color:#f92672>::</span> <span style=color:#66d9ef>proc</span>() {
</span></span><span style=display:flex><span>    n<span style=color:#f92672>:</span> <span style=color:#66d9ef>int</span>
</span></span><span style=display:flex><span>    fmt.println(<span style=color:#a6e22e>#location</span>())
</span></span><span style=display:flex><span>    fmt.println(<span style=color:#a6e22e>#location</span>(foo))
</span></span><span style=display:flex><span>    fmt.println(<span style=color:#a6e22e>#location</span>(n))
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h4 id=loadstring-path-or-loadstring-path-type><code>#load(&lt;string-path>)</code> or <code>#load(&lt;string-path>, &lt;type>)</code> <a class=text-decoration-none href=#loadstring-path-or-loadstring-path-type>#</a></h4><p>Returns a <code>[]u8</code> of the file contents at compile time. This means that the loaded data is baked into your program. Optionally, you can provide a type name as second argument; interpreting the data as being of that type.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span>foo <span style=color:#f92672>:=</span> <span style=color:#a6e22e>#load</span>(<span style=color:#e6db74>&#34;path/to/file&#34;</span>)
</span></span><span style=display:flex><span>bar <span style=color:#f92672>:=</span> <span style=color:#a6e22e>#load</span>(<span style=color:#e6db74>&#34;path/to/file&#34;</span>, <span style=color:#66d9ef>string</span>)
</span></span><span style=display:flex><span>fmt.println(bar)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// If a file&#39;s size is not a multiple of the `size_of(type)`, then any remainder is ignored.
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>baz <span style=color:#f92672>:=</span> <span style=color:#a6e22e>#load</span>(<span style=color:#e6db74>&#34;path/to/file&#34;</span>, []<span style=color:#66d9ef>f32</span>)
</span></span></code></pre></div><p><code>#load</code> also works with <code>or_else</code> to provide default content when the file wasn&rsquo;t found</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span>foo <span style=color:#f92672>:=</span> <span style=color:#a6e22e>#load</span>(<span style=color:#e6db74>&#34;path/to/file&#34;</span>, <span style=color:#66d9ef>string</span>) <span style=color:#66d9ef>or_else</span> <span style=color:#e6db74>&#34;Hellope&#34;</span>
</span></span><span style=display:flex><span>fmt.println(foo)
</span></span></code></pre></div><h4 id=hashstring-text-string-hash><code>#hash(&lt;string-text>, &lt;string-hash>)</code> <a class=text-decoration-none href=#hashstring-text-string-hash>#</a></h4><p>Returns a constant integer of the hash of a string literal at compile time.</p><p>Available hashes:</p><ul><li><code>"adler32"</code></li><li><code>"crc32"</code></li><li><code>"crc64"</code></li><li><code>"fnv32"</code></li><li><code>"fnv64"</code></li><li><code>"fnv32a"</code></li><li><code>"fnv64a"</code></li><li><code>"murmur32"</code></li><li><code>"murmur64"</code></li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span>hash <span style=color:#f92672>::</span> <span style=color:#a6e22e>#hash</span>(<span style=color:#e6db74>&#34;interesting-string&#34;</span>, <span style=color:#e6db74>&#34;fnv32a&#34;</span>)
</span></span></code></pre></div><h4 id=load_hashstring-path-string-hash><code>#load_hash(&lt;string-path>, &lt;string-hash>)</code> <a class=text-decoration-none href=#load_hashstring-path-string-hash>#</a></h4><p>Returns a constant integer of the hash of a file&rsquo;s contents at compile time.</p><p>This procedure has the same list of available hashes as <a href=#hash><code>#hash</code></a>.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span>hash <span style=color:#f92672>::</span> <span style=color:#a6e22e>#load_hash</span>(<span style=color:#e6db74>&#34;path/to/file&#34;</span>, <span style=color:#e6db74>&#34;crc32&#34;</span>)
</span></span></code></pre></div><h4 id=load_directorystring-path><code>#load_directory(&lt;string-path>)</code> <a class=text-decoration-none href=#load_directorystring-path>#</a></h4><p>Loads all files within a directory, at compile time. All the data of those files will be baked into your program. Returns <code>[]Load_Directory_File</code>, where <code>Load_Directory_File</code> looks like so:</p><pre tabindex=0><code>Load_Directory_File :: struct {
	name: string,
	data: []byte, // immutable data
}
</code></pre><p><code>name</code> is the name of the file and <code>data</code> is the contents of the file.</p><h2 id=useful-idioms>Useful idioms <a class=text-decoration-none href=#useful-idioms>#</a></h2><p>The following are useful idioms which are emergent from the semantics of the language.</p><h3 id=basic-idioms>Basic idioms <a class=text-decoration-none href=#basic-idioms>#</a></h3><h4 id=ternary-operator>Ternary operator <a class=text-decoration-none href=#ternary-operator>#</a></h4><p>The following two snippets are identical:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span>bar <span style=color:#f92672>:=</span> condition <span style=color:#960050;background-color:#1e0010>?</span> <span style=color:#a6e22e>1</span> <span style=color:#f92672>:</span> <span style=color:#a6e22e>42</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span>bar <span style=color:#f92672>:=</span> <span style=color:#a6e22e>1</span> <span style=color:#66d9ef>if</span> condition <span style=color:#66d9ef>else</span> <span style=color:#a6e22e>42</span>
</span></span></code></pre></div><p>You can also use ternary expressions with constants at compile-time:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span>DEBUG_LOG_SIZE <span style=color:#f92672>::</span> <span style=color:#a6e22e>1024</span> <span style=color:#66d9ef>when</span> ODIN_DEBUG <span style=color:#66d9ef>else</span> <span style=color:#a6e22e>0</span>
</span></span></code></pre></div><h4 id=if-statements-with-initialization>If-statements with initialization <a class=text-decoration-none href=#if-statements-with-initialization>#</a></h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span><span style=color:#66d9ef>if</span> str, ok <span style=color:#f92672>:=</span> value.(<span style=color:#66d9ef>string</span>); ok {
</span></span><span style=display:flex><span>	...
</span></span><span style=display:flex><span>} <span style=color:#66d9ef>else</span> {
</span></span><span style=display:flex><span>   ...
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h4 id=iterating-through-slices-of-structs-by-value-or-by-reference>Iterating through slices of structs by value or by reference <a class=text-decoration-none href=#iterating-through-slices-of-structs-by-value-or-by-reference>#</a></h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span>Foo <span style=color:#f92672>::</span> <span style=color:#66d9ef>struct</span> {
</span></span><span style=display:flex><span>	f<span style=color:#f92672>:</span> <span style=color:#66d9ef>f32</span>,
</span></span><span style=display:flex><span>	i<span style=color:#f92672>:</span> <span style=color:#66d9ef>i32</span>,
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>foos <span style=color:#f92672>:=</span> <span style=color:#66d9ef>make</span>([]Foo, num)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// By-value basic ranged-based loop, with implicit indexing
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>for</span> v, j <span style=color:#66d9ef>in</span> foos {
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>using</span> v
</span></span><span style=display:flex><span>	fmt.println(j, v, f, i)
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Alternative range-based loop, with explicit indexing
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>for</span> _, j <span style=color:#66d9ef>in</span> foos {
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>using</span> foo <span style=color:#f92672>:=</span> foos[j] <span style=color:#75715e>// copy
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>	fmt.println(j, foo, f, i)
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// By-reference range-based explicit indexing loop
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>for</span> _, j <span style=color:#66d9ef>in</span> foos {
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>using</span> foo <span style=color:#f92672>:=</span> <span style=color:#f92672>&amp;</span>foos[j] <span style=color:#75715e>// &#34;reference&#34;, changes to `f` or `i` are visible outside this scope
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>	fmt.println(j, foo, f, i)
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// By-reference range-based through pointer
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>for</span> <span style=color:#f92672>&amp;</span>v, j <span style=color:#66d9ef>in</span> foos {
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>using</span> v <span style=color:#75715e>// `v` is now a variable reference as `foos` was passed by pointer
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>	fmt.println(j, v, f, i)
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h4 id=defer-if><code>defer if</code> <a class=text-decoration-none href=#defer-if>#</a></h4><p>The <code>defer if</code> idiom is equivalent to an <code>if</code> statement inside of a <code>defer</code>. It is merely a shorthand that comes about from the natural evaluation of <code>if</code> as a statement in its own right; it does not optionally defer a statement on the basis of a boolean condition at the time of evaluation, but it evaluates the condition once the deferred block is acted upon.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span>cond <span style=color:#f92672>:=</span> <span style=color:#66d9ef>false</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>defer</span> {
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>if</span> cond { fmt.println(<span style=color:#e6db74>&#34;c&#34;</span>) } <span style=color:#75715e>// This will print last.
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>}
</span></span><span style=display:flex><span><span style=color:#66d9ef>defer</span> <span style=color:#66d9ef>if</span> cond {
</span></span><span style=display:flex><span>	fmt.println(<span style=color:#e6db74>&#34;b&#34;</span>) <span style=color:#75715e>// This will print after &#34;a&#34;.
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>}
</span></span><span style=display:flex><span><span style=color:#66d9ef>defer</span> {
</span></span><span style=display:flex><span>	<span style=color:#75715e>// This is first evaluated, allowing the prior `defer`s to act, as evaluation
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>	happens <span style=color:#66d9ef>in</span> reverse declaration order.
</span></span><span style=display:flex><span>	cond <span style=color:#f92672>=</span> <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span>	fmt.println(<span style=color:#e6db74>&#34;a&#34;</span>) <span style=color:#75715e>// This will print first.
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>}
</span></span></code></pre></div><h4 id=maybet><code>Maybe(T)</code> <a class=text-decoration-none href=#maybet>#</a></h4><p><code>Maybe(T)</code> is a union which <em>either</em> returns a type <code>T</code> or <code>nil</code>. In other languages this is often seen as <code>Option(T)</code>, <code>Result(T)</code>, etc.</p><p>Odin has multiple return values, so <code>Maybe(T)</code> is used less frequently or rarely in the <code>core</code> library. Instead of doing <code>-> Maybe(int)</code> you could transform it to <code>-> (int, bool)</code>.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span>halve <span style=color:#f92672>::</span> <span style=color:#66d9ef>proc</span>(n<span style=color:#f92672>:</span> <span style=color:#66d9ef>int</span>) <span style=color:#f92672>-&gt;</span> Maybe(<span style=color:#66d9ef>int</span>) {
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>if</span> n <span style=color:#f92672>%</span> <span style=color:#a6e22e>2</span> <span style=color:#f92672>!=</span> <span style=color:#a6e22e>0</span> <span style=color:#66d9ef>do</span> <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>nil</span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>return</span> n <span style=color:#f92672>/</span> <span style=color:#a6e22e>2</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>half, ok <span style=color:#f92672>:=</span> halve(<span style=color:#a6e22e>2</span>).<span style=color:#960050;background-color:#1e0010>?</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>if</span> ok <span style=color:#66d9ef>do</span> fmt.println(half)       <span style=color:#75715e>// 1
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>half, ok <span style=color:#f92672>=</span> halve(<span style=color:#a6e22e>3</span>).<span style=color:#960050;background-color:#1e0010>?</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>if</span> <span style=color:#960050;background-color:#1e0010>!</span>ok <span style=color:#66d9ef>do</span> fmt.println(<span style=color:#e6db74>&#34;3/2 isn&#39;t an int&#34;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>n <span style=color:#f92672>:=</span> halve(<span style=color:#a6e22e>4</span>).<span style=color:#960050;background-color:#1e0010>?</span> <span style=color:#66d9ef>or_else</span> <span style=color:#a6e22e>0</span>
</span></span><span style=display:flex><span>fmt.println(n)                   <span style=color:#75715e>// 2
</span></span></span></code></pre></div><h3 id=advanced-idioms>Advanced idioms <a class=text-decoration-none href=#advanced-idioms>#</a></h3><p>Subtype polymorphism with run-time type-safe down-casting:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-odin data-lang=odin><span style=display:flex><span>Entity <span style=color:#f92672>::</span> <span style=color:#66d9ef>struct</span> {
</span></span><span style=display:flex><span>	id<span style=color:#f92672>:</span>   <span style=color:#66d9ef>u64</span>,
</span></span><span style=display:flex><span>	name<span style=color:#f92672>:</span> <span style=color:#66d9ef>string</span>,
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	variant<span style=color:#f92672>:</span> <span style=color:#66d9ef>union</span>{<span style=color:#f92672>^</span>Frog},
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Frog <span style=color:#f92672>::</span> <span style=color:#66d9ef>struct</span> {
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>using</span> entity<span style=color:#f92672>:</span> Entity,
</span></span><span style=display:flex><span>	volume<span style=color:#f92672>:</span> <span style=color:#66d9ef>f32</span>,
</span></span><span style=display:flex><span>	jump_height<span style=color:#f92672>:</span> <span style=color:#66d9ef>i32</span>,
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>new_entity <span style=color:#f92672>::</span> <span style=color:#66d9ef>proc</span>(<span style=color:#960050;background-color:#1e0010>$</span>T<span style=color:#f92672>:</span> <span style=color:#66d9ef>typeid</span>) <span style=color:#f92672>-&gt;</span> <span style=color:#f92672>^</span>T {
</span></span><span style=display:flex><span>	e <span style=color:#f92672>:=</span> <span style=color:#66d9ef>new</span>(T)
</span></span><span style=display:flex><span>	e.variant <span style=color:#f92672>=</span> e
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>return</span> e
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>entity<span style=color:#f92672>:</span> <span style=color:#f92672>^</span>Entity <span style=color:#f92672>=</span> new_entity(Frog)
</span></span><span style=display:flex><span><span style=color:#66d9ef>switch</span> e <span style=color:#66d9ef>in</span> entity.variant {
</span></span><span style=display:flex><span><span style=color:#66d9ef>case</span> <span style=color:#f92672>^</span>Frog<span style=color:#f92672>:</span>
</span></span><span style=display:flex><span>	fmt.println(<span style=color:#e6db74>&#34;Ribbit:&#34;</span>, e.volume)
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h2 id=implicit-type-conversions>Implicit Type Conversions <a class=text-decoration-none href=#implicit-type-conversions>#</a></h2><p>Odin is a strongly and <code>distinct</code>ly typed language by default. It has very few implicit type conversions compared to many other languages.</p><ul><li><code>^T</code> -> <code>rawptr</code></li><li><code>[^]T</code> -> <code>rawptr</code></li><li><code>[^]T</code> &lt;-> <code>^T</code></li><li>All types to <code>any</code> (must be specialized/non-polymorphic)</li><li>Any of its variants to the <code>union</code></li><li><code>fN</code> -> <code>complex2N</code> (e.g. <code>f32</code> -> <code>complex64</code>)</li><li><code>fN</code> -> <code>quaternion4N</code> (e.g. <code>f32</code> -> <code>quaternion128</code>)</li><li><code>complex2N</code> -> <code>quaternion4N</code> (e.g. <code>complex64</code> -> <code>quaternion128</code>)</li><li><code>T</code> -> <code>[N]T</code></li><li><code>T</code> -> <code>matrix[R, C]T</code></li><li><code>T</code> -> <code>#simd[N]T</code></li><li><code>distinct proc</code> &lt;-> <code>proc</code> (same base types)</li><li><code>distinct matrix</code> &lt;-> <code>matrix</code> (same base types)</li><li>Subtypes through <code>using</code></li><li>Untyped integers -> all numeric related types that can represent them without truncation</li><li>Untyped floats -> all numeric related types that can represent them without truncation</li><li>Untyped booleans -> all boolean related types</li><li>Untyped rune -> all rune types</li><li>Untyped strings -> all string types</li></ul><h2 id=what-to-do-if-you-get-stuck>What to do if you get stuck <a class=text-decoration-none href=#what-to-do-if-you-get-stuck>#</a></h2><p>If you are unable to find the information you need on this overview page, the <a href=https://odin-lang.org/docs/faq/>FAQ</a>, the <a href=https://github.com/odin-lang/Odin/wiki>wiki</a>, the <a href=https://github.com/odin-lang/examples>example repository</a> (which contains demos for using the vendor libs, e.g. <a href=https://github.com/odin-lang/examples/blob/master/raylib/tetroid/raylib_tetroid.odin>Tetris in raylib</a>), or the <a href=https://pkg.odin-lang.org/>package documentation</a>, then you will likely find it very helpful to explore your Odin source code directory, especially the files contained in the following five subdirectories: <code>examples\demo</code>, <code>tests</code>, <code>core</code>, <code>vendor</code>, and <code>misc\old_demos</code>.</p><p>The following list describes why each of these may be useful:</p><ul><li>The <code>examples\demo\demo.odin</code> file contains ~2500 lines of Odin code that demonstrate many of Odin&rsquo;s language features and provide commentary on some of them. This file contains many examples that cannot be found anywhere in the Overview nor in the other documentation.</li><li>The <code>tests</code> folder provides unit tests for many of Odin&rsquo;s features and libraries, whereby reading these files you can gain a more nuanced view of exactly how things are intended or expected to behave. Tests are essentially automatically verified documentation. Tests often cover details that normal documentation doesn&rsquo;t even mention. Tests are also guaranteed to be up-to-date (if regularly run), unlike more informal documentation.</li><li>The <code>core</code> and <code>vendor</code> folders contain the bindings and implementation code for Odin&rsquo;s standard library and various multimedia libraries respectively. <strong>Even if you don&rsquo;t understand the implementation of something, reading the code can still greatly improve your chances of guessing what exactly it really does.</strong> Odin is a straightforward and legible language with relatively little magic compared to other modern languages. Reading source code can enable you to work around missing documentation much more effectively. This is a very useful thing to keep in mind for working with any under-development language or library effectively.</li><li><code>misc\old_demos</code> may contain examples that are different from the main up-to-date <code>demo.odin</code> file contained in <code>examples\demo</code>. This may provide additional context for Odin&rsquo;s design and features. The other resources are probably better though.</li></ul><p>Try doing a text search in one or more of these subdirectories for what you are looking for. Make sure the search is a proper full text search too, such as what <code>grep</code> (a popular 3rd party file search program) provides. Be careful that you specify your search correctly, especially if you use <em>regex</em>. Some default searches on some operating systems may miss content that exists in some files by not searching the actual file contents completely or at all, which can be misleading.</p><p>Odin&rsquo;s documentation may be sparse at times, but this sparsity can be worked around effectively by using the above listed resources. <em>Don&rsquo;t forget they exist.</em></p><p>When working with any system that is still under-development these kinds of techniques are essential for maximizing your effectiveness. Many (perhaps most) real world companies, especially in intense industries such as game development and multimedia often don&rsquo;t have complete documentation and changes can happen rapidly.</p><p>Self-sufficiency in such a context requires a willingness to explore these kinds of resources proactively, rather than waiting for documentation that may be slow to come or may not fully cover what things actually do precisely enough.</p><p>Don&rsquo;t be afraid to simply experiment and try to deduce what something is really doing or what features may exist. You may be surprised how much you can still accomplish with just a little bit of patience and thoughtfulness!</p><p>Furthermore, even if Odin doesn&rsquo;t yet have a feature or library that you need, the fact that Odin has bindings to C&rsquo;s standard library (which are available in <a href=https://pkg.odin-lang.org/core/c/libc/>the libc package</a> via <code>import "core:c/libc"</code>) means that any algorithms, example code, documentation, or books originally written for C can also be used to accomplish what you need in Odin. You can then optionally write Odin wrappers around that code to bridge the idiomatic gap better or else just use the C-like code directly. You can also bind to code from any libraries or languages that <code>foreign</code> can bind to (see <a href=https://odin-lang.org/docs/overview/#foreign-system>the foreign section</a> for more info).</p><p>Thus, when necessity calls for it, <strong>the entire literature and community of C is still (in effect) available to you in Odin as well</strong>. So, any time you are tempted to think &ldquo;I can&rsquo;t implement this in Odin yet because there&rsquo;s not enough documentation&rdquo; remind yourself that all (or almost all) of C is still available to you, but through a cleaner namespaced interface. Odin is also similar to C anyway, so direct translations of C to Odin (without even using the <code>libc</code> bindings) may still be relatively easy. In effect, any tutorial or book on C can also be thought of as an Odin resource too in that sense!</p><p>You can also make your experience navigating Odin code easier by installing a <a href=https://en.wikipedia.org/wiki/Syntax_highlighting>syntax highlighter</a> and/or a <a href=https://en.wikipedia.org/wiki/Language_Server_Protocol>language server</a>, which do exist for some editors (e.g. VS Code, Vim, Sublime Text, and Emacs) and work well enough to make using Odin comfortable. See <a href=https://github.com/odin-lang/Odin/wiki/Odin-Libs#editor-support>the list of text editors that have support for Odin code</a> for known examples.</p><p>Finally, you can ask for information from <a href=https://discord.gg/vafXTdubwr>the Odin community on Discord</a> or elsewhere. There is also <a href=https://odin.handmade.network/forums>an old Handmade Network forum</a> that is no longer in use and doesn&rsquo;t have many threads, but may still have a small amount of useful info on it.</p><p>There&rsquo;s a collection of other <a href=https://github.com/odin-lang/Odin/wiki/Odin-Libs>libraries created by the Odin community</a> that may also be helpful.</p><p>Good luck and have fun!</p></div></article><div id=TOC class="col-lg-2 odin-toc-border"><div class="sticky-top odin-below-navbar py-3"><nav id=TableOfContents><ul><li><a href=#introduction>Introduction</a></li><li><a href=#hellope>Hellope!</a></li><li><a href=#variable-declarations>Variable declarations</a></li><li><a href=#assignment-statements>Assignment statements</a></li><li><a href=#literals>Literals</a><ul><li><a href=#string-and-character-literals>String and character literals</a><ul><li><a href=#escape-characters>Escape Characters</a></li></ul></li><li><a href=#numbers>Numbers</a></li></ul></li><li><a href=#comments>Comments</a></li><li><a href=#constant-declarations>Constant declarations</a></li><li><a href=#packages>Packages</a><ul><li><a href=#import-statement><code>import</code> statement</a></li><li><a href=#exported-names>Exported names</a></li><li><a href=#authoring-a-package>Authoring a package</a></li><li><a href=#organizing-packages>Organizing packages</a></li></ul></li><li><a href=#control-flow-statements>Control flow statements</a><ul><li><a href=#for-statement><code>for</code> statement</a><ul><li><a href=#basic-for-loop>Basic for loop</a></li><li><a href=#range-based-for-loop>Range-based for loop</a></li><li><a href=#for-reverse-iteration><code>for</code> reverse iteration</a></li><li><a href=#for-loop-unrolling><code>for</code> loop unrolling</a></li></ul></li><li><a href=#if-statement><code>if</code> statement</a></li><li><a href=#switch-statement><code>switch</code> statement</a><ul><li><a href=#partial-switch><code>#partial switch</code></a></li></ul></li><li><a href=#defer-statement><code>defer</code> statement</a></li><li><a href=#when-statement><code>when</code> statement</a></li><li><a href=#branch-statements>Branch statements</a><ul><li><a href=#break-statement><code>break</code> statement</a></li><li><a href=#continue-statement><code>continue</code> statement</a></li><li><a href=#fallthrough-statement><code>fallthrough</code> statement</a></li></ul></li></ul></li><li><a href=#procedures>Procedures</a><ul><li><a href=#parameters>Parameters</a><ul><li><a href=#shadowing-parameters>Shadowing Parameters</a></li><li><a href=#variadic-parameters>Variadic Parameters</a></li></ul></li><li><a href=#multiple-results>Multiple results</a></li><li><a href=#named-results>Named results</a></li><li><a href=#named-arguments>Named arguments</a></li><li><a href=#default-values>Default values</a></li><li><a href=#explicit-procedure-overloading>Explicit procedure overloading</a><ul><li><a href=#rationale-behind-explicit-overloading>Rationale behind explicit overloading</a></li></ul></li></ul></li><li><a href=#basic-types>Basic types</a><ul><li><a href=#zero-values>Zero values</a></li><li><a href=#type-conversion>Type conversion</a><ul><li><a href=#cast-operator>Cast operator</a></li><li><a href=#transmute-operator>Transmute operator</a></li></ul></li><li><a href=#untyped-types>Untyped types</a></li><li><a href=#auto-cast-operation>Auto cast operation</a></li><li><a href=#built-in-constants-values-and-procedures>Built-in constants, values, and procedures</a><ul><li><a href=#built-in-procedures>Built-in procedures</a></li></ul></li><li><a href=#string-type><code>string</code> type</a><ul><li><a href=#string-iteration><code>string</code> iteration</a></li><li><a href=#string-format-printing><code>string</code> format printing</a></li></ul></li><li><a href=#cstring-type><code>cstring</code> type</a></li><li><a href=#string-type-conversions><code>string</code> type conversions</a><ul><li><a href=#from-string-to-x>From <code>string</code> to X</a></li><li><a href=#from-cstring-to-x>From <code>cstring</code> to X</a></li><li><a href=#from-a-string-literal-to-x>From a <em><strong>string literal</strong></em> to X</a></li><li><a href=#from-u8-to-x>From <code>[]u8</code> to X</a></li><li><a href=#from-rune-to-string>From <code>[]rune</code> to <code>string</code></a></li><li><a href=#from-u8-to-cstring>From <code>[^]u8</code> to <code>cstring</code></a></li><li><a href=#from-u8-and-length-int-to-string>From <code>[^]u8</code> and length <code>int</code> to <code>string</code></a></li></ul></li></ul></li><li><a href=#operators>Operators</a><ul><li><a href=#arithmetic-operators>Arithmetic operators</a></li><li><a href=#comparison-operators>Comparison operators</a></li><li><a href=#logical-operators>Logical operators</a></li><li><a href=#compound-binary-operator-and-assign>Compound binary operator and assign</a></li><li><a href=#address-operator>Address operator</a></li><li><a href=#ternary-operators>Ternary Operators</a></li><li><a href=#other-operators>Other operators</a></li><li><a href=#operator-precedence>Operator precedence</a></li><li><a href=#integer-operators>Integer operators</a></li><li><a href=#integer-overflow>Integer overflow</a></li><li><a href=#floating-point-operators>Floating-point operators</a></li></ul></li><li><a href=#advanced-types>Advanced types</a><ul><li><a href=#type-alias>Type alias</a></li><li><a href=#distinct-types>Distinct types</a></li><li><a href=#fixed-arrays>Fixed arrays</a><ul><li><a href=#array-programming>Array programming</a></li></ul></li><li><a href=#slices>Slices</a><ul><li><a href=#slice-literals>Slice literals</a></li><li><a href=#slice-shorthand>Slice shorthand</a></li><li><a href=#nil-slices>Nil slices</a></li><li><a href=#sort-slices>Sort slices</a></li></ul></li><li><a href=#dynamic-arrays>Dynamic arrays</a><ul><li><a href=#appending-to-a-dynamic-array>Appending to a dynamic array</a></li><li><a href=#inject--assign-to-a-dynamic-array>Inject / Assign to a dynamic array</a></li><li><a href=#removing-from-a-dynamic-array>Removing from a dynamic array</a></li><li><a href=#slice--sort-a-dynamic-array>Slice & Sort a dynamic array</a></li><li><a href=#making-and-deleting-slices-and-dynamic-arrays>Making and deleting slices and dynamic arrays</a></li><li><a href=#clearing-a-dynamic-array>Clearing a dynamic array</a></li><li><a href=#resize--reserve-with-a-dynamic-array>Resize / Reserve with a dynamic array</a></li><li><a href=#small_arrayn-t-container-dynamic-array><code>Small_Array(N, T)</code> container dynamic array</a></li></ul></li><li><a href=#enumerations>Enumerations</a><ul><li><a href=#implicit-selector-expression>Implicit Selector Expression</a></li><li><a href=#iterating-an-enumeration>Iterating an Enumeration</a></li></ul></li><li><a href=#enumerated-array>Enumerated Array</a></li><li><a href=#bit-sets>Bit sets</a></li><li><a href=#pointers>Pointers</a></li><li><a href=#structs>Structs</a><ul><li><a href=#struct-literals>Struct literals</a></li><li><a href=#struct-directives>Struct directives</a></li><li><a href=#struct-field-tags>Struct field tags</a></li></ul></li><li><a href=#unions>Unions</a><ul><li><a href=#type-switch-statement>Type switch statement</a></li><li><a href=#union-tags>Union tags</a></li></ul></li><li><a href=#maps>Maps</a><ul><li><a href=#map-container-calls>Map Container Calls</a></li></ul></li><li><a href=#bit-fields>Bit Fields</a></li><li><a href=#procedure-type>Procedure type</a><ul><li><a href=#calling-conventions>Calling conventions</a></li></ul></li><li><a href=#typeid-type><code>typeid</code> type</a></li><li><a href=#any-type><code>any</code> Type</a></li><li><a href=#multi-pointers>Multi Pointers</a></li><li><a href=#soa-data-types>SOA Data Types</a><ul><li><a href=#soa-struct-arrays>SOA Struct Arrays</a></li><li><a href=#soa-struct-slices-and-dynamic-arrays>SOA Struct Slices and Dynamic Arrays</a></li><li><a href=#soa_zip-and-soa_unzip><code>soa_zip</code> and <code>soa_unzip</code></a></li></ul></li><li><a href=#matrix-type><code>matrix</code> type</a><ul><li><a href=#submatrix-casting>Submatrix Casting</a></li><li><a href=#technical-information-of-matrix-types>Technical Information of <code>matrix</code> Types</a></li></ul></li></ul></li><li><a href=#raw_data-procedure><code>raw_data</code> procedure</a></li><li><a href=#using-statement><code>using</code> statement</a><ul><li><a href=#using-statement-with-structs>Using statement with structs</a></li><li><a href=#subtype-polymorphism>Subtype polymorphism</a></li></ul></li><li><a href=#or_else-expression><code>or_else</code> expression</a></li><li><a href=#or_return-operator><code>or_return</code> operator</a></li><li><a href=#or_continue-operator><code>or_continue</code> operator</a></li><li><a href=#or_break-operator><code>or_break</code> operator</a></li><li><a href=#conditional-compilation>Conditional compilation</a><ul><li><a href=#file-suffixes>File suffixes</a></li><li><a href=#when-statements><code>when</code> statements</a></li><li><a href=#command-line-defines>Command-line defines</a></li><li><a href=#build-tags>Build tags</a><ul><li><a href=#advanced-build-tags>Advanced Build Tags</a></li></ul></li></ul></li><li><a href=#implicit-context-system>Implicit context system</a><ul><li><a href=#allocators>Allocators</a><ul><li><a href=#tracking-allocator>Tracking allocator</a></li><li><a href=#explicit-context-definition>Explicit <code>context</code> Definition</a></li></ul></li><li><a href=#logging-system>Logging System</a></li></ul></li><li><a href=#foreign-system>Foreign system</a></li><li><a href=#using-a-vendor-library>Using a <code>vendor</code> library</a></li><li><a href=#parametric-polymorphism>Parametric polymorphism</a><ul><li><a href=#explicit-parametric-polymorphism>Explicit parametric polymorphism</a><ul><li><a href=#procedures-using-explicit-parametric-polymorphism-parapoly>Procedures using explicit parametric polymorphism (parapoly)</a></li><li><a href=#data-types-using-explicit-parametric-polymorphism-parapoly>Data types using explicit parametric polymorphism (parapoly)</a></li></ul></li><li><a href=#implicit-parametric-polymorphism>Implicit parametric polymorphism</a><ul><li><a href=#procedures-using-implicit-parametric-polymorphism-parapoly>Procedures using implicit parametric polymorphism (parapoly)</a></li><li><a href=#specialization>Specialization</a></li></ul></li><li><a href=#where-clauses><code>where</code> clauses</a></li></ul></li><li><a href=#--operator-selector-call-expressions><code>-></code> operator (selector call expressions)</a></li><li><a href=#attributes>Attributes</a><ul><li><a href=#general-attributes>General attributes</a><ul><li><a href=#private-1><code>@(private)</code></a></li><li><a href=#require><code>@(require)</code></a></li></ul></li><li><a href=#linking-and-foreign-attributes>Linking and foreign attributes</a><ul><li><a href=#link_namestring><code>@(link_name=&lt;string>)</code></a></li><li><a href=#link_prefixstring><code>@(link_prefix=&lt;string>)</code></a></li><li><a href=#link_suffixstring><code>@(link_suffix=&lt;string>)</code></a></li><li><a href=#export-or-exporttruefalse><code>@export</code> or <code>@(export=true/false)</code></a></li><li><a href=#linkagestring><code>@(linkage=&lt;string>)</code></a></li><li><a href=#default_calling_conventionstring><code>@(default_calling_convention=&lt;string>)</code></a></li><li><a href=#link_sectionstring><code>@(link_section=&lt;string>)</code></a></li><li><a href=#extra_linker_flagsstring><code>@(extra_linker_flags=&lt;string>)</code></a></li></ul></li><li><a href=#procedure-attributes>Procedure attributes</a><ul><li><a href=#deferred_proc><code>@(deferred_*=&lt;proc>)</code></a></li><li><a href=#deprecatedstring><code>@(deprecated=&lt;string>)</code></a></li><li><a href=#require_results><code>@(require_results)</code></a></li><li><a href=#disabledboolean><code>@(disabled=&lt;boolean>)</code></a></li><li><a href=#init><code>@(init)</code></a></li><li><a href=#fini><code>@(fini)</code></a></li><li><a href=#cold><code>@(cold)</code></a></li><li><a href=#optimization_modestring><code>@(optimization_mode=&lt;string>)</code></a></li><li><a href=#test-1><code>@(test)</code></a></li><li><a href=#no_sanitize_address><code>@(no_sanitize_address)</code></a></li></ul></li><li><a href=#variable-attributes>Variable attributes</a><ul><li><a href=#static><code>@(static)</code></a></li><li><a href=#rodata><code>@(rodata)</code></a></li><li><a href=#thread_local><code>@(thread_local)</code></a></li></ul></li><li><a href=#specialized-attributes>Specialized attributes</a></li></ul></li><li><a href=#directives>Directives</a><ul><li><a href=#record-memory-layout>Record memory layout</a><ul><li><a href=#packed><code>#packed</code></a></li><li><a href=#raw_union><code>#raw_union</code></a></li><li><a href=#align><code>#align</code></a></li><li><a href=#no_nil><code>#no_nil</code></a></li><li><a href=#no_copy><code>#no_copy</code></a></li></ul></li><li><a href=#control-statements>Control statements</a><ul><li><a href=#partial><code>#partial</code></a></li></ul></li><li><a href=#procedure-parameters>Procedure parameters</a><ul><li><a href=#no_alias><code>#no_alias</code></a></li><li><a href=#any_int><code>#any_int</code></a></li><li><a href=#caller_location><code>#caller_location</code></a></li><li><a href=#caller_expression-or-caller_expressionparam><code>#caller_expression</code> or <code>#caller_expression(&lt;param>)</code></a></li><li><a href=#c_vararg><code>#c_vararg</code></a></li><li><a href=#by_ptr><code>#by_ptr</code></a></li><li><a href=#optional_ok><code>#optional_ok</code></a></li><li><a href=#optional_allocator_error><code>#optional_allocator_error</code></a></li></ul></li><li><a href=#expressions>Expressions</a><ul><li><a href=#type><code>#type</code></a></li><li><a href=#sparse><code>#sparse</code></a></li></ul></li><li><a href=#statements>Statements</a><ul><li><a href=#bounds_check-and-no_bounds_check><code>#bounds_check</code> and <code>#no_bounds_check</code></a></li><li><a href=#type_assert-and-no_type_assert><code>#type_assert</code> and <code>#no_type_assert</code></a></li></ul></li><li><a href=#built-in-directives>Built-in directives</a><ul><li><a href=#assertboolean><code>#assert(&lt;boolean>)</code></a></li><li><a href=#panicstring><code>#panic(&lt;string>)</code></a></li><li><a href=#configidentifier-default><code>#config(&lt;identifier>, default)</code></a></li><li><a href=#defined><code>#defined</code></a></li><li><a href=#file-directory-line-procedure><code>#file</code>, <code>#directory</code>, <code>#line</code>, <code>#procedure</code></a></li><li><a href=#existsstring-path><code>#exists(&lt;string-path>)</code></a></li><li><a href=#branch_location><code>#branch_location</code></a></li><li><a href=#location-or-locationentity><code>#location()</code> or <code>#location(&lt;entity>)</code></a></li><li><a href=#loadstring-path-or-loadstring-path-type><code>#load(&lt;string-path>)</code> or <code>#load(&lt;string-path>, &lt;type>)</code></a></li><li><a href=#hashstring-text-string-hash><code>#hash(&lt;string-text>, &lt;string-hash>)</code></a></li><li><a href=#load_hashstring-path-string-hash><code>#load_hash(&lt;string-path>, &lt;string-hash>)</code></a></li><li><a href=#load_directorystring-path><code>#load_directory(&lt;string-path>)</code></a></li></ul></li></ul></li><li><a href=#useful-idioms>Useful idioms</a><ul><li><a href=#basic-idioms>Basic idioms</a><ul><li><a href=#ternary-operator>Ternary operator</a></li><li><a href=#if-statements-with-initialization>If-statements with initialization</a></li><li><a href=#iterating-through-slices-of-structs-by-value-or-by-reference>Iterating through slices of structs by value or by reference</a></li><li><a href=#defer-if><code>defer if</code></a></li><li><a href=#maybet><code>Maybe(T)</code></a></li></ul></li><li><a href=#advanced-idioms>Advanced idioms</a></li></ul></li><li><a href=#implicit-type-conversions>Implicit Type Conversions</a></li><li><a href=#what-to-do-if-you-get-stuck>What to do if you get stuck</a></li></ul></nav></div></div></div></div></main><footer class=odin-footer><div class="container pb-5 pt-5"><div class="row g-4"><div class=col><a class=navbar-brand href=/><img class=mb-3 src=/logo.svg height=30 alt=Odin></a><p>The Data-Oriented Language for Sane Software Development.</p></div><nav class=col-md-auto><h4 class=fw-normal>Resources</h4><ul class=list-unstyled><li><a href=/docs class=link-light>Docs</a></li><li><a href=https://pkg.odin-lang.org/ class=link-light>Packages</a></li><li><a href=/news class=link-light>News</a></li></ul></nav><nav class=col-md-auto><h4 class=fw-normal>Community</h4><ul class=list-unstyled><li><a href=https://github.com/odin-lang/Odin target=_blank class=link-light>GitHub</a></li><li><a href=https://discord.gg/vafXTdubwr target=_blank class=link-light>Discord</a></li><li><a href=https://www.twitch.tv/ginger_bill target=_blank class=link-light>Twitch</a></li><li><a href=https://www.youtube.com/channel/UCUSck1dOH7VKmG4lRW7tZXg target=_blank class=link-light>YouTube</a></li><li><a href=/showcase target=_blank class=link-light>Showcase</a></li></ul></nav><nav class=col-md-auto><h4 class=fw-normal>Contribute</h4><ul class=list-unstyled><li><a href=https://github.com/odin-lang/Odin/issues target=_blank class=link-light>Issues</a></li><li><a href=https://www.patreon.com/gingerbill target=_blank class=link-light>Donate</a></li></ul></nav></div><div class="mt-4 text-muted">© 2016–2024 Ginger Bill</div></div></footer><script src=/lib/bootstrap/js/bootstrap.min.js></script><script src=/js/script.js></script></body></html>